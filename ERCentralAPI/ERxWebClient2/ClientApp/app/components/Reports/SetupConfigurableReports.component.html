<div *ngIf="IsServiceBusy" class="k-loading-image" style="position: fixed; top: 0%;"></div>
<div class="container px-1 col-12 fullBordersInTabs">
    <div class="row">
        <div class="col-5 col-lg-4" style="max-height:60vh; overflow:auto;">
            Reports list
            <div *ngFor="let rpt of Reports">
                {{rpt.reportId}} : {{rpt.name}} <button class="btn btn-outline-success px-1 py-0 my-auto" (click)="EditReport(rpt)">Edit</button>
            </div>
        </div>
        <div class="col-7 col-lg-8 row">
            <div *ngIf="EditingReport != null">
                <div class="row">
                    {{EditingReport.name}} - {{EditingReport.reportType}}
                    <button class="btn btn-danger my-auto px-1 py-0" (click)="Save()" [disabled]="!EditingReportHasChanged || !HasWriteRights">Save</button>
                    <button class="btn btn-outline-dark my-auto px-1 py-0" (click)="CancelEditing()">Cancel</button>
                    <div *ngIf="selectedNode != null">Selected code:  <span class="font-weight-bold">{{selectedNode.name}}</span></div>
                    <button class="btn btn-outline-success my-auto px-1 py-0" (click)="AddColumn()" [disabled]="!HasWriteRights">Add column</button>
                </div>
                <div class="row">
                    <div *ngFor="let col of EditingReport.columns" class="border border-info">
                        <div class="row mx-1">
                            Name: {{col.name}} 
                            <div class="ml-auto alert-info">Col {{col.columnOrder + 1}}</div>

                        </div><button class="btn btn-sm btn-outline-success my-auto px-1 py-0" (click)="AddCodeToColumn(col, selectedNode)" [disabled]="!CanAddNodeToColumn(col, selectedNode) || !HasWriteRights" >+</button>
                       <div class="p-1 m-1 border border-dark"> 
                           Codes in column...
                           <div *ngFor="let code of col.codes" class="m-1 border rounded border-info">
                               {{code.userDefText}}
                                <button class="btn btn-sm px-1 py-0 my-auto ml-auto" [disabled]="code.codeOrder == 0 || !HasWriteRights" (click)="MoveColumnCodeUp(col, code)">Up</button>
                                <button class="btn btn-sm px-1 py-0 my-auto mx-1" [disabled]="code.codeOrder == col.codes.length -1 || !HasWriteRights" (click)="MoveColumnCodeDown(col, code)">Down</button>
                               <!--CodeId:{{code.attributeId}}<br />
                               Order: {{code.codeOrder}}<br />
                               Show add.txt: {{code.displayAdditionalText}}<br />
                               Show code name: {{code.displayCode}}<br />
                               Show PDF txt: {{code.displayCodedText}}<br />
                               ParentCodeId: {{code.parentAttributeId}}<br />
                               parentAttributeText? {{code.parentAttributeText}}<br />
                               reportColumnCodeId: {{code.reportColumnCodeId}}<br />
                               reportColumnId: {{code.reportColumnId}}<br />
                               setId: {{code.setId}}<br />
                               userDefText: {{code.userDefText}}<br />-->
                           </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


