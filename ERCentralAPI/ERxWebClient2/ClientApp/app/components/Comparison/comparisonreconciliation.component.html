<HeaderComponent PageTitle="Reconciliation" Context="reconciliation"></HeaderComponent>
<div class="card container-fluid bg-light m-0 px-1 py-0 mb-1 rounded" style="max-width:1650px;">
	<button class="page-link rounded pt-1 pb-1 mb-1 float-right" style="position:absolute; right: 0; z-index:2000;" (click)="BackToMain()">
		Close/back
	</button>
	<div class="row m-0 p-0">
		<div class="col-12 bg-light ">
			<h5 class="m-1 p-1 font-weight-bold">Items List</h5>
				<div class="k-loading-image" *ngIf="IsServiceBusy()"></div>
                <div style="max-height:48vh; overflow:scroll;">
                    <table *ngIf="allItems" class="p-1 col-12 table table-bordered table-responsive-sm">
                        <thead>
                            <tr>
                                <th width="15"></th>
                                <th width="40">Item</th>
                                <th width="140">{{CurrentComparison.contactName1}}</th>
                                <th width="140">{{CurrentComparison.contactName2}}</th>
                                <th width="140" *ngIf="CurrentComparison.contactName3 != ''">
                                    {{CurrentComparison.contactName3}}
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let recon of allItems; let i = index" [ngClass]="{'table-success' : i == selectedRow && recon.IsCompleted,
                            'bg-comp' : i != selectedRow && recon.IsCompleted,
                            'bg-incomp-sel' : i == selectedRow && !recon.IsCompleted,
                            'bg-incomp' : i != selectedRow && !recon.IsCompleted}"
                                (click)="ChangePanelItem(recon.Item.itemId, i); ">
                                <td style="max-width:15px;">
                                    <input type="checkbox" name="name1"
                                           [checked]="recon.IsCompleted" [disabled]="true" />&nbsp;
                                </td>
                                <td class="p-1" style="max-width:150px;">
                                    <span *ngIf="_ItemListService.ItemList.items[i] != undefined" (click)="OpenItem(_ItemListService.ItemList.items[i].itemId)"
                                          class="btn btn-link mt-1 col-md-1">
                                        {{_ItemListService.ItemList.items[i].itemId}}
                                    </span>
                                    <br />
                                    <span class="col-md-1">
                                        {{recon.Item.shortTitle}}
                                    </span>
                                    <br />
                                </td>
                                <td class="p-1" style="max-width:475px;">
                                    <span class="col-md-12 m-1 ml-0 pl-0" *ngIf="!recon.IsCompleted">
                                        <button (click)="Complete(recon, CurrentComparison.contactId1)"
                                                class="btn btn-sm btn-success pull-left">
                                            Complete
                                        </button>

                                        <button (click)="CompleteAndLock(recon, CurrentComparison.contactId1)"
                                                class="btn btn-sm btn-info pull-right">
                                            Complete & Lock
                                        </button>
                                    </span>
                                    <span *ngIf="recon.IsCompleted && recon.CompletedByID == CurrentComparison.contactId1">
                                        <button (click)="UnComplete(recon)"
                                                class="btn btn-sm btn-danger">
                                            Un-Complete
                                        </button>
                                    </span>
                                    <div class="row col-md-12" *ngFor="let j of reconcilingCodeArrayLength(recon.CodesReviewer1.length)">
                                        <div class="row m-0">
                                            <div [hidden]="!hidemeOne[j+(100*i)]">
                                                <span *ngFor="let item of getReconSplitArray(recon.CodesReviewer1[j-1].Fullpath)">
                                                    <button *ngIf="item != ''"
                                                            class="BackgroundButtonClear btn-sm border-dark bg-white rounded-0 mt-1 px-1 py-0"
                                                            style="text-decoration: none; border-width:1px;">
                                                        {{item}}
                                                    </button>
                                                    <i class="fa fa-arrow-right pt-1 mt-2"
                                                       aria-hidden="true">
                                                    </i>
                                                </span>
                                                <br />
                                            </div>
                                            <button class="btn-sm border-dark bg-white rounded-0 mt-2 px-1  py-0"
                                                    style="text-decoration: none; border-width:1px; cursor:pointer"
                                                    *ngIf="recon.CodesReviewer1[j-1].ArmID == 0"
                                                    (click)="hidemeOne[j+(100*i)] = !hidemeOne[j+(100*i)]">
                                                {{recon.CodesReviewer1[j-1].Name}}
                                            </button>
                                        </div>
                                        <div *ngIf="recon.CodesReviewer1[j-1].InfoBox != ''"
                                             [hidden]="!hidemeOne[j+(100*i)]"
                                             class="col-md-12 small mt-1 p-1 bg-white border border-dark ng-star-inserted">
                                            <b>[Info Box]</b> {{recon.CodesReviewer1[j-1].InfoBox}}
                                        </div>
                                    </div>
                                    <br />
                                    <span class="col-md-12" *ngIf="_ItemListService.ItemList.items[i] != undefined && _ItemListService.ItemList.items[i].arms != undefined && _ItemListService.ItemList.items[i].arms.length > 0 ">
                                        <span *ngFor="let a of _ItemListService.ItemList.items[i].arms">
                                            <b>{{a.title}}</b>
                                            <span *ngFor="let jj of reconcilingCodeArrayLength(recon.CodesReviewer1.length)">
                                                <span class="col-md-12 row" *ngIf="recon.CodesReviewer1[jj-1].ArmID == a.itemArmId">
                                                    <span [hidden]="!hidemearms[jj]">
                                                        <button class="BackgroundButtonClear btn-sm border-dark bg-white rounded-0 mt-1 px-1 py-0"
                                                                style="text-decoration: none; border-width:1px;"
                                                                *ngFor="let item of getReconSplitArray(recon.CodesReviewer1[jj-1].Fullpath)">
                                                            <b>{{item}}</b>
                                                        </button>
                                                        <i class=" fa fa-arrow-right"
                                                           aria-hidden="true">
                                                        </i>

                                                        <br />
                                                    </span>
                                                    <button class="btn-sm border-dark bg-white rounded-0 mt-2 px-1  py-0"
                                                            style="text-decoration: none; border-width:1px; cursor:pointer"
                                                            (click)="hidemearms[jj] = !hidemearms[jj]">
                                                        {{recon.CodesReviewer1[jj-1].Name}}
                                                    </button>
                                                    <br />
                                                    <frame [hidden]="!hidemearms[jj]"
                                                           *ngIf="recon.CodesReviewer1[jj-1].InfoBox != ''"
                                                           class="col-md-12 small mt-1 p-1 bg-white border border-dark ng-star-inserted">
                                                        <b>[Info Box]</b>{{recon.CodesReviewer1[jj-1].InfoBox}}
                                                    </frame>
                                                </span>
                                            </span>
                                            <br />
                                        </span>
                                    </span>
                                </td>
                                <td class="p-1" style="max-width:475px;">
                                    <span class="col-md-12 m-1 ml-0 pl-0" *ngIf="!recon.IsCompleted">
                                        <button (click)="Complete(recon,CurrentComparison.contactId2)"
                                                class="btn btn-sm btn-success pull-left">
                                            Complete
                                        </button>
                                        <button (click)="CompleteAndLock(recon, CurrentComparison.contactId2)"
                                                class="btn btn-sm btn-info  pull-right">
                                            Complete And Lock
                                        </button>
                                    </span>
                                    <br>
                                    <span *ngIf="recon.IsCompleted && recon.CompletedByID == CurrentComparison.contactId2">
                                        <button (click)="UnComplete(recon)"
                                                class="btn btn-sm btn-danger">
                                            Un-Complete
                                        </button>
                                    </span>
                                    <div class="row col-md-12" *ngFor="let k of reconcilingCodeArrayLength(recon.CodesReviewer2.length)">
                                        <div class="row m-0">
                                            <div [hidden]="!hidemeTwo[k+(100*i)]">
                                                <span *ngFor="let item of getReconSplitArray(recon.CodesReviewer2[k-1].Fullpath)">
                                                    <button *ngIf="item != ''"
                                                            class="BackgroundButtonClear btn-sm border-dark bg-white rounded-0 mt-1 px-1 py-0"
                                                            style="text-decoration: none; border-width:1px;">
                                                        {{item}}
                                                    </button>
                                                    <i class="fa fa-arrow-right pt-1 mt-2"
                                                       aria-hidden="true">
                                                    </i>
                                                </span>
                                                <br />
                                            </div>
                                            <button *ngIf="recon.CodesReviewer2[k-1].ArmID == 0"
                                                    class="btn-sm border-dark bg-white rounded-0 mt-2 px-1  py-0"
                                                    style="text-decoration: none; border-width:1px; cursor:pointer"
                                                    (click)="hidemeTwo[k+(100*i)] = !hidemeTwo[k+(100*i)]">
                                                {{recon.CodesReviewer2[k-1].Name}}
                                            </button>
                                        </div>
                                        <div *ngIf="recon.CodesReviewer2[k-1].InfoBox != ''"
                                             [hidden]="!hidemeTwo[k+(100*i)]"
                                             class="col-md-12 small mt-1 p-1 bg-white border border-dark ng-star-inserted">
                                            <b>[Info Box]</b>{{recon.CodesReviewer2[k-1].InfoBox}}
                                        </div>
                                    </div>
                                    <br />
                                    <div class="col-md-12" *ngIf="_ItemListService.ItemList.items[i] != undefined && _ItemListService.ItemList.items[i].arms != undefined && _ItemListService.ItemList.items[i].arms.length > 0  ">
                                        <div *ngFor="let b of _ItemListService.ItemList.items[i].arms">
                                            <b>{{b.title}}</b>
                                            <div *ngFor="let kk of reconcilingCodeArrayLength(recon.CodesReviewer2.length)">
                                                <div class="row col-md-12" *ngIf="recon.CodesReviewer2[kk-1].ArmID == b.itemArmId">
                                                    <span [hidden]="!hidemearms[kk +(100*i)]">
                                                        <span *ngFor="let item of getReconSplitArray(recon.CodesReviewer2[kk-1].Fullpath)">
                                                            <button *ngIf="item != ''"
                                                                    class="BackgroundButtonClear btn-sm border-dark bg-white rounded-0 mt-1 px-1 py-0"
                                                                    style="text-decoration: none; border-width:1px;">
                                                                {{item}}
                                                            </button>
                                                            <i class="fa fa-arrow-right pt-1 mt-2"
                                                               aria-hidden="true">
                                                            </i>
                                                        </span>
                                                        <br />
                                                    </span>
                                                    <button class="btn-sm border-dark bg-white rounded-0 mt-2 px-1  py-0"
                                                            style="text-decoration: none; border-width:1px; cursor:pointer"
                                                            (click)="hidemearms[kk+(100*i)] = !hidemearms[kk+(100*i)]">
                                                        {{recon.CodesReviewer2[kk-1].Name}}
                                                    </button>
                                                    <br />
                                                    <div [hidden]="!hidemearms[kk+(100*i)]"
                                                         *ngIf="recon.CodesReviewer2[kk-1].InfoBox != ''"
                                                         class="col-md-12 small mt-1 p-1 bg-white border border-dark ng-star-inserted">
                                                        <b>[Info Box]</b>{{recon.CodesReviewer2[kk-1].InfoBox}}
                                                    </div>
                                                </div>
                                            </div>
                                            <br />
                                        </div>
                                    </div>
                                </td>
                                <td class="p-1" style="max-width:475px;" *ngIf="CurrentComparison.contactName3 != ''">
                                    <span class="col-md-12 m-1 ml-0 pl-0" *ngIf="!recon.IsCompleted">
                                        <button (click)="Complete(recon, CurrentComparison.contactId3)"
                                                class="btn btn-sm btn-success pull-left">
                                            Complete
                                        </button>
                                        <button (click)="CompleteAndLock(recon, CurrentComparison.contactId3)"
                                                class="btn btn-sm btn-info pull-right">
                                            Complete And Lock
                                        </button>
                                    </span>
                                    <br>
                                    <span *ngIf="recon.IsCompleted && recon.CompletedByID == CurrentComparison.contactId3">
                                        <button (click)="UnComplete(recon)"
                                                class="btn btn-sm btn-danger">
                                            Un-Complete
                                        </button>
                                    </span>
                                    <span class="row col-md-12" *ngFor="let l of reconcilingCodeArrayLength(recon.CodesReviewer3.length)">
                                        <span class="row m-0">
                                            <span [hidden]="!hidemeThree[l+(100*i)]">
                                                <span *ngFor="let item of getReconSplitArray(recon.CodesReviewer3[l-1].Fullpath)">
                                                    <button *ngIf="item != ''"
                                                            class="BackgroundButtonClear btn-sm border-dark bg-white rounded-0 mt-1 px-1 py-0"
                                                            style="text-decoration: none; border-width:1px;">
                                                        {{item}}
                                                    </button>
                                                    <i class="fa fa-arrow-right pt-1 mt-2"
                                                       aria-hidden="true">
                                                    </i>
                                                </span>
                                            </span>
                                            <br />
                                            <button *ngIf="recon.CodesReviewer3[l-1].ArmID == 0"
                                                    class="btn-sm border-dark bg-white rounded-0 mt-2 px-1  py-0"
                                                    style="text-decoration: none; border-width:1px; cursor:pointer"
                                                    (click)="hidemeThree[l+(100*i)] = !hidemeThree[l+(100*i)]">
                                                {{recon.CodesReviewer3[l-1].Name}}
                                            </button>
                                        </span>
                                        <span *ngIf="recon.CodesReviewer3[l-1].InfoBox != ''"
                                              [hidden]="!hidemeThree[l+(100*i)] "
                                              class="col-md-12 small mt-1 p-1 bg-white border border-dark ng-star-inserted">
                                            <b>[Info Box]</b>{{recon.CodesReviewer3[l-1].InfoBox}}
                                        </span>
                                    </span>
                                    <br />
                                    <span class="col-md-12" *ngIf="_ItemListService.ItemList.items[i] != undefined && _ItemListService.ItemList.items[i].arms != undefined && _ItemListService.ItemList.items[i].arms.length > 0  ">
                                        <span *ngFor="let c of _ItemListService.ItemList.items[i].arms">
                                            <b>{{c.title}}</b>
                                            <span *ngFor="let zz of reconcilingCodeArrayLength(recon.CodesReviewer3.length)">
                                                <span class="row col-md-12" *ngIf="recon.CodesReviewer3[zz-1].ArmID == c.itemArmId">
                                                    <span [hidden]="!hidemearms[zz+(100*i)]"
                                                          *ngFor="let Armitem of getReconSplitArray(recon.CodesReviewer3[zz-1].Fullpath)">
                                                        <button *ngIf="Armitem != ''"
                                                                class="BackgroundButtonClear btn-sm border-dark bg-white rounded-0 mt-1 px-1 py-0"
                                                                style="text-decoration: none; border-width:1px;">
                                                            {{Armitem}}
                                                        </button>
                                                        <i class="fa fa-arrow-right pt-3"
                                                           aria-hidden="true">
                                                        </i>
                                                        <br />
                                                    </span>
                                                    <button class="btn-sm border-dark bg-white rounded-0 mt-2 px-1  py-0"
                                                            style="text-decoration: none; border-width:1px; cursor:pointer"
                                                            (click)="hidemearms[zz+(100*i)] = !hidemearms[zz+(100*i)]">
                                                        {{recon.CodesReviewer3[zz-1].Name}}
                                                    </button>
                                                    <br />
                                                    <span [hidden]="!hidemearms[zz+(100*i)]"
                                                          *ngIf="recon.CodesReviewer3[zz-1].InfoBox != ''"
                                                          class="col-md-12 small mt-1 p-1 bg-white border border-dark ng-star-inserted">
                                                        <b>[Info box]</b>{{recon.CodesReviewer3[zz-1].InfoBox}}
                                                    </span>
                                                </span>
                                            </span>
                                            <br />
                                        </span>
                                    </span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
		</div>
		<paginatorComp></paginatorComp>
		<div *ngIf="panelItem" class="col-12 row p-0 m-0 border-top border-success">
			<div class="col-6 row p-0 mx-0 " style="max-height: 30vh; overflow-y: scroll;">
				<div class="row col-12 border-top ml-0 pl-0">
					<div class="row w-100 p-0 m-0 border-bottom">
						<div class="p-1 ml-1 mt-1 font-weight-bold">
							Title
						</div>
						<div class="col p-1 m-1 bg-white">
							{{panelItem.title}}
						</div>
					</div>
					<div class="row w-100 p-0 m-0 border-bottom">
						<div class="p-1 ml-1 mt-1 font-weight-bold">
							Author(s)
						</div>
						<div class="col p-1 m-1 bg-white">
							{{panelItem.authors}}
						</div>
					</div>
					<div class="row w-100 p-0 m-0 border-bottom ">
						<div class="col-4 row p-0 m-0">
							<div class="p-1 ml-1 mt-1 font-weight-bold">ID</div>
							<div class="col p-1 m-1 bg-white">{{panelItem.itemId}}</div>
						</div>
					</div>
					<div class="row w-100 p-0 m-0 border-bottom  ">
						<div class="w-50 row p-0 m-0">
							<div class="p-1 ml-1 mt-1 font-weight-bold">Year</div>
							<div class="col p-1 m-1 bg-white">
								{{panelItem.year}}
							</div>
						</div>
					</div>
					<div class="row w-100 p-0 m-0 border-bottom  ">
						<div class="w-50 row p-0 m-0">
							<div class="p-1 ml-1 mt-1 font-weight-bold">Short Title</div>
							<div class="col p-1 m-1 bg-white">
								{{panelItem.shortTitle}}
							</div>
						</div>
						<div class="w-50 row p-0 m-0">
							<div class="p-1 ml-1 mt-1 font-weight-bold">Pages</div>
							<div class="col p-1 m-1 bg-white">
								{{panelItem.pages}}
							</div>
						</div>
					</div>
				</div>
				<div *ngIf="panelItem" class="row col-12 card card-body bg-light p-2 m-2"
					 style="overflow-x:auto;">
					<ItemDocListComp class="" [itemID]="panelItem.itemId" [showUpload]="false">
					</ItemDocListComp>
				</div>
			</div>
			<div class="col-6 row p-0 m-0" style="max-height: 30vh; overflow-y: scroll;">
                <div class="font-weight-bold">Abstract:&nbsp;</div>
				<div class="row col-12 border-top m-0 p-0" style="overflow:auto;">
					{{panelItem.abstract}}
				</div>
			</div>
		</div>
	</div>
</div>
<statusbar class="mt-1" ></statusbar>
 