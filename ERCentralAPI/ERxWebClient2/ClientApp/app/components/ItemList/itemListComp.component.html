<div class="border-0">
    <div class="row ml-1">
        <paginatorComp class=""></paginatorComp>
        <div class="btn btn-link btn-sm p-0 ml-2" style="align-self: center;" (click)="ToggleOptionsPanel()">
            <span *ngIf="ShowOptions">Close</span>
            <span *ngIf="!ShowOptions">View</span>
            Options
        </div>

    </div>
    <div *ngIf="ShowOptions"
         class="alert alert-secondary row col-12">
        <div class="col-12 col-sm-6 font-weight-bold">List Options:</div>
        <div class="col-12 col-sm-6">
            Page size: <kendo-numerictextbox *ngIf="LocalPageSize >=1"
                                  [(ngModel)]="LocalPageSize"
                                  [min]="1" [format]="'n0'"
                                  [max]="4000"
                                  [autoCorrect]="true"
                                  class="border border-dark rounded"
                                  style="width: 110px;"></kendo-numerictextbox>
            <button *ngIf="this.ItemListService
                    && this.ItemListService.ItemList
                    && this.ItemListService.ItemList.pagesize
                    && this.ItemListService.ItemList.pagesize != LocalPageSize" class="btn btn-outline-danger btn-sm ml-1 mb-1"
                    (click)="ApplyNewPageSize()">
                Apply Change
            </button>
        </div>
        <div class="col-12 col-sm-6">
            <input class="m-1" type="checkbox" [(ngModel)]="ShowId" />
            Document ID
        </div>
        <div class="col-12 col-sm-6">
            <input class="m-1" type="checkbox" [(ngModel)]="ShowImportedId" />
            Your document ID
        </div>
        <div class="col-12 col-sm-6">
            <input class="m-1" type="checkbox" [(ngModel)]="ShowShortTitle" />
            Short title
        </div>
        <div class="col-12 col-sm-6">
            <input class="m-1" type="checkbox" [(ngModel)]="ShowAuthors" />
            Authors
        </div>
        <div class="col-12 col-sm-6">
            <input class="m-1" type="checkbox" [(ngModel)]="ShowTitle" />
            Title
        </div>
        <div class="col-12 col-sm-6">
            <input class="m-1" type="checkbox" [(ngModel)]="ShowYear" />
            Year
        </div>
        <div class="col-12 col-sm-6">
            <input class="m-1" type="checkbox" [(ngModel)]="ShowJournal" />
            Journal
        </div>
        <div class="col-12 col-sm-6">
            <input class="m-1" type="checkbox" [(ngModel)]="ShowDocType" />
            Document type
        </div>
        <div class="col-12 col-sm-6">
            <input class="m-1" type="checkbox" [(ngModel)]="ShowInfo" />
            Info
        </div>
        <div class="col-12 col-sm-6">
            <input class="m-1" type="checkbox" [(ngModel)]="ShowScore" />
            Score
        </div>

    </div>
    <div class="row">
        <div *ngIf="ItemListService.ListDescription != ''"
             class="small p-2 ml-3 mr-1 mb-1 row col-12 col-sm-10 card bg-white flex-row">
            <b>Showing&nbsp;</b>{{ItemListService.ListDescription}}
        </div>
        <div *ngIf="Context!='CodingOnly'" class="row small col-12 col-sm-2 align-self-start">
            <button title="List All Included Items" class="btn mt-1 btn-outline-primary btn-sm" (click)="IncludedItemList()">I</button>
            <button title="List All Excluded Items" class="btn mt-1 ml-1 btn-outline-secondary btn-sm" (click)="ExcludedItemList()">E</button>
            <button title="List All Explicitly Deleted Items" class="btn mt-1 ml-1 btn-outline-dark btn-sm" (click)="DeletedItemList()">D</button>
        </div>
    </div>
        <!--<kendo-grid *ngIf="ItemListService && ItemListService.ItemList && this.ItemListService.ItemList.items && this.ItemListService.ItemList.items.length > 0 && !this.ItemListService.IsBusy"
                    id="testKendoGrid" [data]="DataSource" [height]="610"
                    [sortable]="{
            allowUnsort: allowUnsort,
            mode: 'single'
            }"
                    [sort]="sort"
                    (sortChange)="sortChange($event)">

            <kendo-grid-column title="&nbsp;" width="44"
                               [style]="{'text-align': 'center', 'padding': '0px', 'min-width' :'44px', 'width' :'44px', 'max-width' :'44px'}"
                               [headerStyle]="{'text-align': 'center', 'padding': '0px', 'min-width' :'44px', 'width' :'44px', 'max-width' :'44px'}">
                <ng-template kendoGridCellTemplate let-dataItem>
                    <button class="btn btn-outline-primary btn-sm" (click)="OpenItem(dataItem.itemId)">GO</button>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column [sortable]="false" field="isSelected" width="33"
                               [headerStyle]="{'text-align': 'center'}"
                               [style]="{'text-align': 'center'}">
                <ng-template kendoGridHeaderTemplate let-dataItem>
                    <input style="zoom: 1.2;"
                           type="checkbox"
                           name="selectAll"
                           [(ngModel)]="allItemsSelected" />
                </ng-template>
                <ng-template kendoGridCellTemplate let-dataItem>
                    <input style="zoom: 1.2;" 
                           type="checkbox"
                           field="isSelected"
                           [(ngModel)]="dataItem.isSelected" />
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="itemStatus" title="&nbsp;" width="33">
            </kendo-grid-column>
            <kendo-grid-column field="itemId" title="ID" width="68" [hidden]="!ShowId">
            </kendo-grid-column>
            <kendo-grid-column field="oldItemId" title="Imported ID" width="68" [hidden]="!ShowImportedId">
            </kendo-grid-column>
            <kendo-grid-column field="shortTitle" title="Short Title" width="158" [hidden]="!ShowShortTitle">
            </kendo-grid-column>
            <kendo-grid-column field="authors" title="Authors" width="218" [hidden]="!ShowAuthors">
            </kendo-grid-column>
            <kendo-grid-column field="title" title="Title" width="388" [hidden]="!ShowTitle">
            </kendo-grid-column>
            <kendo-grid-column field="year" title="Year" width="66" [hidden]="!ShowYear">
            </kendo-grid-column>
            <kendo-grid-column field="parentTitle" title="Journal" width="78" [hidden]="!ShowJournal">
            </kendo-grid-column>
            <kendo-grid-column field="typeName" title="Doc Type" width="68" [hidden]="!ShowDocType">
            </kendo-grid-column>
            <kendo-grid-column field="attributeAdditionalText" title="Info" width="68" [hidden]="!ShowInfo">
            </kendo-grid-column>
            <kendo-grid-column field="rank" title="Score" width="68" [hidden]="!ShowScore">
            </kendo-grid-column>
        </kendo-grid>-->
        <div style="max-height:500px;overflow:auto;">
            <table class=" p-1 table table-striped"
                   *ngIf="ShowItemsTable && ItemListService && ItemListService.ItemList && this.ItemListService.ItemList.items && this.ItemListService.ItemList.items.length > 0 && !this.ItemListService.IsBusy">
                <thead>
                    <tr style="">
                        <th ></th>
                        <th class="pl-0 pr-0">
                            <input  class="m-1" style="zoom: 1.2;"
                                   type="checkbox"
                                   name="selectAll"
                                   [(ngModel)]="allItemsSelected" />
                        </th>
                        <th class="pl-0 pr-0"><div> </div></th>
                        <th class="pr-0" [hidden]="!ShowId" (click)="ChangeSort('itemId')" style="cursor:pointer;">ID<span [innerHTML]="sortSymbol('itemId')"></span></th>
                        <th class="pr-0" [hidden]="!ShowImportedId" (click)="ChangeSort('oldItemId')" style="cursor:pointer;">Your ID<span [innerHTML]="sortSymbol('oldItemId')"></span></th>
                        <th class="pr-0" [hidden]="!ShowShortTitle" (click)="ChangeSort('shortTitle')" style="cursor:pointer;">Short title<span [innerHTML]="sortSymbol('shortTitle')"></span></th>
                        <th class="pr-0" [hidden]="!ShowAuthors" (click)="ChangeSort('authors')" style="cursor:pointer;">Authors<span [innerHTML]="sortSymbol('authors')"></span></th>
                        <th class="pr-0" [hidden]="!ShowTitle" (click)="ChangeSort('title')" style="cursor:pointer;">Title<span [innerHTML]="sortSymbol('title')"></span></th>
                        <th class="pr-0" [hidden]="!ShowYear" (click)="ChangeSort('year')" style="cursor:pointer;">Year<span [innerHTML]="sortSymbol('year')"></span></th>
                        <th class="pr-0" [hidden]="!ShowJournal" (click)="ChangeSort('parentTitle')" style="cursor:pointer;">Journal<span [innerHTML]="sortSymbol('parentTitle')"></span></th>
                        <th class="pr-0" [hidden]="!ShowDocType" (click)="ChangeSort('typeName')" style="cursor:pointer;">Ref. Type<span [innerHTML]="sortSymbol('typeName')"></span></th>
                        <th class="pr-0" [hidden]="!ShowInfo" (click)="ChangeSort('attributeAdditionalText')" style="cursor:pointer;">Info<span [innerHTML]="sortSymbol('attributeAdditionalText')"></span></th>
                        <th class="pr-0" [hidden]="!ShowScore" (click)="ChangeSort('rank')" style="cursor:pointer;">Score<span [innerHTML]="sortSymbol('rank')"></span></th>
                        <th  class="pr-1"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let dataItem of this.ItemListService.ItemList.items">
                        <td class="p-1 pt-2">
                            <button class="btn btn-outline-primary btn-sm m-0" (click)="OpenItem(dataItem.itemId)">GO</button>
                        </td>
                        <td class="pl-0 pr-0 ">
                            <input type="checkbox" class="m-1" style="zoom: 1.2;"
                                   [(ngModel)]="dataItem.isSelected" />
                        </td>
                        <td class="pr-0 pl-0 bg-white">
                            <div class="mr-1 ml-1">{{dataItem.itemStatus}}</div>
                        </td>
                        <td class="pr-0 " [hidden]="!ShowId" title="Item ID">
                            {{dataItem.itemId}}
                        </td>
                        <td class="pr-0 " [hidden]="!ShowImportedId" title="Your ID (Imported)">
                            {{dataItem.oldItemId}}
                        </td>
                        <td class="pr-0 " [hidden]="!ShowShortTitle" title="Short Title">
                            {{dataItem.shortTitle}}
                        </td>
                        <td class="pr-0 " [hidden]="!ShowAuthors" title="Authors">
                            {{dataItem.authors}}
                        </td>
                        <td class="pr-0 " [hidden]="!ShowTitle" title="Title">
                            {{dataItem.title}}
                        </td>
                        <td class="pr-0 " [hidden]="!ShowYear" title="Year">
                            {{dataItem.year}}
                        </td>
                        <td class="pr-0 " [hidden]="!ShowJournal" title="Journal / Parent Title">
                            {{dataItem.parentTitle}}
                        </td>
                        <td class="pr-0 " [hidden]="!ShowDocType" title="Reference Type">
                            {{dataItem.typeName}}
                        </td>
                        <td class="pr-0 " [hidden]="!ShowInfo" title="InfoBox text (only when listing items with this code)">
                            {{dataItem.attributeAdditionalText}}
                        </td>
                        <td class="pr-0 " [hidden]="!ShowScore" title="Score (ML or text searches)">
                            {{dataItem.rank}}
                        </td>
                        <td class="pr-0"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div *ngIf="ItemListService && ItemListService.ItemList && ItemListService.IsBusy">Loading items...</div>
        <div *ngIf="ItemListService && ItemListService.ItemList && this.ItemListService.ItemList.items && this.ItemListService.ItemList.items.length == 0 && !ItemListService.IsBusy">No items to display</div>
        <paginatorComp class="row ml-1 pt-1 border-top porder-info"></paginatorComp>
    </div>