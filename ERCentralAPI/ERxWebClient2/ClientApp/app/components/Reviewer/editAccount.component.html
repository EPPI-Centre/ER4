<div *ngIf="!isExpanded" class="">
    <button (click)="Expand()" class="btn btn-outline-primary m-1">
        Edit Account
    </button>
</div>


<div *ngIf="isExpanded" class="container col-12 pr-0 pl-0 border border-dark rounded bg-light" style="overflow:auto;">
    <table>
        <tr>
            <td style="min-width: 150px; vertical-align: top; padding-top:3px" width="320">
                <div class="container">
                    <div class="mr-1"><b>Name</b></div>
                    <input class="mb-1 w-100" type="text"
                           id="ContactName" name="ContactName"
                           [(ngModel)]="CurrentAccount.contactName" />
                </div>
                <div class="container">
                    <div class="mr-1"><b>Email</b></div>
                    <input class="mb-1 w-100" type="text"
                           id="email" name="email"
                           [(ngModel)]="CurrentAccount.email" />
                </div>
                <div class="container">
                    <div class="mr-1"><b>Confirm email</b></div>
                    <input class="mb-1 w-100" type="text"
                           id="ConfirmEmail" name="ConfirmEmail"
                           [(ngModel)]="confirmEmail" />
                </div>
                <div [hidden]="CurrentAccount.email == confirmEmail"
                     class="alert alert-danger small">
                    Emails do not match
                </div>
                <div class="container">
                    <div class="mr-1"><b>Username</b></div>
                    <input class="mb-1 w-100" type="text"
                           id="username" name="Username"
                           [(ngModel)]="CurrentAccount.username" />
                </div>
                <div [hidden]="CurrentAccount.username.length >= 4"
                     class="alert alert-danger small">
                    Username too short
                </div>

            </td>
            <td style="vertical-align: top; padding-top: 3px">
                <div class="">
                    <button [disabled]="(CurrentAccount.email != confirmEmail) || (newPassword != confirmNewPassword) || (CurrentAccount.username.length < 4) || (!OldPasswordNeeded())"
                            (click)="SaveAccount()"
                            class="btn btn-primary m-1">
                        Save
                    </button>
                    <button (click)="CloseEditAccount()" class="btn btn-outline-info m-1">Cancel</button>
                </div>
                <b>Username</b> must be at least 4 characters long and unique.<br />
            </td>

        </tr>
    </table>
    <hr />
    <table>
        <tr>
            <td style="min-width: 150px; vertical-align: top; padding-bottom: 3px" width="320">
                <div class="container">
                    <div class="mr-1"><b>Existing password</b></div>
                    <input class="mb-1 w-100" type="text"
                           id="OldPassword" name="OldPassword"
                           [(ngModel)]="oldPassword" />
                </div>
                <div [hidden]="OldPasswordNeeded()"
                     class="alert alert-danger small">
                    Enter existing password
                </div>
                <div class="container">
                    <div class="mr-1"><b>New password</b></div>
                    <input class="mb-1 w-100" type="text"
                           id="NewPassword" name="NewPassword"
                           [(ngModel)]="newPassword" />
                </div>
                <div [hidden]="CheckPassword(newPassword)"
                     class="alert alert-danger small">
                    Password conditions not met
                </div>
                <div class="container">
                    <div class="mr-1"><b>Confirm new password</b></div>
                    <input class="mb-1 w-100" type="text"
                           id="ConfirmNewPassword" name="ConfirmNewPassword"
                           [(ngModel)]="confirmNewPassword" />
                </div>
                <div [hidden]="newPassword == confirmNewPassword"
                     class="alert alert-danger small">
                    Passwords do not match
                </div>
            </td>
            <td style="vertical-align: top; padding-bottom: 3px">
                To keep your existing password leave the password fields blank.<br /><br />
                <b>Passwords</b> must be at least 8 characters and contain and at least one lower case letter, one upper case letter, one digit and no spaces.<br />



            </td>
        </tr>

    </table>

</div>


