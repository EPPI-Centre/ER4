
<div class="pane-content">

    <div>Codesets in Review:</div>
    <div *ngIf="ReviewSets.length == 0">
        No Codesets in review.
    </div>
    <table *ngIf="ReviewSets.length > 0" class="table-striped table table-bordered small"
           [ngClass]="{disableThisAndChildren:!CanWrite}">
        <tbody>
            <tr>
                <th class="p-0" style="min-width:100px;">Name</th>
            </tr>
            <tr *ngFor="let rs of ReviewSets" class="p-0">
                <td class="p-1 align-middle">
                    <span class="btn btn-sm p-0 ml-2"
                          [ngClass]="{'font-weight-bold' : (CurrentReviewSet && CurrentReviewSet.set_id == rs.set_id),
                                                            'ScreeningSet' : rs.subTypeName == 'Screening',
                                                            'AdminSet' : rs.subTypeName == 'Administration'}"
                          (click)="SelectReviewSet(rs)">
                        <span>
                            <img *ngIf="rs.codingIsFinal" title="Normal Mode: single data entry for all users" src="../assets/person.png" class="mr-1" />
                            <img *ngIf="!rs.codingIsFinal" title="Comparison Mode: independent multi-user entry" src="../assets/team.png" class="mr-1" />
                            <img *ngIf="!rs.allowEditingCodeset" title="You can't edit this code set" src="../assets/CodeSetLocked.png" class="mr-1" />
                        </span>
                        {{rs.set_name}}
                    </span>
                    <i *ngIf="rs.order != ReviewSets.length -1" class="fa fa-caret-down btn btn-link p-0" (click)="MoveDownSet(rs)"></i>
                    <i *ngIf="rs.order != 0" class="fa fa-caret-up btn btn-link p-0" (click)="MoveUpSet(rs)"></i>
                </td>
            </tr>
        </tbody>
    </table>

        <tree-root class="bg-dark" *ngIf="ReviewSets" [nodes]="ReviewSets" [options]="options"
                   (activate)="NodeSelected($event.node.data)">
            <ng-template #treeNodeTemplate let-node let-index="index">
                <span *ngIf="node.data.nodeType == 'ReviewSet'">
                    <img *ngIf="node.data.codingIsFinal" title="Normal Mode: single data entry for all users" src="../assets/person.png" class="mr-1" />
                    <img *ngIf="!node.data.codingIsFinal" title="Comparison Mode: independent multi-user entry" src="../assets/team.png" class="mr-1" />
                    <img *ngIf="!node.data.allowEditingCodeset" title="You can't edit this code set" src="../assets/CodeSetLocked.png" class="mr-1" />
                </span>
                <span [ngClass]="{'font-weight-bold' : (selectedNode && selectedNode.id == node.data.id),
                            'ScreeningSet' : node.data.subTypeName == 'Screening',
                            'AdminSet' : node.data.subTypeName == 'Administration',
                            'ExcludeCode' : node.data.subTypeName == 'Exclude'
                            }">
                    {{node.data.name}}
                </span>
                <i *ngIf="CanMoveDown(node.data)" class="fa fa-caret-down btn btn-link p-0" (click)="MoveDownSet(node.data)"></i>
                <i *ngIf="CanMoveUp(node.data)" class="fa fa-caret-up btn btn-link p-0" (click)="MoveUpSet(node.data)"></i>
            </ng-template>
        </tree-root>
</div>
