{"version":3,"sources":["kendo.editor.js"],"names":["f","define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","undefined","Tool","bomFill","emptyElementContent","emptyTableCellContent","window","Class","Widget","ui","os","support","mobileOS","browser","proxy","keys","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","PLACEHOLDER_TAG_ID","REFRESH_INTERVAL","DEFAULT_LANGUAGE","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","tableWizardButtonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","toolCssClassNames","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableWizard","tableWizardInsert","cleanFormatting","copyFormat","applyFormat","cssClass","registerTool","toolName","tool","toolOptions","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","replace","retrieveComments","messages","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","cellMargin","alignment","background","id","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","supportedBrowser","ios","flatVersion","document","documentElement","contentEditable","toolGroups","basic","lists","indenting","formatPainter","links","tables","element","value","toolbarContainer","toolbarOptions","type","domElement","that","editorNS","editor","dom","Dom","tools","_registerHandler","closest","update","_wrapTextarea","wrapper","find","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","defaultValue","trim","getAllComments","html","innerHTML","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","resize","notify","setOptions","_initializePlaceholder","_togglePlaceholder","show","body","$body","placeholder","toggleClass","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","draggableElement","resizableWidget","resizable","isResizable","isPlainObject","insertAfter","kendoResizable","start","currentTarget","initialSize","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","getKendoResizable","draggable","ignore","_initializeTableResizing","TableResizing","create","_showTableResizeHandlesProxy","_showTableResizeHandles","bind","_destroyTableResizing","tableResizing","destroy","unbind","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","h","editorWrap","editArea","appendTo","css","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","lang","hide","title","frameBorder","tabIndex","location","hostname","contentWindow","contentDocument","one","decorateFrom","getElementsByTagName","getAttribute","open","write","isRtl","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","eventNames","t","NS","_handlers","hasOwnProperty","applyEventMap","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","interval","createElement","setAttribute","appendChild","setInterval","clearInterval","_mousedown","execCommand","touch","keydown","_activeElement","focus","mouseover dragenter","htmlHeight","parentElement","target","nodeName","_cachedHeight","mouseout dragleave drop contextmenu","restoreHeight","range","left","container","offset","direction","next","nextChar","keyCode","BACKSPACE","DELETE","F10","preventPopupHide","preventDefault","LEFT","RIGHT","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","createRange","selectNode","cut copy paste drop dragover","focusin","hasAttribute","focusout","toolbarContainerElement","active","get","contains","is","focused","removeClass","$head","head","immutables","Immutables","parents","stopPropagation","gecko","which","tagName","o","cmd","toolsFromShortcut","changesContent","refresh","_destroyResizings","deserialization","custom","serialization","entities","semantic","scripts","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","_destroyUploadWidget","dispose","msie","tempInput","blur","_uploadWidget","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","currentHtml","Serializer","domToXhtml","htmlToDom","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","scrollHeight","clientHeight","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","_containsRange","isAncestorOrSelf","_deleteSavedRange","_range","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","toolById","async","change","managesUndoRedo","key","ctrl","plugin","initialize","unselectable","aria-label","commandArguments","noop","version","edge","_bomFill","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","makeMap","items","len","obj","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","empty","nonListBlockElements","blockElements","block","selfClosing","inlineElements","inline","fillAttrs","normalize","node","parent","firstChild","prev","nextSibling","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","parentNode","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","nodes","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","isPrevBlock","isNextBlock","el","isBlock","isSelfClosing","isEmpty","isInline","isBr","list","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","wrap","unwrap","createEmptyNode","removeAttribute","mergeAttributes","origin","each","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","editableParents","editableAncestor","apply","closestEditable","types","editable","closestEditableOfType","filter","invert","filterFn","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","removeAttr","rowIndex","cells","colIndex","cellIndex","cell","registeredColumns","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","theadRows","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","row","col","colspan","rowspan","k","l","timestamp","Date","getTime","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","currentIndex","numberOfCols","_getNumberOfHeaderColumns","numberOfHeaderRows","thead","number","self","supportsLeadingWhitespace","isFunction","TD","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","toEditableHtml","_toEditableImmutables","immutable","last","prependTo","_fillEmptyElements","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","attributesToRemove","legacyIE","originalSrc","originalHref","deserialize","semanticFilter","mapStart","tag","cssProperties","property","properties","lastIndex","styleAttr","specifiedAttributes","$node","htmlEncode","children","skip","skipEncoding","childNode","isEmptyBomNode","mapper","previous","jqNode","serialize","hasClass","tagMap","end","textOnly","childrenCount","textChild","runCustom","k:script","font","size","semanticAttributes","textDecoration","fontFamily","strong","em","b","u","styleObj","item","splice","face","script","DropDownList","SelectBox","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","select","selectBox","view","dataSource","decorate","compareBoundaries","startAncestor","endAncestor","fixIvalidRange","isInvalidRange","ex","updateRangeProperties","textRangeContainer","textRange","duplicate","right","adoptContainer","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","createTextRange","moveToElementText","setEndPoint","adoptEndPoint","comparison","appended","compareEndPoints","RangeIterator","W3CSelection","RangeEnumerator","ImmutablesRangeIterator","ImmutablesRangeEnumerator","Marker","boundary","selectionFromWindow","selectionFromRange","rangeDocument","documentFromRange","W3CRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","fromNode","_current","_next","_end","hasNext","current","traverse","callback","nodeIndex","inStartContainer","inEndContainer","getSubRange","subRange","movedStart","movedEnd","enumerate","visit","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","rangeBoundary","isExpandable","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","isBomSelected","collapsedToStart","startParent","endParent","startIndex","endIndex","charAt","editableTextNodes","immutableParent","image","stringify","partition","contents","partitionRange","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","isEnd","startEditable","endEditable","beforeCaret","afterCaret","search","substring","complexBlocks","toolsToBeUpdated","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","IMMUTABLE_SELECTOR","expandImmutablesIn","startImmutableParent","endImmutableParent","immutablesContext","editableNodes","randomId","chars","round","random","serialized","replaceWith","deletingKey","updateToolOptions","_initOptions","_toHtml","serializationType","isDeleting","shouldCancelEvent","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","cancelDeleting","closestSelectionLi","closestImmutableLi","backspace","del","nextImmutable","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","finishUpdate","endRestorePoint","GenericCommand","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","toolNamesByCssClass","k-i-sup-script","k-i-sub-script","k-i-align-left","k-i-align-center","k-i-align-right","k-i-align-justify","k-i-list-unordered","k-i-list-ordered","k-i-login","k-i-indent-increase","k-i-indent-decrease","k-i-link-horizontal","k-i-unlink-horizontal","k-i-image","k-i-file-add","k-i-html","k-i-foreground-color","k-i-paint","k-i-table-insert","k-i-table-column-insert-left","k-i-table-column-insert-right","k-i-table-row-insert-above","k-i-table-row-insert-below","k-i-table-row-delete","k-i-table-column-delete","k-i-table-properties","k-i-table-wizard","k-i-clear-css","k-i-cells-merge-horizontally","k-i-cells-merge-vertically","k-i-cell-split-horizontally","k-i-cell-split-vertically","k-i-copy-format","k-i-apply-format","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","tablesInsert","tablesAddDelete","tablesMerge","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","anchor","copyAnchorStyles","activate","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","inheritText","_toolName","description","tooltip","_appendShortcutSequence","editorElement","editorOffset","editorOptions","_getWindowWidth","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","shift","alt","_nativeTools","currentTool","nativeTools","endGroup","group","groupPosition","startGroup","toolElement","groupName","newGroupName","toolConfig","not","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","dropdown","colorpicker","editorTools","move","constrain","focusableItems","focusElement","currentContainer","ESC","ENTER","SPACEBAR","_executeToolCommand","button","toolname","toCamelCase","lastIndexOf","_immutablesContext","_updateImmutablesState","display","uiData","widget","groupUi","uiElement","trackImmutables","_resize","containerWidth","toolbarWindow","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","eq","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","sort","a","detach","groupWidth","ViewHtmlCommand","dialog","center","FormatCommand","FormatTool","MOUSEDOWN_NS","KEYDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","initOptions","dataTextField","dataValueField","highlightFirst","newRange","ColorTool","palette","_widget","ColorPicker","toolIcon","storedRange","_inputFocused","picker","sender","_popup","_value","toCssRgba","fontWeight","fontStyle","lastIndexOfRegExp","str","indexOfRegExp","r","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","img","_initialText","_close","_apply","_keydown","linkUrl","_dialog","textInput","AutoLinkCommand","linkMarker","linkRange","detectedLink","detectLink","_ensureWebProtocol","traverser","detection","startNode","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","puntuationOptions","puntuationTraverser","_detectEnd","blank","clone","_detectStart","_isLinkDetected","extendOptions","RightDomTextTraverser","_skipStartPuntuation","ii","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","listElements","BlockFormatFinder","candidate","suitable","_resolveListsItems","ImmutablesNS","BlockFormatter","ancestor","images","imageFormat","imageAttributes","nonImages","_handleImmutables","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","immutalbeParent","blockFormatter","formatTag","ListFormatter","BlockFormatTool","textAlign","float","marginLeft","marginRight","listStylePosition","ListFormatFinder","unwrapTag","isList","li","isImmutable","containsAny","_parentLists","merge","breakable","applyOnSection","section","pushAncestor","addLastSection","lastSection","sections","lastNodes","ul","fragment","ListCommand","ListTool","unwrapListItem","listFormatter","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","clean","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","showBrowser","applied","keyDown","dialogHeight","isIE","ImageBrowser","transport","read","_imageBrowser","ev","selected","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","proxyUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","genericCommand","postProcess","InsertHtmlTool","_selectBox","selectbox","initialValue","defaultExportAsItems","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","form","method","valueInput","exportTypeInput","fileNameInput","ExportAsTool","changeHandler","unshift","_exec","indentDirection","IndentFormatter","targets","parentList","siblingList","nestedList","targetIndex","mapImmutables","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","parentChildrenLength","emptyParagraphContent","_insertParagraphAfter","NewLineCommand","filler","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","Array","insertedTable","PopupTool","twTool","_open","_activate","_toggle","TableWizardTool","TableWizardCommand","insertNewTable","InsertTableTool","cols","tableFromLocation","floor","clientY","cellHeight","clientX","scrollLeft","cellWidth","firstCell","lastCell","getOffset","offsetWidth","autoApplyNS","_setTableSize","_valid","status","selectedRows","selectedColumns","changed","tableSize","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetTableResizing","_findNextTdInRow","td","lastTd","prop","_adjustColgroups","colgroup","colElements","colgroupElements","numberOfCells","_associateHeaderIds","InsertRowCommand","cellCount","newRow","rowSpanIndex","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","rowParent","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","after","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardRange","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","containers","ondragover","ondrop","dataTransfer","borderWidth","overflow","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translateX","translateY","translate","-webkit-transform","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","splittable","fragmentsHtml","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","applicable","elm","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","extractListLevels","msoListRegExp","level","_createList","styleType","listStyleType","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","listIndex","levelType","blockChildren","lastMargin","levels","acceptedNameTags","isParentTable","removeAttributes","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","tbody","cleaner","tdCleaner","cellText","getSibling","PREVIOUS_SIBLING","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","removeTableContent","backspaceHandler","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_addCaret","chrome","_restoreCaret","_handleDelete","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","isEndOfLink","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","mac","toUpperCase","metaKey","matchesKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","inlineStyles","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styleValue","styleKey","attributeKey","styles","nodeStyles","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","isEmptyInline","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","lowerBound","upperBound","getScrollBarWidth","calculatePercentageRatio","total","inPercentages","STRING","REGEX_NUMBER_IN_PERCENTAGES","inPixels","REGEX_NUMBER_IN_PIXELS","toPercentages","PERCENTAGE","toPixels","PIXEL","global","math","ResizingUtils","KEY_DOWN","MOUSE_DOWN","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_MOVE","MOUSE_UP","COMMA","DOT","LAST_CHILD","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","WIDTH","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","RESIZE_HANDLE_MARKER_WRAPPER_CLASS","HEIGHT","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","HandlePositioningStrategy","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","HandleDraggingStrategy","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","TableResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","scrollOffsetPosition","applyScrollOffset","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","isUndefined","RESIZE_HANDLE_WRAPPER_CLASS","TABLE_CLASS","TABLE_RESIZING_CLASS","COLUMN","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_getMaxDimensionValue","_initialElementWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","_hasRowsInPixels","_initialElementHeight","dimension","dimensionLowercase","parentDimension","parentScrollOffset","isWidthInPercentages","parentColumn","columnsLength","_initResizeHandles","_showResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_onResizeHandleDrag","_onResizeHandleDragEnd","_onResizeHandleMouseOver","_onResizeHandleMouseOut","TableResizingFactory","factory","eventTarget","eventCurrentTarget","isResizeHandleOrChild","cellsFormatFinder","reUnit","COL_INDEX","HEADERS","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellsLength","newRowsCount","cellProp","tableProp","tableProperties","collection","_deleteTableRows","insertRow","_insertCells","deleteCell","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","associatedCells","headingIds","checkHeader","header","headersArray","headersAttr","some","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","cellPropToAll","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","tds","swapCell","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","align","tStyle","captionClone","tableAlignment","numberOfColumns","numberOfHeaderColumns","tableJson","_getAlignment","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","vAlign","hAlign","TableWizardEditTool","numericTextBoxSettings","borderStyles","DEFAULT_NUMBER_OF_COLS_AND_ROWS","tableAlignmentDropDownSettings","valueTemplate","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","okHandler","collectDialogValues","tableData","closeHandler","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","onColumnsNumberChange","onRowsNumberChange","headerColumnsNumeric","currentNumberOfColumnsHeaders","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","_initNumericTextbox","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initAssociationDropDown","valuePrimitive","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","_initAlignmentDropDown","kendoColorPicker","clearButton","_destroyComponents"],"mappings":"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K,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK;AACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,UACLC,IAAK,OACLC,IAAK,MACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,UACLC,IAAK,KACLC,IAAK,MACLC,IAAK,QACLC,IAAK,MACLC,IAAK,UACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,QACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,UACLC,IAAK,OACLC,IAAK,MACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,UACLC,IAAK,KACLC,IAAK,MACLC,IAAK,SACLC,IAAK,QACLC,IAAK,MACLC,IAAK,UACLC,IAAK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","file":"kendo.editor.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/undoredostack', ['kendo.core'], f);\n}(function () {\n    (function (kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function (options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [\n                'undo',\n                'redo'\n            ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger('undo', { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger('redo', { command: command });\n                }\n            },\n            clear: function () {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\n    }(kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/main', [\n        'util/undoredostack',\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.window',\n        'kendo.colorpicker'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, os = kendo.support.mobileOS, browser = kendo.support.browser, extend = $.extend, proxy = $.proxy, deepExtend = kendo.deepExtend, keys = kendo.keys;\n        var SELECT = 'select';\n        var SELECT_OVERLAY_SELECTOR = 'select.k-select-overlay';\n        var PLACEHOLDER_CLASS = 'k-placeholder';\n        var PLACEHOLDER_TAG_ID = 'placeholder';\n        var REFRESH_INTERVAL = 200;\n        var DEFAULT_LANGUAGE = 'en';\n        var ToolTemplate = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            getHtml: function () {\n                var options = this.options;\n                return kendo.template(options.template, { useWithBlock: false })(options);\n            }\n        });\n        var EditorUtils = {\n            editorWrapperTemplate: '<table cellspacing=\"0\" cellpadding=\"0\" class=\"k-widget k-editor\" role=\"presentation\">' + '<tbody>' + '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\"></ul></td></tr>' + '<tr><td class=\"k-editable-area\"></td></tr>' + '</tbody>' + '</table>',\n            buttonTemplate: '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' + '<button tabindex=\"0\" role=\"button\" class=\"k-button k-tool\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' + '<span class=\"#= iconCssClass #\"></span>' + '<span class=\"k-tool-text k-button-text\">#= data.title #</span>' + '</button>',\n            tableWizardButtonTemplate: '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' + '<button tabindex=\"0\" role=\"button\" class=\"k-tool k-button\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' + '<span class=\"#= iconCssClass #\"></span>' + '<span class=\"k-tool-text\">#= data.title #</span>' + '</button>',\n            colorPickerTemplate: '<input class=\"k-colorpicker k-icon k-i-#= data.cssClass.replace(\"k-\", \"\") #\" />',\n            comboBoxTemplate: '<select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\"></select>',\n            dropDownListTemplate: '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\"></select></span>',\n            separatorTemplate: '<span class=\"k-separator\"></span>',\n            overflowAnchorTemplate: '<button tabindex=\"0\" role=\"button\" class=\"k-button k-tool k-overflow-anchor\" data-popup' + ' title=\"#= data.title #\" aria-label=\"#= data.title #\" aria-haspopup=\"true\" aria-expanded=\"false\">' + '<span class=\"k-icon k-i-more-vertical\"></span>' + '</button>',\n            formatByName: function (name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n            getToolCssClass: function (name) {\n                var toolCssClassNames = {\n                    superscript: 'sup-script',\n                    subscript: 'sub-script',\n                    justifyLeft: 'align-left',\n                    justifyCenter: 'align-center',\n                    justifyRight: 'align-right',\n                    justifyFull: 'align-justify',\n                    insertUnorderedList: 'list-unordered',\n                    insertOrderedList: 'list-ordered',\n                    'import': 'login',\n                    indent: 'indent-increase',\n                    outdent: 'indent-decrease',\n                    createLink: 'link-horizontal',\n                    unlink: 'unlink-horizontal',\n                    insertImage: 'image',\n                    insertFile: 'file-add',\n                    viewHtml: 'html',\n                    foreColor: 'foreground-color',\n                    backColor: 'paint',\n                    createTable: 'table-insert',\n                    addColumnLeft: 'table-column-insert-left',\n                    addColumnRight: 'table-column-insert-right',\n                    addRowAbove: 'table-row-insert-above',\n                    addRowBelow: 'table-row-insert-below',\n                    deleteRow: 'table-row-delete',\n                    deleteColumn: 'table-column-delete',\n                    mergeCellsHorizontally: 'cells-merge-horizontally',\n                    mergeCellsVertically: 'cells-merge-vertically',\n                    splitCellHorizontally: 'cell-split-horizontally',\n                    splitCellVertically: 'cell-split-vertically',\n                    tableWizard: 'table-properties',\n                    tableWizardInsert: 'table-wizard',\n                    cleanFormatting: 'clear-css',\n                    copyFormat: 'copy-format',\n                    applyFormat: 'apply-format'\n                };\n                var cssClass = toolCssClassNames[name];\n                if (cssClass) {\n                    return cssClass;\n                }\n                return name;\n            },\n            registerTool: function (toolName, tool) {\n                var toolOptions = tool.options;\n                if (toolOptions && toolOptions.template) {\n                    toolOptions.template.options.cssClass = 'k-' + EditorUtils.getToolCssClass(toolName);\n                }\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n                Editor.defaultTools[toolName] = tool;\n            },\n            registerFormat: function (formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            },\n            cacheComments: function (content, comments) {\n                for (var index in comments) {\n                    content = content.replace(comments[index], '{' + index + '}');\n                }\n                return content;\n            },\n            retrieveComments: function (content, comments) {\n                for (var index in comments) {\n                    content = content.replace('{' + index + '}', comments[index]);\n                }\n                return content;\n            }\n        };\n        var messages = {\n            bold: 'Bold',\n            italic: 'Italic',\n            underline: 'Underline',\n            strikethrough: 'Strikethrough',\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n            justifyCenter: 'Center text',\n            justifyLeft: 'Align text left',\n            justifyRight: 'Align text right',\n            justifyFull: 'Justify',\n            insertUnorderedList: 'Insert unordered list',\n            insertOrderedList: 'Insert ordered list',\n            indent: 'Indent',\n            outdent: 'Outdent',\n            createLink: 'Insert hyperlink',\n            unlink: 'Remove hyperlink',\n            insertImage: 'Insert image',\n            insertFile: 'Insert file',\n            insertHtml: 'Insert HTML',\n            viewHtml: 'View HTML',\n            fontName: 'Select font family',\n            fontNameInherit: '(inherited font)',\n            fontSize: 'Select font size',\n            fontSizeInherit: '(inherited size)',\n            formatBlock: 'Format',\n            formatting: 'Format',\n            foreColor: 'Color',\n            backColor: 'Background color',\n            style: 'Styles',\n            emptyFolder: 'Empty Folder',\n            editAreaTitle: 'Editable area. Press F10 for toolbar.',\n            uploadFile: 'Upload',\n            overflowAnchor: 'More tools',\n            orderBy: 'Arrange by:',\n            orderBySize: 'Size',\n            orderByName: 'Name',\n            invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: 'A directory with this name was not found.',\n            imageWebAddress: 'Web address',\n            imageAltText: 'Alternate text',\n            imageWidth: 'Width (px)',\n            imageHeight: 'Height (px)',\n            fileWebAddress: 'Web address',\n            fileTitle: 'Title',\n            fileText: 'Text',\n            linkWebAddress: 'Web address',\n            linkText: 'Text',\n            linkToolTip: 'ToolTip',\n            linkOpenInNewWindow: 'Open link in new window',\n            dialogUpdate: 'Update',\n            dialogInsert: 'Insert',\n            dialogOk: 'Ok',\n            dialogCancel: 'Cancel',\n            cleanFormatting: 'Clean formatting',\n            createTable: 'Create a table',\n            createTableHint: 'Create a {0} x {1} table',\n            addColumnLeft: 'Add column on the left',\n            addColumnRight: 'Add column on the right',\n            addRowAbove: 'Add row above',\n            addRowBelow: 'Add row below',\n            deleteRow: 'Delete row',\n            deleteColumn: 'Delete column',\n            mergeCellsHorizontally: 'Merge cells horizontally',\n            mergeCellsVertically: 'Merge cells vertically',\n            splitCellHorizontally: 'Split cells horizontally',\n            splitCellVertically: 'Split cells vertically',\n            tableWizard: 'Table Wizard',\n            tableTab: 'Table',\n            cellTab: 'Cell',\n            accessibilityTab: 'Accessibility',\n            caption: 'Caption',\n            summary: 'Summary',\n            width: 'Width',\n            height: 'Height',\n            units: 'Units',\n            cellSpacing: 'Cell Spacing',\n            cellPadding: 'Cell Padding',\n            cellMargin: 'Cell Margin',\n            alignment: 'Alignment',\n            background: 'Background',\n            cssClass: 'CSS Class',\n            id: 'ID',\n            border: 'Border',\n            borderStyle: 'Border Style',\n            collapseBorders: 'Collapse borders',\n            wrapText: 'Wrap text',\n            associateCellsWithHeaders: 'Associate headers',\n            alignLeft: 'Align Left',\n            alignCenter: 'Align Center',\n            alignRight: 'Align Right',\n            alignLeftTop: 'Align Left Top',\n            alignCenterTop: 'Align Center Top',\n            alignRightTop: 'Align Right Top',\n            alignLeftMiddle: 'Align Left Middle',\n            alignCenterMiddle: 'Align Center Middle',\n            alignRightMiddle: 'Align Right Middle',\n            alignLeftBottom: 'Align Left Bottom',\n            alignCenterBottom: 'Align Center Bottom',\n            alignRightBottom: 'Align Right Bottom',\n            alignRemove: 'Remove Alignment',\n            columns: 'Columns',\n            rows: 'Rows',\n            selectAllCells: 'Select All Cells',\n            exportAs: 'Export As',\n            'import': 'Import',\n            print: 'Print',\n            headerRows: 'Header Rows',\n            headerColumns: 'Header Cols',\n            tableSummaryPlaceholder: 'Summary attribute is not HTML5 compatible.',\n            associateNone: 'None',\n            associateScope: 'Associate using \\'scope\\' attribute',\n            associateIds: 'Associate using Ids',\n            copyFormat: 'Copy format',\n            applyFormat: 'Apply format'\n        };\n        var supportedBrowser = !os || os.ios && os.flatVersion >= 500 || !os.ios && typeof document.documentElement.contentEditable != 'undefined';\n        var toolGroups = {\n            basic: [\n                'bold',\n                'italic',\n                'underline'\n            ],\n            alignment: [\n                'justifyLeft',\n                'justifyCenter',\n                'justifyRight'\n            ],\n            lists: [\n                'insertUnorderedList',\n                'insertOrderedList'\n            ],\n            indenting: [\n                'indent',\n                'outdent'\n            ],\n            formatPainter: [\n                'copyFormat',\n                'applyFormat'\n            ],\n            links: [\n                'createLink',\n                'unlink'\n            ],\n            tables: [\n                'tableWizard',\n                'createTable',\n                'addColumnLeft',\n                'addColumnRight',\n                'addRowAbove',\n                'addRowBelow',\n                'deleteRow',\n                'deleteColumn',\n                'mergeCellsHorizontally',\n                'mergeCellsVertically',\n                'splitCellHorizontally',\n                'splitCellVertically'\n            ]\n        };\n        var Editor = Widget.extend({\n            init: function (element, options) {\n                var that = this, value, editorNS = kendo.ui.editor, toolbarContainer, toolbarOptions, type, comments;\n                var domElement;\n                var dom = editorNS.Dom;\n                if (!supportedBrowser) {\n                    return;\n                }\n                Widget.fn.init.call(that, element, options);\n                that.options = deepExtend({}, that.options, options);\n                that.options.tools = that.options.tools.slice();\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n                this._registerHandler(element.closest('form'), 'submit', proxy(that.update, that, undefined));\n                toolbarOptions = extend({}, that.options);\n                toolbarOptions.editor = that;\n                if (type == 'textarea') {\n                    that._wrapTextarea();\n                    toolbarContainer = that.wrapper.find('.k-editor-toolbar');\n                    if (domElement.id) {\n                        toolbarContainer.attr('aria-controls', domElement.id);\n                    }\n                } else {\n                    that.element.attr('contenteditable', true).addClass('k-widget k-editor k-editor-inline');\n                    toolbarOptions.popup = true;\n                    toolbarContainer = $('<ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n                }\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n                that.toolbar.bindTo(that);\n                if (type == 'textarea') {\n                    setTimeout(function () {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf('px') > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n                that._resizable();\n                that._initializeContentElement(that);\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    value = domElement.value;\n                    if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                        value = domElement.defaultValue;\n                    }\n                    comments = dom.getAllComments($('<div></div>').html(value)[0]);\n                    value = EditorUtils.cacheComments(value, comments);\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/gi, ' ');\n                    value = EditorUtils.retrieveComments(value, comments);\n                } else {\n                    value = domElement.innerHTML;\n                }\n                that.value(value || '\\uFEFF');\n                this._registerHandler(document, {\n                    'mousedown': function () {\n                        that._endTyping();\n                    },\n                    'mouseup': function (e) {\n                        that._mouseup(e);\n                    }\n                });\n                that._initializeImmutables();\n                that.toolbar.resize();\n                kendo.notify(that);\n            },\n            setOptions: function (options) {\n                var editor = this;\n                Widget.fn.setOptions.call(editor, options);\n                if (options.tools) {\n                    editor.toolbar.bindTo(editor);\n                }\n                this._initializePlaceholder();\n            },\n            _togglePlaceholder: function (show) {\n                var that = this, body = that.body, $body = $(body), placeholder = that.options.placeholder;\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n                $body.attr('aria-label', function () {\n                    return show ? placeholder : '';\n                });\n                $body.toggleClass(PLACEHOLDER_CLASS, show);\n            },\n            _endTyping: function () {\n                var keyboard = this.keyboard;\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) {\n                }\n            },\n            _selectionChange: function () {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger('select', {});\n            },\n            _resizable: function () {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? resizable.content === undefined || resizable.content === true : resizable;\n                if (isResizable && this.textarea) {\n                    var draggableElement = $('<div class=\\'k-resize-handle\\'><span class=\\'k-icon k-i-arrow-45-down-right\\'></span></div>').insertAfter(this.textarea);\n                    this.wrapper.addClass('k-resizable');\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        draggableElement: draggableElement,\n                        start: function (e) {\n                            var editor = this.editor = $(e.currentTarget).closest('.k-editor');\n                            this.initialSize = editor.height();\n                            editor.find('td:last').append('<div class=\\'k-overlay\\' />');\n                        },\n                        resize: function (e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n                            newSize = Math.min(max, Math.max(min, newSize));\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function () {\n                            this.editor.find('.k-overlay').remove();\n                            this.editor = null;\n                        }\n                    }));\n                    if (kendo.support.mobileOS.ios) {\n                        var resizableWidget = this.wrapper.getKendoResizable();\n                        resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                    }\n                }\n            },\n            _initializeTableResizing: function () {\n                var editor = this;\n                kendo.ui.editor.TableResizing.create(editor);\n                editor._showTableResizeHandlesProxy = proxy(editor._showTableResizeHandles, editor);\n                editor.bind(SELECT, editor._showTableResizeHandlesProxy);\n            },\n            _destroyTableResizing: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.destroy();\n                    editor.tableResizing = null;\n                }\n                if (editor._showTableResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showTableResizeHandlesProxy);\n                }\n            },\n            _showTableResizeHandles: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.showResizeHandles();\n                }\n            },\n            _initializeColumnResizing: function () {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n            _destroyColumnResizing: function () {\n                var editor = this;\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n            _initializeRowResizing: function () {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n            _destroyRowResizing: function () {\n                var editor = this;\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n            _wrapTextarea: function () {\n                var that = this, textarea = that.element, w = textarea[0].style.width, h = textarea[0].style.height, template = EditorUtils.editorWrapperTemplate, editorWrap = $(template).insertBefore(textarea).width(w).height(h), editArea = editorWrap.find('.k-editable-area');\n                textarea.attr('autocomplete', 'off').appendTo(editArea).addClass('k-content k-raw-content').css('display', 'none');\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n            _createContentElement: function (stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = '';\n                var src = 'javascript:\"\"';\n                var lang = '';\n                textarea.hide();\n                iframe = $('<iframe />', {\n                    title: editor.options.messages.editAreaTitle,\n                    frameBorder: '0'\n                })[0];\n                $(iframe).css('display', '').addClass('k-content').attr('tabindex', textarea[0].tabIndex).insertBefore(textarea);\n                if (specifiedDomain || domain != location.hostname) {\n                    domainScript = '<script>document.domain=\"' + domain + '\"</script>';\n                    src = 'javascript:document.write(\\'' + domainScript + '\\')';\n                    iframe.src = src;\n                }\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n                $(iframe).one('load', function () {\n                    editor.toolbar.decorateFrom(doc.body);\n                });\n                lang = document.getElementsByTagName('html')[0].getAttribute('lang') || DEFAULT_LANGUAGE;\n                doc.open();\n                doc.write('<!DOCTYPE html><html lang=\\'' + lang + '\\'><head>' + '<meta charset=\\'utf-8\\' />' + '<title>Kendo UI Editor content</title>' + '<style>' + 'html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}' + 'body{padding:0;margin:0;}' + 'body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;' + 'word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;' + (kendo.support.isRtl(textarea) ? 'direction:rtl;' : '') + (os.ios ? 'word-break:keep-all;' : '') + '}' + 'h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}' + 'p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}' + 'ul,ol{padding-left:2.5em}' + 'span{-ms-high-contrast-adjust:none;}' + 'a{color:#00a}' + 'code{font-size:1.23em}' + 'telerik\\\\3Ascript{display: none;}' + '.k-table{width:100%;border-spacing:0;margin: 0 0 1em;}' + '.k-table td{min-width:1px;padding:.2em .3em;}' + '.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}' + '.k-table th{outline:0;border: 1px dotted #999;}' + '.k-table p{margin:0;padding:0;}' + '.k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}' + '.k-column-resize-handle {width: 100%; height: 100%;}' + '.k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}' + '.k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}' + '.k-row-resize-handle {display: table; width: 100%; height: 100%;}' + '.k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}' + '.k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}' + '.k-table-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}' + '.k-table-resize-handle {width: 100%; height: 100%;}' + '.k-table-resize-handle.k-resize-east{cursor:e-resize;}' + '.k-table-resize-handle.k-resize-north{cursor:n-resize;}' + '.k-table-resize-handle.k-resize-northeast{cursor:ne-resize;}' + '.k-table-resize-handle.k-resize-northwest{cursor:nw-resize;}' + '.k-table-resize-handle.k-resize-south{cursor:s-resize;}' + '.k-table-resize-handle.k-resize-southeast{cursor:se-resize;}' + '.k-table-resize-handle.k-resize-southwest{cursor:sw-resize;}' + '.k-table-resize-handle.k-resize-west{cursor:w-resize;}' + '.k-table.k-table-resizing{opacity:0.6;}' + '.k-placeholder{color:grey}' + 'k\\\\:script{display:none;}' + '</style>' + domainScript + $.map(stylesheets, function (href) {\n                    return '<link rel=\\'stylesheet\\' href=\\'' + href + '\\'>';\n                }).join('') + '</head><body autocorrect=\\'off\\' contenteditable=\\'true\\'></body></html>');\n                doc.close();\n                return wnd;\n            },\n            _blur: function () {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n                this.update();\n                if (textarea) {\n                    textarea.trigger('blur');\n                }\n                if (value != old) {\n                    this.trigger('change');\n                    if (textarea) {\n                        textarea.trigger('change');\n                    }\n                }\n            },\n            _spellCorrect: function (editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n                this._registerHandler(editor.body, {\n                    'contextmenu': function () {\n                        editor.one('select', function () {\n                            beforeCorrection = null;\n                        });\n                        editor._spellCorrectTimeout = setTimeout(function () {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    'input': function () {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n            _registerHandler: function (element, type, handler) {\n                var editor = this;\n                var NS = '.kendoEditor';\n                var eventNames;\n                var i;\n                element = $(element);\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        eventNames = kendo.applyEventMap(type).split(' ');\n                        for (i = 0; i < eventNames.length; i++) {\n                            editor._handlers.push({\n                                element: element,\n                                type: eventNames[i] + NS,\n                                handler: handler\n                            });\n                            element.on(eventNames[i] + NS, handler);\n                        }\n                    }\n                }\n            },\n            _deregisterHandlers: function () {\n                var handlers = this._handlers;\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n                this._handlers = [];\n            },\n            _initializeContentElement: function () {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n                    if (!doc.body) {\n                        var body = doc.createElement('body');\n                        body.setAttribute('contenteditable', 'true');\n                        body.setAttribute('autocorrect', 'off');\n                        doc.getElementsByTagName('html')[0].appendChild(body);\n                        var interval = setInterval(function () {\n                            if ($(editor.document).find('body').length > 1) {\n                                $(editor.document).find('body:last').remove();\n                                window.clearInterval(interval);\n                            }\n                        }, 10);\n                    }\n                    editor.body = doc.body;\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n                    this._registerHandler(doc, 'mouseup', proxy(this._mouseup, this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n                    editor.toolbar.decorateFrom(editor.body);\n                }\n                this._registerHandler(blurTrigger, 'blur', proxy(this._blur, this));\n                editor._registerHandler(mousedownTrigger, 'down', proxy(editor._mousedown, editor));\n                try {\n                    doc.execCommand('enableInlineTableEditing', null, false);\n                } catch (e) {\n                }\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        'keydown': function () {\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n                this._initializePlaceholder();\n                this._spellCorrect(editor);\n                this._registerHandler(editor.document, {\n                    'mouseover dragenter': function (e) {\n                        var height = $(editor.body).height();\n                        var htmlHeight = $(editor.body.parentElement).height();\n                        if (htmlHeight > height && e.target.nodeName.toLowerCase() === 'html') {\n                            editor._cachedHeight = '' + editor.body.style.height;\n                            editor.body.style.height = '100%';\n                        }\n                    },\n                    'mouseout dragleave drop contextmenu': function (e) {\n                        var restoreHeight = function () {\n                            if (editor._cachedHeight !== undefined && e.target === editor.body) {\n                                editor.body.style.height = editor._cachedHeight;\n                                delete editor._cachedHeight;\n                            }\n                        };\n                        if (e.type === 'contextmenu') {\n                            setTimeout(function () {\n                                restoreHeight();\n                            }, 10);\n                        } else {\n                            restoreHeight();\n                        }\n                    }\n                });\n                this._registerHandler(editor.body, {\n                    'keydown': function (e) {\n                        var range;\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute('contenteditable') !== 'true') {\n                            return false;\n                        }\n                        if (e.keyCode === keys.F10) {\n                            setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                            editor.toolbar.preventPopupHide = true;\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? 'startContainer' : 'endContainer'];\n                            var offset = range[left ? 'startOffset' : 'endOffset'];\n                            var direction = left ? -1 : 1;\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == '\\uFEFF') {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n                        var tools = editor.toolbar.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n                            editor.trigger('keydown', e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n                            return false;\n                        }\n                        editor.keyboard.clearTimeout();\n                        editor.keyboard.keydown(e);\n                    },\n                    'keypress': function (e) {\n                        setTimeout(function () {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showTableResizeHandles();\n                        }, 0);\n                    },\n                    'keyup': function (e) {\n                        var selectionCodes = [\n                            keys.BACKSPACE,\n                            keys.TAB,\n                            keys.PAGEUP,\n                            keys.PAGEDOWN,\n                            keys.END,\n                            keys.HOME,\n                            keys.LEFT,\n                            keys.UP,\n                            keys.RIGHT,\n                            keys.DOWN,\n                            keys.INSERT,\n                            keys.DELETE\n                        ];\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey) {\n                            window.clearTimeout(this._refreshInterval);\n                            this._refreshInterval = window.setTimeout(function () {\n                                editor._selectionChange();\n                            }, REFRESH_INTERVAL);\n                        }\n                        editor.keyboard.keyup(e);\n                    },\n                    'click': function (e) {\n                        var dom = kendo.ui.editor.Dom, range;\n                        if (dom.name(e.target) === 'img') {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    'cut copy paste drop dragover': function (e) {\n                        editor.clipboard['on' + e.type](e);\n                    },\n                    'focusin': function () {\n                        if (editor.body.hasAttribute('contenteditable')) {\n                            $(this).addClass('k-state-active');\n                            editor.toolbar.show();\n                            editor._togglePlaceholder(false);\n                        }\n                    },\n                    'focusout': function () {\n                        setTimeout(function () {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            var toolbar = editor.toolbar;\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = toolbar.window.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n                            if (active != body && !$.contains(body, active) && !$(active).is('.k-editortoolbar-dragHandle') && !toolbar.focused()) {\n                                $(body).removeClass('k-state-active');\n                                toolbar.hide();\n                            }\n                            editor._togglePlaceholder(!editor.value().trim());\n                        }, 10);\n                    }\n                });\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeTableResizing();\n            },\n            _initializePlaceholder: function () {\n                var that = this, placeholder = that.options.placeholder, style, $head;\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n                style = '<style id=\\'' + PLACEHOLDER_TAG_ID + '\\'>.' + PLACEHOLDER_CLASS + ':before { content: \\'' + placeholder + '\\'; }' + '</style>';\n                $head = $(that.document.head);\n                $head.find('#' + PLACEHOLDER_TAG_ID).remove();\n                $head.append(style);\n                that._togglePlaceholder(!that.value().trim());\n            },\n            _initializeImmutables: function () {\n                var that = this, editorNS = kendo.ui.editor;\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n            _mousedown: function (e) {\n                var editor = this;\n                editor._selectionStarted = true;\n                if ($(editor.body).parents('.k-window').length) {\n                    e.stopPropagation();\n                }\n                if (browser.gecko) {\n                    return;\n                }\n                var target = $(e.target).closest('a[href]');\n                if ((e.which == 2 || e.which == 1 && e.ctrlKey) && target && target.is('a[href]')) {\n                    window.open(target.attr('href'), '_new');\n                }\n                if (e.target.tagName && e.target.tagName.toLowerCase() === 'html') {\n                    setTimeout(function () {\n                        editor.body.focus();\n                    }, 0);\n                }\n            },\n            _mouseup: function (e) {\n                var that = this;\n                if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                    return;\n                }\n                if (that._selectionStarted) {\n                    setTimeout(function () {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n            _runPostContentKeyCommands: function (e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n            refresh: function () {\n                var that = this;\n                if (that.textarea) {\n                    that._destroyResizings();\n                    var value = that.value();\n                    that.textarea.val(value);\n                    that.wrapper.find('iframe').remove();\n                    that._initializeContentElement(that);\n                    that.value(value);\n                }\n            },\n            events: [\n                'select',\n                'change',\n                'execute',\n                'error',\n                'paste',\n                'keydown',\n                'keyup'\n            ],\n            options: {\n                name: 'Editor',\n                messages: messages,\n                placeholder: '',\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: { custom: null },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                fontName: [\n                    {\n                        text: 'Arial',\n                        value: 'Arial, Helvetica, sans-serif'\n                    },\n                    {\n                        text: 'Courier New',\n                        value: '\"Courier New\", Courier, monospace'\n                    },\n                    {\n                        text: 'Georgia',\n                        value: 'Georgia, serif'\n                    },\n                    {\n                        text: 'Impact',\n                        value: 'Impact, Charcoal, sans-serif'\n                    },\n                    {\n                        text: 'Lucida Console',\n                        value: '\"Lucida Console\", Monaco, monospace'\n                    },\n                    {\n                        text: 'Tahoma',\n                        value: 'Tahoma, Geneva, sans-serif'\n                    },\n                    {\n                        text: 'Times New Roman',\n                        value: '\"Times New Roman\", Times, serif'\n                    },\n                    {\n                        text: 'Trebuchet MS',\n                        value: '\"Trebuchet MS\", Helvetica, sans-serif'\n                    },\n                    {\n                        text: 'Verdana',\n                        value: 'Verdana, Geneva, sans-serif'\n                    }\n                ],\n                fontSize: [\n                    {\n                        text: '1 (8pt)',\n                        value: 'xx-small'\n                    },\n                    {\n                        text: '2 (10pt)',\n                        value: 'x-small'\n                    },\n                    {\n                        text: '3 (12pt)',\n                        value: 'small'\n                    },\n                    {\n                        text: '4 (14pt)',\n                        value: 'medium'\n                    },\n                    {\n                        text: '5 (18pt)',\n                        value: 'large'\n                    },\n                    {\n                        text: '6 (24pt)',\n                        value: 'x-large'\n                    },\n                    {\n                        text: '7 (36pt)',\n                        value: 'xx-large'\n                    }\n                ],\n                formatBlock: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                tools: [].concat.call(['formatting'], toolGroups.basic, toolGroups.alignment, toolGroups.formatPainter, toolGroups.lists, toolGroups.indenting, toolGroups.links, ['insertImage'], toolGroups.tables)\n            },\n            destroy: function () {\n                var editor = this;\n                Widget.fn.destroy.call(this);\n                this._endTyping(true);\n                this._deregisterHandlers();\n                clearTimeout(this._spellCorrectTimeout);\n                this._focusOutside();\n                this.toolbar.destroy();\n                editor._destroyUploadWidget();\n                editor._destroyResizings();\n                kendo.destroy(this.wrapper);\n            },\n            _destroyResizings: function () {\n                var editor = this;\n                editor._destroyTableResizing();\n                kendo.ui.editor.TableResizing.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n            _focusOutside: function () {\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $('<input style=\\'position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0\\' />').appendTo(document.body).focus();\n                    tempInput.blur().remove();\n                }\n            },\n            _destroyUploadWidget: function () {\n                var editor = this;\n                if (editor._uploadWidget) {\n                    editor._uploadWidget.destroy();\n                    editor._uploadWidget = null;\n                }\n            },\n            state: function (toolName) {\n                var tool = Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n                if (finder) {\n                    range = this.getRange();\n                    textNodes = RangeUtils.textNodes(range);\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n                return false;\n            },\n            value: function (html) {\n                var body = this.body, editorNS = kendo.ui.editor, options = this.options, currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n                if (html === undefined) {\n                    return currentHtml;\n                }\n                if (html == currentHtml) {\n                    return;\n                }\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n                this.selectionRestorePoint = null;\n                this.update();\n                this.toolbar.refreshTools();\n            },\n            saveSelection: function (range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer, body = this.body;\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n            _focusBody: function () {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find('iframe')[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                var scrollTop;\n                if (!iframe && body.scrollHeight > body.clientHeight) {\n                    scrollTop = body.scrollTop;\n                    body.focus();\n                    body.scrollTop = scrollTop;\n                } else if (activeElement != body && activeElement != iframe) {\n                    scrollTop = documentElement.scrollTop;\n                    body.focus();\n                    documentElement.scrollTop = scrollTop;\n                }\n            },\n            restoreSelection: function () {\n                this._focusBody();\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n            focus: function () {\n                this.restoreSelection();\n            },\n            update: function (value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n                if (this.textarea) {\n                    this.textarea.val(value);\n                    this._togglePlaceholder(!value.trim());\n                } else {\n                    this._oldValue = value;\n                }\n            },\n            encodedValue: function () {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n            createRange: function (document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n            getSelection: function () {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n            selectRange: function (range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n            getRange: function () {\n                var selection = this.getSelection(), range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(), doc = this.document;\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n                return range;\n            },\n            _containsRange: function (range) {\n                var dom = kendo.ui.editor.Dom;\n                var body = this.body;\n                return range && dom.isAncestorOrSelf(body, range.startContainer) && dom.isAncestorOrSelf(body, range.endContainer);\n            },\n            _deleteSavedRange: function () {\n                if ('_range' in this) {\n                    delete this._range;\n                }\n            },\n            selectedHtml: function () {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n            paste: function (html, options) {\n                this.focus();\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n                command.editor = this;\n                command.exec();\n            },\n            exec: function (name, params) {\n                var that = this;\n                var command = null;\n                var range, tool, prevented;\n                if (!name) {\n                    throw new Error('kendoEditor.exec(): `name` parameter cannot be empty');\n                }\n                if (that.body.getAttribute('contenteditable') !== 'true' && name !== 'print' && name !== 'pdf' && name !== 'exportAs') {\n                    return false;\n                }\n                name = name.toLowerCase();\n                if (!that.keyboard.isTypingInProgress()) {\n                    that._focusBody();\n                    that.selectRange(that._range || that.getRange());\n                }\n                tool = that.toolbar.toolById(name);\n                if (!tool) {\n                    for (var id in Editor.defaultTools) {\n                        if (id.toLowerCase() == name) {\n                            tool = Editor.defaultTools[id];\n                            break;\n                        }\n                    }\n                }\n                if (tool) {\n                    range = that.getRange();\n                    if (tool.command) {\n                        command = tool.command(extend({\n                            range: range,\n                            body: that.body,\n                            immutables: !!that.immutables\n                        }, params));\n                    }\n                    prevented = that.trigger('execute', {\n                        name: name,\n                        command: command\n                    });\n                    if (prevented) {\n                        return;\n                    }\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        that.execCommand(command);\n                        if (command.async) {\n                            command.change = proxy(that._selectionChange, that);\n                            return;\n                        }\n                    }\n                    that._selectionChange();\n                }\n            },\n            execCommand: function (command) {\n                if (!command.managesUndoRedo) {\n                    this.undoRedoStack.push(command);\n                }\n                command.editor = this;\n                command.exec();\n            }\n        });\n        Editor.defaultTools = {\n            undo: {\n                options: {\n                    key: 'Z',\n                    ctrl: true\n                }\n            },\n            redo: {\n                options: {\n                    key: 'Y',\n                    ctrl: true\n                }\n            }\n        };\n        kendo.ui.plugin(Editor);\n        var Tool = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            initialize: function (ui, options) {\n                ui.attr({\n                    unselectable: 'on',\n                    title: options.title,\n                    'aria-label': options.title\n                });\n            },\n            command: function (commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n            update: $.noop\n        });\n        Tool.exec = function (editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n        EditorUtils.registerTool('separator', new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n        var bomFill = browser.msie && browser.version < 9 ? '\\uFEFF' : '';\n        var emptyElementContent = '\\uFEFF';\n        var emptyTableCellContent = emptyElementContent;\n        if (browser.msie || browser.edge) {\n            emptyTableCellContent = emptyElementContent = '&nbsp;';\n        }\n        extend(kendo.ui, {\n            editor: {\n                ToolTemplate: ToolTemplate,\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                _bomFill: bomFill,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function () {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function () {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n                if (this.trigger('pdfExport', args)) {\n                    return;\n                }\n                var options = this.options.pdf;\n                this._drawPDF(progress).then(function (root) {\n                    return kendo.drawing.exportPDF(root, options);\n                }).done(function (dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        proxyTarget: options.proxyTarget,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                }).fail(function (err) {\n                    progress.reject(err);\n                });\n                return promise;\n            };\n        }\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/dom', ['editor/main'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, map = $.map, extend = $.extend, browser = kendo.support.browser, STYLE = 'style', FLOAT = 'float', CSSFLOAT = 'cssFloat', STYLEFLOAT = 'styleFloat', CLASS = 'class', KMARKER = 'k-marker';\n        function makeMap(items) {\n            var obj = {}, i, len;\n            for (i = 0, len = items.length; i < len; i++) {\n                obj[items[i]] = true;\n            }\n            return obj;\n        }\n        var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'.split(',')), nonListBlockElements = 'p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption'.split(','), blockElements = nonListBlockElements.concat([\n                'ul',\n                'ol',\n                'li'\n            ]), block = makeMap(blockElements), selfClosing = makeMap('area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr'.split(',')), inlineElements = 'span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby'.split(','), inline = makeMap(inlineElements), fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'.split(','));\n        var normalize = function (node) {\n            if (node.nodeType == 1) {\n                node.normalize();\n            }\n        };\n        if (browser.msie && browser.version >= 8) {\n            normalize = function (parent) {\n                if (parent.nodeType == 1 && parent.firstChild) {\n                    var prev = parent.firstChild, node = prev;\n                    normalize(node);\n                    while (true) {\n                        node = node.nextSibling;\n                        if (!node) {\n                            break;\n                        }\n                        normalize(node);\n                        if (node.nodeType == 3 && prev.nodeType == 3) {\n                            node.nodeValue = prev.nodeValue + node.nodeValue;\n                            Dom.remove(prev);\n                        }\n                        prev = node;\n                    }\n                }\n            };\n        }\n        var whitespace = /^\\s+$/, emptyspace = /^[\\n\\r\\t]+$/, rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i, bom = /\\ufeff/g, whitespaceOrBom = /^(\\s+|\\ufeff)$/, persistedScrollTop, cssAttributes = ('color,padding-left,padding-right,padding-top,padding-bottom,' + 'background-color,background-attachment,background-image,background-position,background-repeat,' + 'border-top-style,border-top-width,border-top-color,' + 'border-bottom-style,border-bottom-width,border-bottom-color,' + 'border-left-style,border-left-width,border-left-color,' + 'border-right-style,border-right-width,border-right-color,' + 'font-family,font-size,font-style,font-variant,font-weight,line-height').split(','), htmlRe = /[<>\\&]/g, entityRe = /[\\u00A0-\\u2666<>\\&]/g, entityTable = {\n                34: 'quot',\n                38: 'amp',\n                39: 'apos',\n                60: 'lt',\n                62: 'gt',\n                160: 'nbsp',\n                161: 'iexcl',\n                162: 'cent',\n                163: 'pound',\n                164: 'curren',\n                165: 'yen',\n                166: 'brvbar',\n                167: 'sect',\n                168: 'uml',\n                169: 'copy',\n                170: 'ordf',\n                171: 'laquo',\n                172: 'not',\n                173: 'shy',\n                174: 'reg',\n                175: 'macr',\n                176: 'deg',\n                177: 'plusmn',\n                178: 'sup2',\n                179: 'sup3',\n                180: 'acute',\n                181: 'micro',\n                182: 'para',\n                183: 'middot',\n                184: 'cedil',\n                185: 'sup1',\n                186: 'ordm',\n                187: 'raquo',\n                188: 'frac14',\n                189: 'frac12',\n                190: 'frac34',\n                191: 'iquest',\n                192: 'Agrave',\n                193: 'Aacute',\n                194: 'Acirc',\n                195: 'Atilde',\n                196: 'Auml',\n                197: 'Aring',\n                198: 'AElig',\n                199: 'Ccedil',\n                200: 'Egrave',\n                201: 'Eacute',\n                202: 'Ecirc',\n                203: 'Euml',\n                204: 'Igrave',\n                205: 'Iacute',\n                206: 'Icirc',\n                207: 'Iuml',\n                208: 'ETH',\n                209: 'Ntilde',\n                210: 'Ograve',\n                211: 'Oacute',\n                212: 'Ocirc',\n                213: 'Otilde',\n                214: 'Ouml',\n                215: 'times',\n                216: 'Oslash',\n                217: 'Ugrave',\n                218: 'Uacute',\n                219: 'Ucirc',\n                220: 'Uuml',\n                221: 'Yacute',\n                222: 'THORN',\n                223: 'szlig',\n                224: 'agrave',\n                225: 'aacute',\n                226: 'acirc',\n                227: 'atilde',\n                228: 'auml',\n                229: 'aring',\n                230: 'aelig',\n                231: 'ccedil',\n                232: 'egrave',\n                233: 'eacute',\n                234: 'ecirc',\n                235: 'euml',\n                236: 'igrave',\n                237: 'iacute',\n                238: 'icirc',\n                239: 'iuml',\n                240: 'eth',\n                241: 'ntilde',\n                242: 'ograve',\n                243: 'oacute',\n                244: 'ocirc',\n                245: 'otilde',\n                246: 'ouml',\n                247: 'divide',\n                248: 'oslash',\n                249: 'ugrave',\n                250: 'uacute',\n                251: 'ucirc',\n                252: 'uuml',\n                253: 'yacute',\n                254: 'thorn',\n                255: 'yuml',\n                402: 'fnof',\n                913: 'Alpha',\n                914: 'Beta',\n                915: 'Gamma',\n                916: 'Delta',\n                917: 'Epsilon',\n                918: 'Zeta',\n                919: 'Eta',\n                920: 'Theta',\n                921: 'Iota',\n                922: 'Kappa',\n                923: 'Lambda',\n                924: 'Mu',\n                925: 'Nu',\n                926: 'Xi',\n                927: 'Omicron',\n                928: 'Pi',\n                929: 'Rho',\n                931: 'Sigma',\n                932: 'Tau',\n                933: 'Upsilon',\n                934: 'Phi',\n                935: 'Chi',\n                936: 'Psi',\n                937: 'Omega',\n                945: 'alpha',\n                946: 'beta',\n                947: 'gamma',\n                948: 'delta',\n                949: 'epsilon',\n                950: 'zeta',\n                951: 'eta',\n                952: 'theta',\n                953: 'iota',\n                954: 'kappa',\n                955: 'lambda',\n                956: 'mu',\n                957: 'nu',\n                958: 'xi',\n                959: 'omicron',\n                960: 'pi',\n                961: 'rho',\n                962: 'sigmaf',\n                963: 'sigma',\n                964: 'tau',\n                965: 'upsilon',\n                966: 'phi',\n                967: 'chi',\n                968: 'psi',\n                969: 'omega',\n                977: 'thetasym',\n                978: 'upsih',\n                982: 'piv',\n                8226: 'bull',\n                8230: 'hellip',\n                8242: 'prime',\n                8243: 'Prime',\n                8254: 'oline',\n                8260: 'frasl',\n                8472: 'weierp',\n                8465: 'image',\n                8476: 'real',\n                8482: 'trade',\n                8501: 'alefsym',\n                8592: 'larr',\n                8593: 'uarr',\n                8594: 'rarr',\n                8595: 'darr',\n                8596: 'harr',\n                8629: 'crarr',\n                8656: 'lArr',\n                8657: 'uArr',\n                8658: 'rArr',\n                8659: 'dArr',\n                8660: 'hArr',\n                8704: 'forall',\n                8706: 'part',\n                8707: 'exist',\n                8709: 'empty',\n                8711: 'nabla',\n                8712: 'isin',\n                8713: 'notin',\n                8715: 'ni',\n                8719: 'prod',\n                8721: 'sum',\n                8722: 'minus',\n                8727: 'lowast',\n                8730: 'radic',\n                8733: 'prop',\n                8734: 'infin',\n                8736: 'ang',\n                8743: 'and',\n                8744: 'or',\n                8745: 'cap',\n                8746: 'cup',\n                8747: 'int',\n                8756: 'there4',\n                8764: 'sim',\n                8773: 'cong',\n                8776: 'asymp',\n                8800: 'ne',\n                8801: 'equiv',\n                8804: 'le',\n                8805: 'ge',\n                8834: 'sub',\n                8835: 'sup',\n                8836: 'nsub',\n                8838: 'sube',\n                8839: 'supe',\n                8853: 'oplus',\n                8855: 'otimes',\n                8869: 'perp',\n                8901: 'sdot',\n                8968: 'lceil',\n                8969: 'rceil',\n                8970: 'lfloor',\n                8971: 'rfloor',\n                9001: 'lang',\n                9002: 'rang',\n                9674: 'loz',\n                9824: 'spades',\n                9827: 'clubs',\n                9829: 'hearts',\n                9830: 'diams',\n                338: 'OElig',\n                339: 'oelig',\n                352: 'Scaron',\n                353: 'scaron',\n                376: 'Yuml',\n                710: 'circ',\n                732: 'tilde',\n                8194: 'ensp',\n                8195: 'emsp',\n                8201: 'thinsp',\n                8204: 'zwnj',\n                8205: 'zwj',\n                8206: 'lrm',\n                8207: 'rlm',\n                8211: 'ndash',\n                8212: 'mdash',\n                8216: 'lsquo',\n                8217: 'rsquo',\n                8218: 'sbquo',\n                8220: 'ldquo',\n                8221: 'rdquo',\n                8222: 'bdquo',\n                8224: 'dagger',\n                8225: 'Dagger',\n                8240: 'permil',\n                8249: 'lsaquo',\n                8250: 'rsaquo',\n                8364: 'euro'\n            };\n        var Dom = {\n            block: block,\n            inline: inline,\n            findNodeIndex: function (node, skipText) {\n                var i = 0;\n                if (!node) {\n                    return -1;\n                }\n                while (true) {\n                    node = node.previousSibling;\n                    if (!node) {\n                        break;\n                    }\n                    if (!(skipText && node.nodeType == 3)) {\n                        i++;\n                    }\n                }\n                return i;\n            },\n            isDataNode: function (node) {\n                return node && node.nodeValue !== null && node.data !== null;\n            },\n            isAncestorOf: function (parent, node) {\n                try {\n                    return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n                } catch (e) {\n                    return false;\n                }\n            },\n            isAncestorOrSelf: function (root, node) {\n                return Dom.isAncestorOf(root, node) || root == node;\n            },\n            findClosestAncestor: function (root, node) {\n                if (Dom.isAncestorOf(root, node)) {\n                    while (node && node.parentNode != root) {\n                        node = node.parentNode;\n                    }\n                }\n                return node;\n            },\n            getAllComments: function (rootElem) {\n                var comments = [];\n                var iterator = document.createNodeIterator(rootElem, NodeFilter.SHOW_COMMENT, function () {\n                    return NodeFilter.FILTER_ACCEPT;\n                }, false);\n                var curNode = iterator.nextNode();\n                while (curNode) {\n                    comments.push(curNode.nodeValue);\n                    curNode = iterator.nextNode();\n                }\n                return comments;\n            },\n            getNodeLength: function (node) {\n                return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n            },\n            splitDataNode: function (node, offset) {\n                var newNode = node.cloneNode(false);\n                var denormalizedText = '';\n                var iterator = node.nextSibling;\n                var temp;\n                while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                    denormalizedText += iterator.nodeValue;\n                    temp = iterator;\n                    iterator = iterator.nextSibling;\n                    Dom.remove(temp);\n                }\n                node.deleteData(offset, node.length);\n                newNode.deleteData(0, offset);\n                newNode.nodeValue += denormalizedText;\n                Dom.insertAfter(newNode, node);\n            },\n            attrEquals: function (node, attributes) {\n                for (var key in attributes) {\n                    var value = node[key];\n                    if (key == FLOAT) {\n                        value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                    }\n                    if (typeof value == 'object') {\n                        if (!Dom.attrEquals(value, attributes[key])) {\n                            return false;\n                        }\n                    } else if (value != attributes[key]) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            blockParentOrBody: function (node) {\n                return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n            },\n            blockParents: function (nodes) {\n                var blocks = [], i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                    if (block && $.inArray(block, blocks) < 0) {\n                        blocks.push(block);\n                    }\n                }\n                return blocks;\n            },\n            windowFromDocument: function (document) {\n                return document.defaultView || document.parentWindow;\n            },\n            normalize: normalize,\n            blockElements: blockElements,\n            nonListBlockElements: nonListBlockElements,\n            inlineElements: inlineElements,\n            empty: empty,\n            fillAttrs: fillAttrs,\n            nodeTypes: {\n                ELEMENT_NODE: 1,\n                ATTRIBUTE_NODE: 2,\n                TEXT_NODE: 3,\n                CDATA_SECTION_NODE: 4,\n                ENTITY_REFERENCE_NODE: 5,\n                ENTITY_NODE: 6,\n                PROCESSING_INSTRUCTION_NODE: 7,\n                COMMENT_NODE: 8,\n                DOCUMENT_NODE: 9,\n                DOCUMENT_TYPE_NODE: 10,\n                DOCUMENT_FRAGMENT_NODE: 11,\n                NOTATION_NODE: 12\n            },\n            toHex: function (color) {\n                var matches = rgb.exec(color);\n                if (!matches) {\n                    return color;\n                }\n                return '#' + map(matches.slice(1), function (x) {\n                    x = parseInt(x, 10).toString(16);\n                    return x.length > 1 ? x : '0' + x;\n                }).join('');\n            },\n            encode: function (value, options) {\n                var encodableChars = !options || options.entities ? entityRe : htmlRe;\n                return value.replace(encodableChars, function (c) {\n                    var charCode = c.charCodeAt(0);\n                    var entity = entityTable[charCode];\n                    return entity ? '&' + entity + ';' : c;\n                });\n            },\n            isBom: function (node) {\n                return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n            },\n            stripBom: function (text) {\n                return (text || '').replace(bom, '');\n            },\n            stripBomNode: function (node) {\n                if (Dom.isBom(node)) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            insignificant: function (node) {\n                var attr = node.attributes;\n                return node.className == 'k-marker' || Dom.is(node, 'br') && (node.className == 'k-br' || attr._moz_dirty || attr._moz_editor_bogus_node) || Dom.is(node, 'span') && node.className == 'k-br';\n            },\n            tableCell: function (node) {\n                return Dom.is(node, 'td') || Dom.is(node, 'th');\n            },\n            significantNodes: function (nodes) {\n                return $.grep(nodes, function (child) {\n                    var name = Dom.name(child);\n                    if (name == 'br') {\n                        return false;\n                    } else if (Dom.insignificant(child)) {\n                        return false;\n                    } else if (Dom.emptyTextNode(child)) {\n                        return false;\n                    } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                        return false;\n                    }\n                    return true;\n                });\n            },\n            emptyTextNode: function (node) {\n                return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n            },\n            emptyNode: function (node) {\n                return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n            },\n            name: function (node) {\n                return node.nodeName.toLowerCase();\n            },\n            significantChildNodes: function (node) {\n                return $.grep(node.childNodes, function (child) {\n                    return child.nodeType != 3 || !Dom.isWhitespace(child);\n                });\n            },\n            lastTextNode: function (node) {\n                var result = null;\n                if (node.nodeType == 3) {\n                    return node;\n                }\n                for (var child = node.lastChild; child; child = child.previousSibling) {\n                    result = Dom.lastTextNode(child);\n                    if (result) {\n                        return result;\n                    }\n                }\n                return result;\n            },\n            is: function (node, nodeName) {\n                return node && Dom.name(node) == nodeName;\n            },\n            isMarker: function (node) {\n                return node.className == KMARKER;\n            },\n            isWhitespace: function (node) {\n                return whitespace.test(node.nodeValue);\n            },\n            allWhitespaceContent: function (node) {\n                var child = node.firstChild;\n                while (child && Dom.isWhitespace(child)) {\n                    child = child.nextSibling;\n                }\n                return !child;\n            },\n            isEmptyspace: function (node) {\n                return emptyspace.test(node.nodeValue);\n            },\n            htmlIndentSpace: function (node) {\n                if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                    return false;\n                }\n                if (emptyspace.test(node.nodeValue)) {\n                    return true;\n                }\n                var sibling = function (el, direction) {\n                    while (el[direction]) {\n                        el = el[direction];\n                        if (Dom.significantNodes([el]).length > 0) {\n                            return el;\n                        }\n                    }\n                };\n                var parent = node.parentNode;\n                var prev = sibling(node, 'previousSibling');\n                var next = sibling(node, 'nextSibling');\n                if (bom.test(node.nodeValue)) {\n                    return !!(prev || next);\n                }\n                if ($(parent).is('tr,tbody,thead,tfoot,table,ol,ul')) {\n                    return true;\n                }\n                if (Dom.isBlock(parent) || Dom.is(parent, 'body')) {\n                    var isPrevBlock = prev && Dom.isBlock(prev);\n                    var isNextBlock = next && Dom.isBlock(next);\n                    if (!next && isPrevBlock || !prev && isNextBlock || isPrevBlock && isNextBlock) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            isBlock: function (node) {\n                return block[Dom.name(node)];\n            },\n            isSelfClosing: function (node) {\n                return selfClosing[Dom.name(node)];\n            },\n            isEmpty: function (node) {\n                return empty[Dom.name(node)];\n            },\n            isInline: function (node) {\n                return inline[Dom.name(node)];\n            },\n            isBr: function (node) {\n                return Dom.name(node) == 'br';\n            },\n            list: function (node) {\n                var name = node ? Dom.name(node) : '';\n                return name == 'ul' || name == 'ol' || name == 'dl';\n            },\n            scrollContainer: function (doc) {\n                var wnd = Dom.windowFromDocument(doc), scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n                if (scrollContainer.compatMode == 'BackCompat') {\n                    scrollContainer = scrollContainer.body;\n                } else {\n                    scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n                }\n                return scrollContainer;\n            },\n            scrollTo: function (node, toStart) {\n                var doc = node.ownerDocument;\n                var wnd = Dom.windowFromDocument(doc);\n                var windowHeight = wnd.innerHeight;\n                var scrollContainer = Dom.scrollContainer(doc);\n                var element, elementTop, elementHeight, marker;\n                if (Dom.isDataNode(node)) {\n                    if (toStart) {\n                        marker = Dom.create(doc, 'span', { 'innerHTML': '&#xfeff;' });\n                        Dom.insertBefore(marker, node);\n                        element = $(marker);\n                    } else {\n                        element = $(node.parentNode);\n                    }\n                } else {\n                    element = $(node);\n                }\n                elementTop = element.offset().top;\n                elementHeight = element[0].offsetHeight;\n                if (toStart || !elementHeight) {\n                    elementHeight = parseInt(element.css('line-height'), 10) || Math.ceil(1.2 * parseInt(element.css('font-size'), 10)) || 15;\n                }\n                if (marker) {\n                    Dom.remove(marker);\n                }\n                if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                    scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n                }\n            },\n            persistScrollTop: function (doc) {\n                persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n            },\n            offset: function (target, offsetParent) {\n                var result = {\n                    top: target.offsetTop,\n                    left: target.offsetLeft\n                };\n                var parent = target.offsetParent;\n                while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                    result.top += parent.offsetTop;\n                    result.left += parent.offsetLeft;\n                    parent = parent.offsetParent;\n                }\n                return result;\n            },\n            restoreScrollTop: function (doc) {\n                if (typeof persistedScrollTop == 'number') {\n                    Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                    persistedScrollTop = undefined;\n                }\n            },\n            insertAt: function (parent, newElement, position) {\n                parent.insertBefore(newElement, parent.childNodes[position] || null);\n            },\n            insertBefore: function (newElement, referenceElement) {\n                if (referenceElement.parentNode) {\n                    return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n                } else {\n                    return referenceElement;\n                }\n            },\n            insertAfter: function (newElement, referenceElement) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n            },\n            remove: function (node) {\n                if (node.parentNode) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            removeChildren: function (node) {\n                while (node.firstChild) {\n                    node.removeChild(node.firstChild);\n                }\n            },\n            removeTextSiblings: function (node) {\n                var parentNode = node.parentNode;\n                while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                    parentNode.removeChild(node.nextSibling);\n                }\n                while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                    parentNode.removeChild(node.previousSibling);\n                }\n            },\n            trim: function (parent) {\n                for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                    var node = parent.childNodes[i];\n                    if (Dom.isDataNode(node)) {\n                        if (!Dom.stripBom(node.nodeValue).length) {\n                            Dom.remove(node);\n                        }\n                    } else if (node.className != KMARKER) {\n                        Dom.trim(node);\n                        if (!Dom.isEmpty(node) && node.childNodes.length === 0 || Dom.isBlock(node) && Dom.allWhitespaceContent(node)) {\n                            Dom.remove(node);\n                        }\n                    }\n                }\n                return parent;\n            },\n            closest: function (node, tags) {\n                if (typeof tags === 'string') {\n                    tags = [tags];\n                }\n                while (node && tags.indexOf(Dom.name(node)) < 0) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            closestBy: function (node, condition, rootCondition) {\n                while (node && !condition(node)) {\n                    if (rootCondition && rootCondition(node)) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            sibling: function (node, direction) {\n                do {\n                    node = node[direction];\n                } while (node && node.nodeType != 1);\n                return node;\n            },\n            next: function (node) {\n                return Dom.sibling(node, 'nextSibling');\n            },\n            prev: function (node) {\n                return Dom.sibling(node, 'previousSibling');\n            },\n            parentOfType: function (node, tags) {\n                do {\n                    node = node.parentNode;\n                } while (node && !Dom.ofType(node, tags));\n                return node;\n            },\n            ofType: function (node, tags) {\n                return $.inArray(Dom.name(node), tags) >= 0;\n            },\n            changeTag: function (referenceElement, tagName, skipAttributes) {\n                var newElement = Dom.create(referenceElement.ownerDocument, tagName), attributes = referenceElement.attributes, i, len, name, value, attribute;\n                if (!skipAttributes) {\n                    for (i = 0, len = attributes.length; i < len; i++) {\n                        attribute = attributes[i];\n                        if (attribute.specified) {\n                            name = attribute.nodeName;\n                            value = attribute.nodeValue;\n                            if (name == CLASS) {\n                                newElement.className = value;\n                            } else if (name == STYLE) {\n                                newElement.style.cssText = referenceElement.style.cssText;\n                            } else {\n                                newElement.setAttribute(name, value);\n                            }\n                        }\n                    }\n                }\n                while (referenceElement.firstChild) {\n                    newElement.appendChild(referenceElement.firstChild);\n                }\n                Dom.insertBefore(newElement, referenceElement);\n                Dom.remove(referenceElement);\n                return newElement;\n            },\n            editableParent: function (node) {\n                while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            wrap: function (node, wrapper) {\n                Dom.insertBefore(wrapper, node);\n                wrapper.appendChild(node);\n                return wrapper;\n            },\n            unwrap: function (node) {\n                var parent = node.parentNode;\n                while (node.firstChild) {\n                    parent.insertBefore(node.firstChild, node);\n                }\n                parent.removeChild(node);\n            },\n            wrapper: function (node) {\n                var wrapper = Dom.closestBy(node, function (el) {\n                    return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n                });\n                return $(wrapper).is('body,.k-editor') ? undefined : wrapper;\n            },\n            create: function (document, tagName, attributes) {\n                return Dom.attr(document.createElement(tagName), attributes);\n            },\n            createEmptyNode: function (document, tagName, attributes) {\n                var node = Dom.attr(document.createElement(tagName), attributes);\n                node.innerHTML = '\\uFEFF';\n                return node;\n            },\n            attr: function (element, attributes) {\n                attributes = extend({}, attributes);\n                if (attributes && STYLE in attributes) {\n                    Dom.style(element, attributes.style);\n                    delete attributes.style;\n                }\n                for (var attr in attributes) {\n                    if (attributes[attr] === null) {\n                        element.removeAttribute(attr);\n                        delete attributes[attr];\n                    } else if (attr == 'className') {\n                        element[attr] = attributes[attr];\n                    }\n                }\n                return extend(element, attributes);\n            },\n            mergeAttributes: function (origin, target) {\n                if (!origin.attributes.length) {\n                    return;\n                }\n                $.each(origin.attributes, function () {\n                    if (this.name !== 'contenteditable') {\n                        $(target).attr(this.name, this.value);\n                    }\n                });\n            },\n            style: function (node, value) {\n                $(node).css(value || {});\n            },\n            unstyle: function (node, value) {\n                for (var key in value) {\n                    if (key == FLOAT) {\n                        key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                    }\n                    node.style[key] = '';\n                }\n                if (node.style.cssText === '') {\n                    node.removeAttribute(STYLE);\n                }\n            },\n            inlineStyle: function (body, name, attributes) {\n                var span = $(Dom.create(body.ownerDocument, name, attributes)), style;\n                body.appendChild(span[0]);\n                style = map(cssAttributes, function (value) {\n                    if (browser.msie && value == 'line-height' && span.css(value) == '1px') {\n                        return 'line-height:1.5';\n                    } else {\n                        return value + ':' + span.css(value);\n                    }\n                }).join(';');\n                span.remove();\n                return style;\n            },\n            getEffectiveBackground: function (element) {\n                var backgroundStyle = element.css('background-color') || '';\n                if (backgroundStyle.indexOf('rgba(0, 0, 0, 0') < 0 && backgroundStyle !== 'transparent') {\n                    return backgroundStyle;\n                } else if (element[0].tagName.toLowerCase() === 'html') {\n                    return 'Window';\n                } else {\n                    return Dom.getEffectiveBackground(element.parent());\n                }\n            },\n            innerText: function (node) {\n                var text = node.innerHTML;\n                text = text.replace(/<!--(.|\\s)*?-->/gi, '');\n                text = text.replace(/<\\/?[^>]+?\\/?>/gm, '');\n                return text;\n            },\n            removeClass: function (node, classNames) {\n                var className = ' ' + node.className + ' ', classes = classNames.split(' '), i, len;\n                for (i = 0, len = classes.length; i < len; i++) {\n                    className = className.replace(' ' + classes[i] + ' ', ' ');\n                }\n                className = kendo.trim(className);\n                if (className.length) {\n                    node.className = className;\n                } else {\n                    node.removeAttribute(CLASS);\n                }\n            },\n            commonAncestor: function () {\n                var count = arguments.length, paths = [], minPathLength = Infinity, output = null, i, ancestors, node, first, j;\n                if (!count) {\n                    return null;\n                }\n                if (count == 1) {\n                    return arguments[0];\n                }\n                for (i = 0; i < count; i++) {\n                    ancestors = [];\n                    node = arguments[i];\n                    while (node) {\n                        ancestors.push(node);\n                        node = node.parentNode;\n                    }\n                    paths.push(ancestors.reverse());\n                    minPathLength = Math.min(minPathLength, ancestors.length);\n                }\n                if (count == 1) {\n                    return paths[0][0];\n                }\n                for (i = 0; i < minPathLength; i++) {\n                    first = paths[0][i];\n                    for (j = 1; j < count; j++) {\n                        if (first != paths[j][i]) {\n                            return output;\n                        }\n                    }\n                    output = first;\n                }\n                return output;\n            },\n            closestSplittableParent: function (nodes) {\n                var result;\n                if (nodes.length == 1) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'ul',\n                        'ol'\n                    ]);\n                } else {\n                    result = Dom.commonAncestor.apply(null, nodes);\n                }\n                if (!result) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'p',\n                        'td'\n                    ]) || nodes[0].ownerDocument.body;\n                }\n                if (Dom.isInline(result)) {\n                    result = Dom.blockParentOrBody(result);\n                }\n                var editableParents = map(nodes, Dom.editableParent);\n                var editableAncestor = Dom.commonAncestor(editableParents)[0];\n                if ($.contains(result, editableAncestor)) {\n                    result = editableAncestor;\n                }\n                return result;\n            },\n            closestEditable: function (node, types) {\n                var closest;\n                var editable = Dom.editableParent(node);\n                if (Dom.ofType(node, types)) {\n                    closest = node;\n                } else {\n                    closest = Dom.parentOfType(node, types);\n                }\n                if (closest && editable && $.contains(closest, editable)) {\n                    closest = editable;\n                } else if (!closest && editable) {\n                    closest = editable;\n                }\n                return closest;\n            },\n            closestEditableOfType: function (node, types) {\n                var editable = Dom.closestEditable(node, types);\n                if (editable && Dom.ofType(editable, types) && !$(editable).is('.k-editor')) {\n                    return editable;\n                }\n            },\n            filter: function (tagName, nodes, invert) {\n                var filterFn = function (node) {\n                    return Dom.name(node) == tagName;\n                };\n                return Dom.filterBy(nodes, filterFn, invert);\n            },\n            filterBy: function (nodes, condition, invert) {\n                var i = 0;\n                var len = nodes.length;\n                var result = [];\n                var match;\n                for (; i < len; i++) {\n                    match = condition(nodes[i]);\n                    if (match && !invert || !match && invert) {\n                        result.push(nodes[i]);\n                    }\n                }\n                return result;\n            },\n            ensureTrailingBreaks: function (node) {\n                var elements = $(node).find('p,td,th');\n                var length = elements.length;\n                var i = 0;\n                if (length) {\n                    for (; i < length; i++) {\n                        Dom.ensureTrailingBreak(elements[i]);\n                    }\n                } else {\n                    Dom.ensureTrailingBreak(node);\n                }\n            },\n            removeTrailingBreak: function (node) {\n                $(node).find('br[type=_moz],.k-br').remove();\n            },\n            ensureTrailingBreak: function (node) {\n                Dom.removeTrailingBreak(node);\n                var lastChild = node.lastChild;\n                var name = lastChild && Dom.name(lastChild);\n                var br;\n                if (!name || name != 'br' && name != 'img' || name == 'br' && lastChild.className != 'k-br') {\n                    br = node.ownerDocument.createElement('br');\n                    br.className = 'k-br';\n                    node.appendChild(br);\n                }\n            },\n            reMapTableColumns: function (table, colAttr) {\n                Dom._mapColIndices(table, colAttr);\n            },\n            clearTableMappings: function (table, colAttr) {\n                $(table).find('[' + colAttr + ']').removeAttr(colAttr);\n            },\n            _mapColIndices: function (table, colAttr) {\n                var registeredColumns = {};\n                for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n                    var cells = table.rows[rowIndex].cells;\n                    var colIndex = 0;\n                    for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                        var cell = cells[cellIndex];\n                        if (cell.rowSpan > 1) {\n                            this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                        }\n                        if (registeredColumns[rowIndex]) {\n                            while (registeredColumns[rowIndex][colIndex]) {\n                                colIndex++;\n                            }\n                        }\n                        cell.setAttribute(colAttr, colIndex);\n                        if (cell.colSpan > 1) {\n                            colIndex = colIndex + cell.colSpan - 1;\n                        }\n                    }\n                }\n            },\n            _mapColspan: function (cell, rowIndex, colIndex, registeredColumns) {\n                var rowSpan = cell.rowSpan, colSpan = cell.colSpan, index;\n                for (var ci = 0; ci < colSpan; ci++) {\n                    index = colIndex + ci;\n                    for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n                        if (!registeredColumns[ri]) {\n                            registeredColumns[ri] = {};\n                            registeredColumns[ri].length = 0;\n                        }\n                        if (registeredColumns[rowIndex]) {\n                            while (registeredColumns[rowIndex][index]) {\n                                index++;\n                            }\n                        }\n                        registeredColumns[ri][index] = true;\n                        registeredColumns[ri].length++;\n                    }\n                }\n            },\n            associateWithIds: function (table) {\n                var that = this;\n                var numberOfTheadRows = 0;\n                var tableRows = table.rows;\n                var numberOfTableRows = tableRows.length;\n                var theadMatrix = [];\n                var tbodyMatrix = [];\n                var theadRows, i;\n                if (table.tHead) {\n                    theadRows = table.tHead.rows;\n                    numberOfTheadRows = theadRows.length;\n                } else {\n                    numberOfTheadRows = that._getNumberOfHeaderRows(table);\n                    theadRows = [];\n                    for (i = 0; i < numberOfTheadRows; i++) {\n                        theadRows.push(tableRows[i]);\n                    }\n                }\n                for (i = 0; i < numberOfTheadRows; i++) {\n                    theadMatrix.push([]);\n                }\n                for (i = 0; i < numberOfTableRows; i++) {\n                    tbodyMatrix.push([]);\n                }\n                that._generateIdsForColumns(theadMatrix, theadRows);\n                that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n                that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n            },\n            _generateIdsForColumns: function (theadMatrix, theadRows) {\n                var timestamp = new Date().getTime();\n                var numberOfTheadRows = theadRows ? theadRows.length : 0;\n                var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n                for (i = 0; i < numberOfTheadRows; i++) {\n                    row = theadRows[i];\n                    cells = row.cells;\n                    col = 0;\n                    for (j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        id = 'table' + i + j + ++timestamp;\n                        cell.setAttribute('id', id);\n                        colspan = cell.getAttribute('colspan') || 1;\n                        rowspan = cell.getAttribute('rowspan') || 1;\n                        while (theadMatrix[i][j + col]) {\n                            col += 1;\n                        }\n                        for (k = 0; k < rowspan; k++) {\n                            for (l = 0; l < colspan; l++) {\n                                theadMatrix[i + k][j + col + l] = id;\n                            }\n                        }\n                    }\n                }\n            },\n            _generateIdsForRows: function (theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n                var that = this;\n                var timestamp = new Date().getTime();\n                var numberOfTableRows = tableRows.length;\n                var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n                var pushHeaderId = function (row) {\n                    headers.push(row[colIndex]);\n                };\n                for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                    row = tableRows[i];\n                    cells = $(row.cells).filter('th');\n                    col = 0;\n                    for (j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        id = 'table' + i + j + ++timestamp;\n                        cell.setAttribute('id', id);\n                        colspan = cell.getAttribute('colspan') || 1;\n                        rowspan = cell.getAttribute('rowspan') || 1;\n                        while (tbodyMatrix[i][j + col]) {\n                            col += 1;\n                        }\n                        for (k = 0; k < rowspan; k++) {\n                            for (l = 0; l < colspan; l++) {\n                                tbodyMatrix[i + k][j + col + l] = id;\n                            }\n                        }\n                        colIndex = cell.getAttribute('col-index');\n                        headers = [];\n                        theadMatrix.forEach(pushHeaderId);\n                        headers = headers.filter(that._onlyUnique);\n                        cell.setAttribute('headers', headers.join(' ').trim());\n                    }\n                }\n            },\n            _assignIds: function (theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n                var that = this;\n                var numberOfTableRows = tableRows.length;\n                var row, cells, cell, i, j, colIndex, headers;\n                var pushHeaderId = function (row) {\n                    headers.push(row[colIndex]);\n                };\n                for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                    row = tableRows[i];\n                    cells = $(row.cells).filter('td');\n                    for (j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        colIndex = cell.getAttribute('col-index');\n                        headers = tbodyMatrix[i].slice();\n                        theadMatrix.forEach(pushHeaderId);\n                        headers = headers.filter(that._onlyUnique);\n                        cell.setAttribute('headers', headers.join(' ').trim());\n                    }\n                }\n            },\n            _getNumberOfColumns: function (table) {\n                var cells = $(table).find('th, td');\n                var numberOfCols = 0;\n                var cell, i, currentIndex;\n                for (i = 0; i < cells.length; i++) {\n                    cell = cells[i];\n                    currentIndex = Number(cell.getAttribute('col-index')) + 1;\n                    if (currentIndex > numberOfCols) {\n                        numberOfCols = currentIndex;\n                    }\n                }\n                return numberOfCols;\n            },\n            _getNumberOfHeaderColumns: function (table, numberOfHeaderRows) {\n                var rows = table.rows;\n                var numberOfCols = 0;\n                var currentIndex, row, i, j, cell;\n                for (i = numberOfHeaderRows; i < rows.length; i++) {\n                    row = rows[i];\n                    for (j = 0; j < row.cells.length; j++) {\n                        cell = row.cells[j];\n                        if (this.is(cell, 'th')) {\n                            currentIndex = Number(cell.getAttribute('col-index')) + 1;\n                            if (currentIndex > numberOfCols) {\n                                numberOfCols = currentIndex;\n                            }\n                        }\n                    }\n                }\n                return numberOfCols;\n            },\n            _getNumberOfHeaderRows: function (table) {\n                var rows = table.rows;\n                var thead = table.tHead;\n                var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n                var j, row, cell, length;\n                if (number === 0) {\n                    row = rows[0];\n                    length = row.cells && row.cells.length;\n                    while (row && length && this.is(row.cells[0], 'th')) {\n                        for (j = 0; j < length; j++) {\n                            cell = row ? row.cells[j] : null;\n                            if (!this.is(cell, 'th')) {\n                                row = null;\n                            }\n                        }\n                        if (row) {\n                            number += 1;\n                            row = this.next(row);\n                            length = row && row.cells && row.cells.length;\n                        }\n                    }\n                }\n                return number;\n            },\n            _onlyUnique: function (value, index, self) {\n                return self.indexOf(value) === index;\n            }\n        };\n        kendo.ui.editor.Dom = Dom;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/serializer', ['editor/dom'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var extend = $.extend;\n        var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n        var quoteRe = /\"/g;\n        var brRe = /<br[^>]*>/i;\n        var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n        var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n        var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n        var sizzleAttr = /^sizzle-\\d+/i;\n        var scriptAttr = /^k-script-/i;\n        var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n        var br = '<br class=\"k-br\">';\n        var bomSpan = '<span class=\\'k-br\\'>\\uFEFF</span>';\n        var div = document.createElement('div');\n        div.innerHTML = ' <hr>';\n        var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n        div = null;\n        var isFunction = $.isFunction;\n        var TD = 'td';\n        var Serializer = {\n            toEditableHtml: function (html) {\n                return (html || '').replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, '<!--[CDATA[$1]]-->').replace(/<(\\/?)script([^>]*)>/gi, '<$1k:script$2>').replace(/<img([^>]*)>/gi, function (match) {\n                    return match.replace(onerrorRe, '');\n                }).replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/gi, '$1').replace(/^<(table|blockquote)/i, br + '<$1').replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1').replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n            },\n            _toEditableImmutables: function (body) {\n                var immutable = Editor.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(bomSpan).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(bomSpan).appendTo(body);\n                }\n            },\n            _fillEmptyElements: function (body) {\n                $(body).find('p,td').each(function () {\n                    var p = $(this);\n                    if (/^\\s*$/g.test(p.text()) && !p.find('img,input').length) {\n                        var node = this;\n                        while (node.firstChild && node.firstChild.nodeType != 3) {\n                            node = node.firstChild;\n                        }\n                        if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                            if (dom.is(node, 'td')) {\n                                node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                            } else {\n                                node.innerHTML = kendo.ui.editor.emptyElementContent;\n                            }\n                        }\n                    }\n                });\n            },\n            _removeSystemElements: function (body) {\n                $('.k-paste-container', body).remove();\n            },\n            _resetOrderedLists: function (root) {\n                var ols = root.getElementsByTagName('ol'), i, ol, originalStart;\n                for (i = 0; i < ols.length; i++) {\n                    ol = ols[i];\n                    originalStart = ol.getAttribute('start');\n                    ol.setAttribute('start', 1);\n                    if (originalStart) {\n                        ol.setAttribute('start', originalStart);\n                    } else {\n                        ol.removeAttribute(originalStart);\n                    }\n                }\n            },\n            _preventScriptExecution: function (root) {\n                $(root).find('*').each(function () {\n                    var attributes = this.attributes;\n                    var attribute, i, l, name;\n                    var attributesToRemove = [];\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        if (attribute.specified && /^on/i.test(name)) {\n                            this.setAttribute('k-script-' + name, attribute.value);\n                            attributesToRemove.push(name);\n                        }\n                    }\n                    for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                        this.removeAttribute(attributesToRemove[i]);\n                    }\n                });\n            },\n            htmlToDom: function (html, root, options) {\n                var browser = kendo.support.browser;\n                var msie = browser.msie;\n                var legacyIE = msie && browser.version < 9;\n                var originalSrc = 'originalsrc';\n                var originalHref = 'originalhref';\n                var o = options || {};\n                var immutables = o.immutables;\n                html = Serializer.toEditableHtml(html);\n                if (legacyIE) {\n                    html = '<br/>' + html;\n                    html = html.replace(/href\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalHref + '=\"$1\"');\n                    html = html.replace(/src\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalSrc + '=\"$1\"');\n                }\n                if (isFunction(o.custom)) {\n                    html = o.custom(html) || html;\n                }\n                root.innerHTML = html;\n                if (immutables) {\n                    immutables.deserialize(root);\n                }\n                if (legacyIE) {\n                    dom.remove(root.firstChild);\n                    $(root).find('k\\\\:script,script,link,img,a').each(function () {\n                        var node = this;\n                        if (node[originalHref]) {\n                            node.setAttribute('href', node[originalHref]);\n                            node.removeAttribute(originalHref);\n                        }\n                        if (node[originalSrc]) {\n                            node.setAttribute('src', node[originalSrc]);\n                            node.removeAttribute(originalSrc);\n                        }\n                    });\n                } else if (msie) {\n                    dom.normalize(root);\n                    Serializer._resetOrderedLists(root);\n                }\n                Serializer._preventScriptExecution(root);\n                Serializer._fillEmptyElements(root);\n                Serializer._removeSystemElements(root);\n                Serializer._toEditableImmutables(root);\n                $('table', root).addClass('k-table');\n                return root;\n            },\n            domToXhtml: function (root, options) {\n                var result = [];\n                var immutables = options && options.immutables;\n                function semanticFilter(attributes) {\n                    return $.grep(attributes, function (attr) {\n                        return attr.name != 'style';\n                    });\n                }\n                function mapStart(node, tag) {\n                    result.push('<' + tag);\n                    attr(node);\n                    result.push('>');\n                }\n                var tagMap = {\n                    iframe: {\n                        start: function (node) {\n                            mapStart(node, 'iframe');\n                        },\n                        end: function () {\n                            result.push('</iframe>');\n                        }\n                    },\n                    'k:script': {\n                        start: function (node) {\n                            mapStart(node, 'script');\n                        },\n                        end: function () {\n                            result.push('</script>');\n                        },\n                        skipEncoding: true\n                    },\n                    span: {\n                        semantic: true,\n                        start: function (node) {\n                            var style = node.style;\n                            var attributes = specifiedAttributes(node);\n                            var semanticAttributes = semanticFilter(attributes);\n                            if (semanticAttributes.length) {\n                                result.push('<span');\n                                attr(node, semanticAttributes);\n                                result.push('>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('<u>');\n                            }\n                            var font = [];\n                            if (style.color) {\n                                font.push('color=\"' + dom.toHex(style.color) + '\"');\n                            }\n                            if (style.fontFamily) {\n                                font.push('face=\"' + style.fontFamily + '\"');\n                            }\n                            if (style.fontSize) {\n                                var size = $.inArray(style.fontSize, fontSizeMappings);\n                                font.push('size=\"' + size + '\"');\n                            }\n                            if (font.length) {\n                                result.push('<font ' + font.join(' ') + '>');\n                            }\n                        },\n                        end: function (node) {\n                            var style = node.style;\n                            if (style.color || style.fontFamily || style.fontSize) {\n                                result.push('</font>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('</u>');\n                            }\n                            if (semanticFilter(specifiedAttributes(node)).length) {\n                                result.push('</span>');\n                            }\n                        }\n                    },\n                    strong: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'b');\n                        },\n                        end: function () {\n                            result.push('</b>');\n                        }\n                    },\n                    em: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'i');\n                        },\n                        end: function () {\n                            result.push('</i>');\n                        }\n                    },\n                    b: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'strong');\n                        },\n                        end: function () {\n                            result.push('</strong>');\n                        }\n                    },\n                    i: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'em');\n                        },\n                        end: function () {\n                            result.push('</em>');\n                        }\n                    },\n                    u: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span');\n                            var attributes = specifiedAttributes(node);\n                            var style = $(attributes).filter(function (i, item) {\n                                return item.name == 'style';\n                            })[0];\n                            var styleObj = {\n                                nodeName: 'style',\n                                value: 'text-decoration:underline;'\n                            };\n                            if (style) {\n                                styleObj.value = style.value;\n                                if (!/text-decoration/i.test(styleObj.value)) {\n                                    styleObj.value = 'text-decoration:underline;' + styleObj.value;\n                                }\n                                attributes.splice($.inArray(style, attributes), 1);\n                            }\n                            attributes.push(styleObj);\n                            attr(node, attributes);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    },\n                    font: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span style=\"');\n                            var color = node.getAttribute('color');\n                            var size = fontSizeMappings[node.getAttribute('size')];\n                            var face = node.getAttribute('face');\n                            if (color) {\n                                result.push('color:');\n                                result.push(dom.toHex(color));\n                                result.push(';');\n                            }\n                            if (face) {\n                                result.push('font-family:');\n                                result.push(face);\n                                result.push(';');\n                            }\n                            if (size) {\n                                result.push('font-size:');\n                                result.push(size);\n                                result.push(';');\n                            }\n                            result.push('\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    }\n                };\n                tagMap.script = tagMap['k:script'];\n                options = options || {};\n                if (typeof options.semantic == 'undefined') {\n                    options.semantic = true;\n                }\n                function cssProperties(cssText) {\n                    var trim = kendo.trim;\n                    var css = trim(cssText);\n                    var match;\n                    var property, value;\n                    var properties = [];\n                    cssDeclaration.lastIndex = 0;\n                    while (true) {\n                        match = cssDeclaration.exec(css);\n                        if (!match) {\n                            break;\n                        }\n                        property = trim(match[1].toLowerCase());\n                        value = trim(match[2]);\n                        if (property == 'font-size-adjust' || property == 'font-stretch') {\n                            continue;\n                        }\n                        if (property.indexOf('color') >= 0) {\n                            value = dom.toHex(value);\n                        } else if (property.indexOf('font') >= 0) {\n                            value = value.replace(quoteRe, '\\'');\n                        } else if (/\\burl\\(/g.test(value)) {\n                            value = value.replace(quoteRe, '');\n                        }\n                        properties.push({\n                            property: property,\n                            value: value\n                        });\n                    }\n                    return properties;\n                }\n                function styleAttr(cssText) {\n                    var properties = cssProperties(cssText);\n                    var i;\n                    for (i = 0; i < properties.length; i++) {\n                        result.push(properties[i].property);\n                        result.push(':');\n                        result.push(properties[i].value);\n                        result.push(';');\n                    }\n                }\n                function specifiedAttributes(node) {\n                    var result = [];\n                    var attributes = node.attributes;\n                    var attribute, i, l;\n                    var name, value, specified;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        specified = attribute.specified;\n                        if (name == 'value' && 'value' in node && node.value) {\n                            specified = true;\n                        } else if (name == 'type' && value == 'text') {\n                            specified = true;\n                        } else if (name == 'class' && !value) {\n                            specified = false;\n                        } else if (sizzleAttr.test(name)) {\n                            specified = false;\n                        } else if (name == 'complete') {\n                            specified = false;\n                        } else if (name == 'altHtml') {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ul')) {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ol') && value == '1') {\n                            specified = false;\n                        } else if (name.indexOf('_moz') >= 0) {\n                            specified = false;\n                        } else if (scriptAttr.test(name)) {\n                            specified = !!options.scripts;\n                        } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, 'tr') || dom.is(node, 'td'))) {\n                            specified = false;\n                        }\n                        if (specified) {\n                            result.push(attribute);\n                        }\n                    }\n                    return result;\n                }\n                function attr(node, attributes) {\n                    var i, l, attribute, name, value;\n                    attributes = attributes || specifiedAttributes(node);\n                    if (dom.is(node, 'img')) {\n                        var width = node.style.width, height = node.style.height, $node = $(node);\n                        if (width && pixelRe.test(width)) {\n                            $node.attr('width', parseInt(width, 10));\n                            dom.unstyle(node, { width: undefined });\n                        }\n                        if (height && pixelRe.test(height)) {\n                            $node.attr('height', parseInt(height, 10));\n                            dom.unstyle(node, { height: undefined });\n                        }\n                    }\n                    if (!attributes.length) {\n                        return;\n                    }\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        if (name == 'class' && value == 'k-table') {\n                            continue;\n                        }\n                        name = name.replace(scriptAttr, '');\n                        result.push(' ');\n                        result.push(name);\n                        result.push('=\"');\n                        if (name == 'style') {\n                            styleAttr(value || node.style.cssText);\n                        } else if (name == 'src' || name == 'href') {\n                            result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                        } else {\n                            result.push(dom.fillAttrs[name] ? name : value);\n                        }\n                        result.push('\"');\n                    }\n                }\n                function children(node, skip, skipEncoding) {\n                    for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                        child(childNode, skip, skipEncoding);\n                    }\n                }\n                function text(node) {\n                    return node.nodeValue.replace(/\\ufeff/g, '');\n                }\n                function isEmptyBomNode(node) {\n                    if (dom.isBom(node)) {\n                        do {\n                            node = node.parentNode;\n                            if (dom.is(node, TD) && node.childNodes.length === 1) {\n                                return true;\n                            }\n                            if (node.childNodes.length !== 1) {\n                                return false;\n                            }\n                        } while (!dom.isBlock(node));\n                        return true;\n                    }\n                    return false;\n                }\n                function child(node, skip, skipEncoding) {\n                    var nodeType = node.nodeType, tagName, mapper, parent, value, previous, jqNode;\n                    if (immutables && Editor.Immutables.immutable(node)) {\n                        result.push(immutables.serialize(node));\n                    } else if (nodeType == 1) {\n                        tagName = dom.name(node);\n                        jqNode = $(node);\n                        if (jqNode.hasClass('k-table-resize-handle-wrapper') || jqNode.hasClass('k-column-resize-handle-wrapper') || jqNode.hasClass('k-row-resize-handle-wrapper')) {\n                            return;\n                        }\n                        if (!tagName || dom.insignificant(node)) {\n                            return;\n                        }\n                        if (!options.scripts && (tagName == 'script' || tagName == 'k:script')) {\n                            return;\n                        }\n                        mapper = tagMap[tagName];\n                        if (mapper) {\n                            if (typeof mapper.semantic == 'undefined' || options.semantic ^ mapper.semantic) {\n                                mapper.start(node);\n                                children(node, false, mapper.skipEncoding);\n                                mapper.end(node);\n                                return;\n                            }\n                        }\n                        result.push('<');\n                        result.push(tagName);\n                        attr(node);\n                        if (dom.empty[tagName]) {\n                            result.push(' />');\n                        } else {\n                            result.push('>');\n                            children(node, skip || dom.is(node, 'pre'));\n                            result.push('</');\n                            result.push(tagName);\n                            result.push('>');\n                        }\n                    } else if (nodeType == 3) {\n                        if (isEmptyBomNode(node)) {\n                            result.push('&nbsp;');\n                            return;\n                        }\n                        value = text(node);\n                        if (!skip && supportsLeadingWhitespace) {\n                            parent = node.parentNode;\n                            previous = node.previousSibling;\n                            if (!previous) {\n                                previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                            }\n                            if (!previous || previous.innerHTML === '' || dom.isBlock(previous)) {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                            value = value.replace(/ +/, ' ');\n                        }\n                        result.push(skipEncoding ? value : dom.encode(value, options));\n                    } else if (nodeType == 4) {\n                        result.push('<![CDATA[');\n                        result.push(node.data);\n                        result.push(']]>');\n                    } else if (nodeType == 8) {\n                        if (node.data.indexOf('[CDATA[') < 0) {\n                            result.push('<!--');\n                            result.push(node.data);\n                            result.push('-->');\n                        } else {\n                            result.push('<!');\n                            result.push(node.data);\n                            result.push('>');\n                        }\n                    }\n                }\n                function textOnly(root) {\n                    var childrenCount = root.childNodes.length;\n                    var textChild = childrenCount && root.firstChild.nodeType == 3;\n                    return textChild && (childrenCount == 1 || childrenCount == 2 && dom.insignificant(root.lastChild));\n                }\n                function runCustom() {\n                    if ($.isFunction(options.custom)) {\n                        result = options.custom(result) || result;\n                    }\n                }\n                if (textOnly(root)) {\n                    result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                    runCustom();\n                    return result;\n                }\n                children(root);\n                result = result.join('');\n                runCustom();\n                if (result.replace(brRe, '').replace(emptyPRe, '') === '') {\n                    return '';\n                }\n                return result;\n            }\n        };\n        extend(Editor, { Serializer: Serializer });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/components', ['editor/serializer'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, DropDownList = kendo.ui.DropDownList, dom = kendo.ui.editor.Dom;\n        var SelectBox = DropDownList.extend({\n            init: function (element, options) {\n                var that = this;\n                DropDownList.fn.init.call(that, element, options);\n                if (kendo.support.mobileOS.ios) {\n                    this._initSelectOverlay();\n                    this.bind('dataBound', $.proxy(this._initSelectOverlay, this));\n                }\n                that.text(that.options.title);\n                that.element.attr('title', that.options.title);\n                that.wrapper.attr('title', that.options.title);\n                that.bind('open', function () {\n                    if (that.options.autoSize) {\n                        var list = that.list, listWidth;\n                        list.css({\n                            whiteSpace: 'nowrap',\n                            width: 'auto'\n                        });\n                        listWidth = list.width();\n                        if (listWidth > 0) {\n                            listWidth += 20;\n                        } else {\n                            listWidth = that._listWidth;\n                        }\n                        list.css('width', listWidth + kendo.support.scrollbar());\n                        that._listWidth = listWidth;\n                    }\n                });\n            },\n            options: {\n                name: 'SelectBox',\n                index: -1\n            },\n            _initSelectOverlay: function () {\n                var selectBox = this;\n                var value = selectBox.value();\n                var view = this.dataSource.view();\n                var item;\n                var html = '';\n                var encode = kendo.htmlEncode;\n                for (var i = 0; i < view.length; i++) {\n                    item = view[i];\n                    html += '<option value=\\'' + encode(item.value) + '\\'';\n                    if (item.value == value) {\n                        html += ' selected';\n                    }\n                    html += '>' + encode(item.text) + '</option>';\n                }\n                var select = $('<select class=\\'k-select-overlay\\'>' + html + '</select>');\n                var wrapper = $(this.element).closest('.k-widget');\n                wrapper.next('.k-select-overlay').remove();\n                select.insertAfter(wrapper);\n                select.on('change', function () {\n                    selectBox.value(this.value);\n                    selectBox.trigger('change');\n                });\n            },\n            value: function (value) {\n                var that = this, result = DropDownList.fn.value.call(that, value);\n                if (value === undefined) {\n                    return result;\n                }\n                if (!DropDownList.fn.value.call(that)) {\n                    that.text(that.options.title);\n                }\n            },\n            decorate: function (body) {\n                var that = this, dataSource = that.dataSource, items = dataSource.data(), i, tag, className, style;\n                if (body) {\n                    that.list.css('background-color', dom.getEffectiveBackground($(body)));\n                }\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || 'span';\n                    className = items[i].className;\n                    style = dom.inlineStyle(body, tag, { className: className });\n                    style = style.replace(/\"/g, '\\'');\n                    items[i].style = style + ';display:inline-block';\n                }\n                dataSource.trigger('change');\n            }\n        });\n        kendo.ui.plugin(SelectBox);\n        kendo.ui.editor.SelectBox = SelectBox;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/range', ['editor/components'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, browser = kendo.support.browser, dom = Editor.Dom, findNodeIndex = dom.findNodeIndex, isDataNode = dom.isDataNode, findClosestAncestor = dom.findClosestAncestor, getNodeLength = dom.getNodeLength, normalize = dom.normalize;\n        var SelectionUtils = {\n            selectionFromWindow: function (window) {\n                if (!('getSelection' in window)) {\n                    return new W3CSelection(window.document);\n                }\n                return window.getSelection();\n            },\n            selectionFromRange: function (range) {\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                return SelectionUtils.selectionFromDocument(rangeDocument);\n            },\n            selectionFromDocument: function (document) {\n                return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n            }\n        };\n        var W3CRange = Class.extend({\n            init: function (doc) {\n                $.extend(this, {\n                    ownerDocument: doc,\n                    startContainer: doc,\n                    endContainer: doc,\n                    commonAncestorContainer: doc,\n                    startOffset: 0,\n                    endOffset: 0,\n                    collapsed: true\n                });\n            },\n            setStart: function (node, offset) {\n                this.startContainer = node;\n                this.startOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, true);\n            },\n            setEnd: function (node, offset) {\n                this.endContainer = node;\n                this.endOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, false);\n            },\n            setStartBefore: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node));\n            },\n            setStartAfter: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node) + 1);\n            },\n            setEndBefore: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node));\n            },\n            setEndAfter: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n            },\n            selectNode: function (node) {\n                this.setStartBefore(node);\n                this.setEndAfter(node);\n            },\n            selectNodeContents: function (node) {\n                this.setStart(node, 0);\n                this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n            },\n            collapse: function (toStart) {\n                var that = this;\n                if (toStart) {\n                    that.setEnd(that.startContainer, that.startOffset);\n                } else {\n                    that.setStart(that.endContainer, that.endOffset);\n                }\n            },\n            deleteContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                (function deleteSubtree(iterator) {\n                    while (iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            deleteSubtree(iterator.getSubtreeIterator());\n                        } else {\n                            iterator.remove();\n                        }\n                    }\n                }(new RangeIterator(range)));\n            },\n            cloneContents: function () {\n                var document = RangeUtils.documentFromRange(this);\n                return function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(this));\n            },\n            extractContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                var document = RangeUtils.documentFromRange(that);\n                return function extractSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            node = node.cloneNode(false);\n                            node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                        } else {\n                            iterator.remove(that.originalRange);\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(range));\n            },\n            insertNode: function (node) {\n                var that = this;\n                if (isDataNode(that.startContainer)) {\n                    if (that.startOffset != that.startContainer.nodeValue.length) {\n                        dom.splitDataNode(that.startContainer, that.startOffset);\n                    }\n                    dom.insertAfter(node, that.startContainer);\n                } else {\n                    dom.insertAt(that.startContainer, node, that.startOffset);\n                }\n                that.setStart(that.startContainer, that.startOffset);\n            },\n            cloneRange: function () {\n                return $.extend(new W3CRange(this.ownerDocument), {\n                    startContainer: this.startContainer,\n                    endContainer: this.endContainer,\n                    commonAncestorContainer: this.commonAncestorContainer,\n                    startOffset: this.startOffset,\n                    endOffset: this.endOffset,\n                    collapsed: this.collapsed,\n                    originalRange: this\n                });\n            },\n            toString: function () {\n                var startNodeName = this.startContainer.nodeName, endNodeName = this.endContainer.nodeName;\n                return [\n                    startNodeName == '#text' ? this.startContainer.nodeValue : startNodeName,\n                    '(',\n                    this.startOffset,\n                    ') : ',\n                    endNodeName == '#text' ? this.endContainer.nodeValue : endNodeName,\n                    '(',\n                    this.endOffset,\n                    ')'\n                ].join('');\n            }\n        });\n        W3CRange.fromNode = function (node) {\n            return new W3CRange(node.ownerDocument);\n        };\n        function compareBoundaries(start, end, startOffset, endOffset) {\n            if (start == end) {\n                return endOffset - startOffset;\n            }\n            var container = end;\n            while (container && container.parentNode != start) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return findNodeIndex(container) - startOffset;\n            }\n            container = start;\n            while (container && container.parentNode != end) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return endOffset - findNodeIndex(container) - 1;\n            }\n            var root = dom.commonAncestor(start, end);\n            var startAncestor = start;\n            while (startAncestor && startAncestor.parentNode != root) {\n                startAncestor = startAncestor.parentNode;\n            }\n            if (!startAncestor) {\n                startAncestor = root;\n            }\n            var endAncestor = end;\n            while (endAncestor && endAncestor.parentNode != root) {\n                endAncestor = endAncestor.parentNode;\n            }\n            if (!endAncestor) {\n                endAncestor = root;\n            }\n            if (startAncestor == endAncestor) {\n                return 0;\n            }\n            return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n        }\n        function fixIvalidRange(range, toStart) {\n            function isInvalidRange(range) {\n                try {\n                    return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n                } catch (ex) {\n                    return true;\n                }\n            }\n            if (isInvalidRange(range)) {\n                if (toStart) {\n                    range.commonAncestorContainer = range.endContainer = range.startContainer;\n                    range.endOffset = range.startOffset;\n                } else {\n                    range.commonAncestorContainer = range.startContainer = range.endContainer;\n                    range.startOffset = range.endOffset;\n                }\n                range.collapsed = true;\n            }\n        }\n        function updateRangeProperties(range) {\n            range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n            var node = range.startContainer;\n            while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n                node = node.parentNode;\n            }\n            range.commonAncestorContainer = node;\n        }\n        var RangeIterator = Class.extend({\n            init: function (range) {\n                $.extend(this, {\n                    range: range,\n                    _current: null,\n                    _next: null,\n                    _end: null\n                });\n                if (range.collapsed) {\n                    return;\n                }\n                var root = range.commonAncestorContainer;\n                this._next = range.startContainer == root && !isDataNode(range.startContainer) ? range.startContainer.childNodes[range.startOffset] : findClosestAncestor(root, range.startContainer);\n                this._end = range.endContainer == root && !isDataNode(range.endContainer) ? range.endContainer.childNodes[range.endOffset] : findClosestAncestor(root, range.endContainer).nextSibling;\n            },\n            hasNext: function () {\n                return !!this._next;\n            },\n            next: function () {\n                var that = this, current = that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                if (isDataNode(that._current)) {\n                    if (that.range.endContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                    }\n                    if (that.range.startContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(0, that.range.startOffset);\n                    }\n                }\n                return current;\n            },\n            traverse: function (callback) {\n                var that = this, current;\n                function next() {\n                    that._current = that._next;\n                    that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                    return that._current;\n                }\n                while (current = next()) {\n                    if (that.hasPartialSubtree()) {\n                        that.getSubtreeIterator().traverse(callback);\n                    } else {\n                        callback(current);\n                    }\n                }\n                return current;\n            },\n            remove: function (originalRange) {\n                var that = this, inStartContainer = that.range.startContainer == that._current, inEndContainer = that.range.endContainer == that._current, start, end, delta;\n                if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                    start = inStartContainer ? that.range.startOffset : 0;\n                    end = inEndContainer ? that.range.endOffset : that._current.length;\n                    delta = end - start;\n                    if (originalRange && (inStartContainer || inEndContainer)) {\n                        if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                            originalRange.startOffset -= delta;\n                        }\n                        if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                            originalRange.endOffset -= delta;\n                        }\n                    }\n                    that._current.deleteData(start, delta);\n                } else {\n                    var parent = that._current.parentNode;\n                    if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                        var nodeIndex = findNodeIndex(that._current);\n                        if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                            originalRange.startOffset -= 1;\n                        }\n                        if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                            originalRange.endOffset -= 1;\n                        }\n                    }\n                    dom.remove(that._current);\n                }\n            },\n            hasPartialSubtree: function () {\n                return !isDataNode(this._current) && (dom.isAncestorOrSelf(this._current, this.range.startContainer) || dom.isAncestorOrSelf(this._current, this.range.endContainer));\n            },\n            getSubtreeIterator: function () {\n                return new RangeIterator(this.getSubRange());\n            },\n            getSubRange: function () {\n                var that = this, subRange = that.range.cloneRange();\n                subRange.selectNodeContents(that._current);\n                if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                    subRange.setStart(that.range.startContainer, that.range.startOffset);\n                }\n                if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                    subRange.setEnd(that.range.endContainer, that.range.endOffset);\n                }\n                return subRange;\n            }\n        });\n        var W3CSelection = Class.extend({\n            init: function (doc) {\n                this.ownerDocument = doc;\n                this.rangeCount = 1;\n            },\n            addRange: function (range) {\n                var textRange = this.ownerDocument.body.createTextRange();\n                adoptContainer(textRange, range, false);\n                adoptContainer(textRange, range, true);\n                textRange.select();\n            },\n            removeAllRanges: function () {\n                var selection = this.ownerDocument.selection;\n                if (selection.type != 'None') {\n                    selection.empty();\n                }\n            },\n            getRangeAt: function () {\n                var textRange, range = new W3CRange(this.ownerDocument), selection = this.ownerDocument.selection, element, commonAncestor;\n                try {\n                    textRange = selection.createRange();\n                    element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                    if (element.ownerDocument != this.ownerDocument) {\n                        return range;\n                    }\n                } catch (ex) {\n                    return range;\n                }\n                if (selection.type == 'Control') {\n                    range.selectNode(textRange.item(0));\n                } else {\n                    commonAncestor = textRangeContainer(textRange);\n                    adoptEndPoint(textRange, range, commonAncestor, true);\n                    adoptEndPoint(textRange, range, commonAncestor, false);\n                    if (range.startContainer.nodeType == 9) {\n                        range.setStart(range.endContainer, range.startOffset);\n                    }\n                    if (range.endContainer.nodeType == 9) {\n                        range.setEnd(range.startContainer, range.endOffset);\n                    }\n                    if (textRange.compareEndPoints('StartToEnd', textRange) === 0) {\n                        range.collapse(false);\n                    }\n                    var startContainer = range.startContainer, endContainer = range.endContainer, body = this.ownerDocument.body;\n                    if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) {\n                        var movedStart = false, movedEnd = false;\n                        while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                            startContainer = startContainer.parentNode;\n                            movedStart = true;\n                        }\n                        while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                            endContainer = endContainer.parentNode;\n                            movedEnd = true;\n                        }\n                        if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                            range.setStart(startContainer, 0);\n                            range.setEnd(endContainer, getNodeLength(body));\n                        }\n                    }\n                }\n                return range;\n            }\n        });\n        function textRangeContainer(textRange) {\n            var left = textRange.duplicate(), right = textRange.duplicate();\n            left.collapse(true);\n            right.collapse(false);\n            return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n        }\n        function adoptContainer(textRange, range, start) {\n            var container = range[start ? 'startContainer' : 'endContainer'], offset = range[start ? 'startOffset' : 'endOffset'], textOffset = 0, isData = isDataNode(container), anchorNode = isData ? container : container.childNodes[offset] || null, anchorParent = isData ? container.parentNode : container, doc = range.ownerDocument, cursor = doc.body.createTextRange(), cursorNode;\n            if (container.nodeType == 3 || container.nodeType == 4) {\n                textOffset = offset;\n            }\n            if (!anchorParent) {\n                anchorParent = doc.body;\n            }\n            if (anchorParent.nodeName.toLowerCase() == 'img') {\n                cursor.moveToElementText(anchorParent);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            } else {\n                cursorNode = anchorParent.insertBefore(dom.create(doc, 'a'), anchorNode);\n                cursor.moveToElementText(cursorNode);\n                dom.remove(cursorNode);\n                cursor[start ? 'moveStart' : 'moveEnd']('character', textOffset);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            }\n        }\n        function adoptEndPoint(textRange, range, commonAncestor, start) {\n            var cursorNode = dom.create(range.ownerDocument, 'a'), cursor = textRange.duplicate(), comparison = start ? 'StartToStart' : 'StartToEnd', result, parent, target, previous, next, args, index, appended = false;\n            cursorNode.innerHTML = '\\uFEFF';\n            cursor.collapse(start);\n            parent = cursor.parentElement();\n            if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n                parent = commonAncestor;\n            }\n            do {\n                if (appended) {\n                    parent.insertBefore(cursorNode, cursorNode.previousSibling);\n                } else {\n                    parent.appendChild(cursorNode);\n                    appended = true;\n                }\n                cursor.moveToElementText(cursorNode);\n            } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n            target = cursorNode.nextSibling;\n            if (result == -1 && isDataNode(target)) {\n                cursor.setEndPoint(start ? 'EndToStart' : 'EndToEnd', textRange);\n                dom.remove(cursorNode);\n                args = [\n                    target,\n                    cursor.text.length\n                ];\n            } else {\n                previous = !start && cursorNode.previousSibling;\n                next = start && cursorNode.nextSibling;\n                if (isDataNode(next)) {\n                    args = [\n                        next,\n                        0\n                    ];\n                } else if (isDataNode(previous)) {\n                    args = [\n                        previous,\n                        previous.length\n                    ];\n                } else {\n                    index = findNodeIndex(cursorNode);\n                    if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                        args = [\n                            parent.nextSibling,\n                            0\n                        ];\n                    } else {\n                        args = [\n                            parent,\n                            index\n                        ];\n                    }\n                }\n                dom.remove(cursorNode);\n            }\n            range[start ? 'setStart' : 'setEnd'].apply(range, args);\n        }\n        var RangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    function visit(node) {\n                        if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                    new RangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var ImmutablesRangeIterator = RangeIterator.extend({\n            hasPartialSubtree: function () {\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n            },\n            getSubtreeIterator: function () {\n                return new ImmutablesRangeIterator(this.getSubRange());\n            }\n        });\n        var ImmutablesRangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                    function visit(node) {\n                        if (immutable && !immutable(node)) {\n                            if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                                nodes.push(node);\n                            } else {\n                                node = node.firstChild;\n                                while (node) {\n                                    visit(node);\n                                    node = node.nextSibling;\n                                }\n                            }\n                        }\n                    }\n                    new ImmutablesRangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var RestorePoint = Class.extend({\n            init: function (range, body, options) {\n                var that = this;\n                that.range = range;\n                that.rootNode = RangeUtils.documentFromRange(range);\n                that.body = body || that.getEditable(range);\n                if (dom.name(that.body) != 'body') {\n                    that.rootNode = that.body;\n                }\n                that.startContainer = that.nodeToPath(range.startContainer);\n                that.endContainer = that.nodeToPath(range.endContainer);\n                that.startOffset = that.offset(range.startContainer, range.startOffset);\n                that.endOffset = that.offset(range.endContainer, range.endOffset);\n                that.immutables = options && options.immutables;\n                if (that.immutables) {\n                    that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n                }\n                that.html = that.body.innerHTML;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            index: function (node) {\n                var result = 0, lastType = node.nodeType;\n                while (node = node.previousSibling) {\n                    var nodeType = node.nodeType;\n                    if (nodeType != 3 || lastType != nodeType) {\n                        result++;\n                    }\n                    lastType = nodeType;\n                }\n                return result;\n            },\n            getEditable: function (range) {\n                var root = range.commonAncestorContainer;\n                while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == 'false'))) {\n                    root = root.parentNode;\n                }\n                return root;\n            },\n            restoreHtml: function () {\n                var that = this;\n                dom.removeChildren(that.body);\n                that.body.innerHTML = that.html;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            offset: function (node, value) {\n                if (node.nodeType == 3) {\n                    while ((node = node.previousSibling) && node.nodeType == 3) {\n                        value += node.nodeValue.length;\n                    }\n                }\n                return value;\n            },\n            nodeToPath: function (node) {\n                var path = [];\n                while (node != this.rootNode) {\n                    path.push(this.index(node));\n                    node = node.parentNode;\n                }\n                return path;\n            },\n            toRangePoint: function (range, start, path, denormalizedOffset) {\n                var node = this.rootNode, length = path.length, offset = denormalizedOffset;\n                while (length-- && node) {\n                    node = node.childNodes[path[length]];\n                }\n                while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                    offset -= node.nodeValue.length;\n                    node = node.nextSibling;\n                }\n                if (node && offset >= 0) {\n                    range[start ? 'setStart' : 'setEnd'](node, offset);\n                }\n            },\n            toRange: function () {\n                var that = this, result = that.range.cloneRange();\n                that.toRangePoint(result, true, that.startContainer, that.startOffset);\n                that.toRangePoint(result, false, that.endContainer, that.endOffset);\n                return result;\n            }\n        });\n        var Marker = Class.extend({\n            init: function () {\n                this.caret = null;\n            },\n            addCaret: function (range) {\n                var that = this;\n                var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n                range.insertNode(caret);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                range.selectNode(caret);\n                return caret;\n            },\n            removeCaret: function (range) {\n                var that = this, previous = that.caret.previousSibling, startOffset = 0;\n                if (previous) {\n                    startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n                }\n                var container = that.caret.parentNode;\n                var containerIndex = previous ? findNodeIndex(previous) : 0;\n                dom.remove(that.caret);\n                normalize(container);\n                var node = container.childNodes[containerIndex];\n                if (isDataNode(node)) {\n                    range.setStart(node, startOffset);\n                } else if (node) {\n                    var textNode = dom.lastTextNode(node);\n                    if (textNode) {\n                        range.setStart(textNode, textNode.nodeValue.length);\n                    } else {\n                        range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                    }\n                } else {\n                    if (!browser.msie && !container.innerHTML) {\n                        container.innerHTML = '<br _moz_dirty=\"\" />';\n                    }\n                    range.selectNodeContents(container);\n                }\n                range.collapse(true);\n            },\n            add: function (range, expand) {\n                var that = this;\n                var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n                var doc = RangeUtils.documentFromRange(range);\n                if (expand && range.collapsed) {\n                    that.addCaret(range);\n                    range = RangeUtils.expand(range);\n                }\n                var rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(false);\n                that.end = dom.create(doc, 'span', { className: 'k-marker' });\n                rangeBoundary.insertNode(that.end);\n                rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(true);\n                that.start = that.end.cloneNode(true);\n                rangeBoundary.insertNode(that.start);\n                that._removeDeadMarkers(that.start, that.end);\n                if (collapsed) {\n                    var bom = doc.createTextNode('\\uFEFF');\n                    dom.insertAfter(bom.cloneNode(), that.start);\n                    dom.insertBefore(bom, that.end);\n                }\n                normalize(range.commonAncestorContainer);\n                range.setStartBefore(that.start);\n                range.setEndAfter(that.end);\n                return range;\n            },\n            _removeDeadMarkers: function (start, end) {\n                if (start.previousSibling && start.previousSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(start.previousSibling);\n                }\n                if (end.nextSibling && end.nextSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(end.nextSibling);\n                }\n            },\n            _normalizedIndex: function (node) {\n                var index = findNodeIndex(node);\n                var pointer = node;\n                while (pointer.previousSibling) {\n                    if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                        index--;\n                    }\n                    pointer = pointer.previousSibling;\n                }\n                return index;\n            },\n            remove: function (range) {\n                var that = this, start = that.start, end = that.end, shouldNormalizeStart, shouldNormalizeEnd, shouldNormalize;\n                normalize(range.commonAncestorContainer);\n                while (!start.nextSibling && start.parentNode) {\n                    start = start.parentNode;\n                }\n                while (!end.previousSibling && end.parentNode) {\n                    end = end.parentNode;\n                }\n                shouldNormalizeStart = start.previousSibling && start.previousSibling.nodeType == 3 && (start.nextSibling && start.nextSibling.nodeType == 3);\n                shouldNormalizeEnd = end.previousSibling && end.previousSibling.nodeType == 3 && (end.nextSibling && end.nextSibling.nodeType == 3);\n                shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n                start = start.nextSibling;\n                end = end.previousSibling;\n                var isBomSelected = start === end && dom.isBom(start);\n                if (isBomSelected && start.length > 1) {\n                    start.nodeValue = start.nodeValue.charAt(0);\n                }\n                var collapsed = isBomSelected;\n                var collapsedToStart = false;\n                if (start == that.end) {\n                    collapsedToStart = !!that.start.previousSibling;\n                    start = end = that.start.previousSibling || that.end.nextSibling;\n                    collapsed = true;\n                }\n                dom.remove(that.start);\n                dom.remove(that.end);\n                if (!start || !end) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    range.collapse(true);\n                    return;\n                }\n                var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n                var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n                if (start.nodeType == 3) {\n                    while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                        start = start.previousSibling;\n                        startOffset += start.nodeValue.length;\n                    }\n                }\n                if (end.nodeType == 3) {\n                    while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                        end = end.previousSibling;\n                        endOffset += end.nodeValue.length;\n                    }\n                }\n                var startParent = start.parentNode;\n                var endParent = end.parentNode;\n                var startIndex = this._normalizedIndex(start);\n                var endIndex = this._normalizedIndex(end);\n                normalize(startParent);\n                if (start.nodeType == 3) {\n                    start = startParent.childNodes[startIndex];\n                }\n                normalize(endParent);\n                if (end.nodeType == 3) {\n                    end = endParent.childNodes[endIndex];\n                }\n                if (collapsed) {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                    }\n                    range.collapse(true);\n                } else {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range.setStartBefore(start);\n                    }\n                    if (end.nodeType == 3) {\n                        range.setEnd(end, endOffset);\n                    } else {\n                        range.setEndAfter(end);\n                    }\n                }\n                if (that.caret) {\n                    that.removeCaret(range);\n                }\n            }\n        });\n        var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n        var RangeUtils = {\n            nodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                return nodes;\n            },\n            textNodes: function (range) {\n                return new RangeEnumerator(range).enumerate();\n            },\n            editableTextNodes: function (range) {\n                var nodes = [], immutableParent = Editor.Immutables && Editor.Immutables.immutableParent;\n                if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                    nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                }\n                return nodes;\n            },\n            documentFromRange: function (range) {\n                var startContainer = range.startContainer;\n                return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n            },\n            createRange: function (document) {\n                if (browser.msie && browser.version < 9) {\n                    return new W3CRange(document);\n                }\n                return document.createRange();\n            },\n            selectRange: function (range) {\n                var image = RangeUtils.image(range);\n                if (image) {\n                    range.setStartAfter(image);\n                    range.setEndAfter(image);\n                }\n                var selection = SelectionUtils.selectionFromRange(range);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            },\n            stringify: function (range) {\n                return kendo.format('{0}:{1} - {2}:{3}', dom.name(range.startContainer), range.startOffset, dom.name(range.endContainer), range.endOffset);\n            },\n            split: function (range, node, trim) {\n                function partition(start) {\n                    var partitionRange = range.cloneRange();\n                    partitionRange.collapse(start);\n                    partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                    var contents = partitionRange.extractContents();\n                    if (trim) {\n                        contents = dom.trim(contents);\n                    }\n                    dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n                }\n                partition(true);\n                partition(false);\n            },\n            mapAll: function (range, map) {\n                var nodes = [];\n                new RangeIterator(range).traverse(function (node) {\n                    var mapped = map(node);\n                    if (mapped && $.inArray(mapped, nodes) < 0) {\n                        nodes.push(mapped);\n                    }\n                });\n                return nodes;\n            },\n            getAll: function (range, predicate) {\n                var selector = predicate;\n                if (typeof predicate == 'string') {\n                    predicate = function (node) {\n                        return dom.is(node, selector);\n                    };\n                }\n                return RangeUtils.mapAll(range, function (node) {\n                    if (predicate(node)) {\n                        return node;\n                    }\n                });\n            },\n            getMarkers: function (range) {\n                return RangeUtils.getAll(range, function (node) {\n                    return node.className == 'k-marker';\n                });\n            },\n            image: function (range) {\n                var nodes = RangeUtils.getAll(range, 'img');\n                if (nodes.length == 1) {\n                    return nodes[0];\n                }\n            },\n            isStartOf: function (originalRange, node) {\n                if (originalRange.startOffset !== 0) {\n                    return false;\n                }\n                var range = originalRange.cloneRange();\n                while (range.startOffset === 0 && range.startContainer != node) {\n                    var index = dom.findNodeIndex(range.startContainer);\n                    var parent = range.startContainer.parentNode;\n                    while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                        index--;\n                    }\n                    range.setStart(parent, index);\n                }\n                return range.startOffset === 0 && range.startContainer == node;\n            },\n            isEndOf: function (originalRange, node) {\n                var range = originalRange.cloneRange();\n                range.collapse(false);\n                var start = range.startContainer;\n                if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                    range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                    range.collapse(true);\n                }\n                range.setEnd(node, dom.getNodeLength(node));\n                var nodes = [];\n                function visit(node) {\n                    if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                        nodes.push(node);\n                    }\n                }\n                new RangeIterator(range).traverse(visit);\n                return !nodes.length;\n            },\n            wrapSelectedElements: function (range) {\n                var startEditable = dom.editableParent(range.startContainer);\n                var endEditable = dom.editableParent(range.endContainer);\n                while (range.startOffset === 0 && range.startContainer != startEditable) {\n                    range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n                }\n                function isEnd(offset, container) {\n                    var length = dom.getNodeLength(container);\n                    if (offset == length) {\n                        return true;\n                    }\n                    for (var i = offset; i < length; i++) {\n                        if (!dom.insignificant(container.childNodes[i])) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                    range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n                }\n                return range;\n            },\n            expand: function (range) {\n                var result = range.cloneRange();\n                var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n                var endContainer = result.endContainer.childNodes[result.endOffset];\n                if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                    return result;\n                }\n                var beforeCaret = startContainer.nodeValue;\n                var afterCaret = endContainer.nodeValue;\n                if (!beforeCaret || !afterCaret) {\n                    return result;\n                }\n                var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                var endOffset = afterCaret.search(boundary);\n                if (!startOffset || !endOffset) {\n                    return result;\n                }\n                endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n                startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n                result.setStart(startContainer, startOffset);\n                result.setEnd(endContainer, endOffset);\n                return result;\n            },\n            isExpandable: function (range) {\n                var node = range.startContainer;\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                if (node == rangeDocument || node == rangeDocument.body) {\n                    return false;\n                }\n                var result = range.cloneRange();\n                var value = node.nodeValue;\n                if (!value) {\n                    return false;\n                }\n                var beforeCaret = value.substring(0, result.startOffset);\n                var afterCaret = value.substring(result.startOffset);\n                var startOffset = 0, endOffset = 0;\n                if (beforeCaret) {\n                    startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                }\n                if (afterCaret) {\n                    endOffset = afterCaret.search(boundary);\n                }\n                return startOffset && endOffset;\n            }\n        };\n        extend(Editor, {\n            SelectionUtils: SelectionUtils,\n            W3CRange: W3CRange,\n            RangeIterator: RangeIterator,\n            W3CSelection: W3CSelection,\n            RangeEnumerator: RangeEnumerator,\n            RestorePoint: RestorePoint,\n            Marker: Marker,\n            RangeUtils: RangeUtils\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/immutables', ['editor/range'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, dom = Editor.Dom, template = kendo.template, RangeUtils = Editor.RangeUtils, complexBlocks = [\n                'ul',\n                'ol',\n                'tbody',\n                'thead',\n                'table'\n            ], toolsToBeUpdated = [\n                'bold',\n                'italic',\n                'underline',\n                'strikethrough',\n                'superscript',\n                'subscript',\n                'forecolor',\n                'backcolor',\n                'fontname',\n                'fontsize',\n                'createlink',\n                'unlink',\n                'autolink',\n                'addcolumnleft',\n                'addcolumnright',\n                'addrowabove',\n                'addrowbelow',\n                'deleterow',\n                'deletecolumn',\n                'mergecells',\n                'formatting',\n                'cleanformatting'\n            ], IMMUTABALE = 'k-immutable', IMMUTABALE_MARKER_SELECTOR = '[' + IMMUTABALE + ']', IMMUTABLE_SELECTOR = '[contenteditable=\\'false\\']';\n        var rootCondition = function (node) {\n            return $(node).is('body,.k-editor');\n        };\n        var immutable = function (node) {\n            return node.getAttribute && node.getAttribute('contenteditable') == 'false';\n        };\n        var immutableParent = function (node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n        var expandImmutablesIn = function (range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n        var immutablesContext = function (range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        var randomId = function (length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n        var removeImmutables = function (root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n            $(root).find(IMMUTABLE_SELECTOR).each(function (i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = '<' + nodeName + ' ' + IMMUTABALE + '=\\'' + id + '\\'></' + nodeName + '>';\n                serializedImmutables[id] = {\n                    node: node,\n                    style: $(node).attr('style')\n                };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n            return serializedImmutables;\n        };\n        var restoreImmutables = function (root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function (i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr('style')) {\n                    $(immutable.node).removeAttr('style').attr('style', immutable.style);\n                }\n            });\n        };\n        var deletingKey = function (keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function (tool) {\n            var options = tool ? tool.options : undefined;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n        var Immutables = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n                var tools = editor.toolbar.tools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n            serialize: function (node) {\n                var result = this._toHtml(node), id;\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n            _toHtml: function (node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n                switch (serializationType) {\n                case 'string':\n                    return template(serialization)(node);\n                case 'function':\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return '<' + nodeName + '></' + nodeName + '>';\n                }\n            },\n            deserialize: function (node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function () {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n                that.serializedImmutables = {};\n            },\n            randomId: function (length) {\n                return randomId(length);\n            },\n            keydown: function (e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = isDeleting && this._cancelDeleting(e, range) || !isDeleting && this._cancelTyping(e, range);\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n            _cancelTyping: function (e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n                return range.collapsed && !keyboard.typingInProgress && keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n            _cancelDeleting: function (e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, 'li');\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, 'li');\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n            nextImmutable: function (range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || (forwards && RangeUtils.isEndOf(range, commonContainer) || !forwards && RangeUtils.isStartOf(range, commonContainer))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n            _removeImmutable: function (immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n            _nextNode: function (node, forwards) {\n                var sibling = forwards ? 'nextSibling' : 'previousSibling';\n                var current = node, next;\n                while (current && !next) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n        Editor.Immutables = Immutables;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/command', ['editor/immutables'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, extend = $.extend;\n        function finishUpdate(editor, startRestorePoint) {\n            var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            var command = new GenericCommand(startRestorePoint, endRestorePoint);\n            command.editor = editor;\n            editor.undoRedoStack.push(command);\n            return endRestorePoint;\n        }\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n                this.marker = new Marker();\n                this.formatter = options.formatter;\n            },\n            getRange: function () {\n                return this.restorePoint.toRange();\n            },\n            lockRange: function (expand) {\n                return this.marker.add(this.getRange(), expand);\n            },\n            releaseRange: function (range) {\n                this.marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                this.editor.selectRange(point.toRange());\n            },\n            redo: function () {\n                this.exec();\n            },\n            createDialog: function (content, options) {\n                var editor = this.editor;\n                return $(content).appendTo(document.body).kendoWindow(extend({}, editor.options.dialogOptions, options)).closest('.k-window').toggleClass('k-rtl', kendo.support.isRtl(editor.wrapper)).end();\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.formatter.editor = this.editor;\n                this.formatter.toggle(range);\n                this.releaseRange(range);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            expandImmutablesIn: function (range) {\n                if (this.immutables()) {\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    this.restorePoint = new RestorePoint(range, this.editor.body);\n                }\n            }\n        });\n        var GenericCommand = Class.extend({\n            init: function (startRestorePoint, endRestorePoint) {\n                this.body = startRestorePoint.body;\n                this.startRestorePoint = startRestorePoint;\n                this.endRestorePoint = endRestorePoint;\n            },\n            redo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.endRestorePoint.html;\n                this.editor.selectRange(this.endRestorePoint.toRange());\n            },\n            undo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.startRestorePoint.html;\n                this.editor.selectRange(this.startRestorePoint.toRange());\n            }\n        });\n        extend(editorNS, {\n            _finishUpdate: finishUpdate,\n            Command: Command,\n            GenericCommand: GenericCommand\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/toolbar', ['editor/range'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var editorNS = ui.editor;\n        var Widget = ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var keys = kendo.keys;\n        var NS = '.kendoEditor';\n        var EditorUtils = editorNS.EditorUtils;\n        var ToolTemplate = editorNS.ToolTemplate;\n        var Tool = editorNS.Tool;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var OVERFLOWANCHOR = 'overflowAnchor';\n        var focusable = '.k-tool-group:visible .k-tool:not(.k-state-disabled),' + '.k-tool.k-overflow-anchor:visible,' + '.k-tool-group:visible .k-colorpicker,' + '.k-tool-group:visible .k-selectbox,' + '.k-tool-group:visible .k-dropdown,' + '.k-tool-group:visible .k-combobox .k-input';\n        var toolNamesByCssClass = {\n            'k-i-sup-script': 'superscript',\n            'k-i-sub-script': 'subscript',\n            'k-i-align-left': 'justifyLeft',\n            'k-i-align-center': 'justifyCenter',\n            'k-i-align-right': 'justifyRight',\n            'k-i-align-justify': 'justifyFull',\n            'k-i-list-unordered': 'insertUnorderedList',\n            'k-i-list-ordered': 'insertOrderedList',\n            'k-i-login': 'import',\n            'k-i-indent-increase': 'indent',\n            'k-i-indent-decrease': 'outdent',\n            'k-i-link-horizontal': 'createLink',\n            'k-i-unlink-horizontal': 'unlink',\n            'k-i-image': 'insertImage',\n            'k-i-file-add': 'insertFile',\n            'k-i-html': 'viewHtml',\n            'k-i-foreground-color': 'foreColor',\n            'k-i-paint': 'backColor',\n            'k-i-table-insert': 'createTable',\n            'k-i-table-column-insert-left': 'addColumnLeft',\n            'k-i-table-column-insert-right': 'addColumnRight',\n            'k-i-table-row-insert-above': 'addRowAbove',\n            'k-i-table-row-insert-below': 'addRowBelow',\n            'k-i-table-row-delete': 'deleteRow',\n            'k-i-table-column-delete': 'deleteColumn',\n            'k-i-table-properties': 'tableWizard',\n            'k-i-table-wizard': 'tableWizardInsert',\n            'k-i-clear-css': 'cleanFormatting',\n            'k-i-cells-merge-horizontally': 'mergeCellsHorizontally',\n            'k-i-cells-merge-vertically': 'mergeCellsVertically',\n            'k-i-cell-split-horizontally': 'splitCellHorizontally',\n            'k-i-cell-split-vertically': 'splitCellVertically',\n            'k-i-copy-format': 'copyFormat',\n            'k-i-apply-format': 'applyFormat'\n        };\n        var OverflowAnchorTool = Tool.extend({\n            initialize: function (ui, options) {\n                var toolbar = options.editor.toolbar;\n                ui.attr('aria-controls', options.editor.element.attr('id')).on('click', $.proxy(function () {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n            },\n            options: { name: OVERFLOWANCHOR },\n            command: $.noop,\n            update: $.noop,\n            destroy: $.noop\n        });\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n            key: '',\n            ctrl: true,\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n        }));\n        var Toolbar = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = extend({}, options, { name: 'EditorToolbar' });\n                Widget.fn.init.call(that, element, options);\n                if (options.popup) {\n                    that._initPopup();\n                }\n                if (options.resizable && options.resizable.toolbar) {\n                    that._resizeHandler = kendo.onResize(function () {\n                        that.resize(true);\n                    });\n                    that.element.addClass('k-toolbar-resizable');\n                }\n            },\n            events: ['execute'],\n            groups: {\n                basic: [\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strikethrough'\n                ],\n                scripts: [\n                    'subscript',\n                    'superscript'\n                ],\n                alignment: [\n                    'justifyLeft',\n                    'justifyCenter',\n                    'justifyRight',\n                    'justifyFull'\n                ],\n                links: [\n                    'insertImage',\n                    'insertFile',\n                    'createLink',\n                    'unlink'\n                ],\n                lists: [\n                    'insertUnorderedList',\n                    'insertOrderedList',\n                    'indent',\n                    'outdent'\n                ],\n                tablesInsert: ['createTable'],\n                tablesAddDelete: [\n                    'addColumnLeft',\n                    'addColumnRight',\n                    'addRowAbove',\n                    'addRowBelow',\n                    'deleteRow',\n                    'deleteColumn'\n                ],\n                tablesMerge: [\n                    'mergeCellsHorizontally',\n                    'mergeCellsVertically',\n                    'splitCellHorizontally',\n                    'splitCellVertically'\n                ],\n                advanced: [\n                    'viewHtml',\n                    'cleanFormatting',\n                    'print',\n                    'pdf',\n                    'exportAs',\n                    'import'\n                ],\n                fonts: [\n                    'fontName',\n                    'fontSize'\n                ],\n                colors: [\n                    'foreColor',\n                    'backColor'\n                ],\n                formatPainter: [\n                    'copyFormat',\n                    'applyFormat'\n                ]\n            },\n            overflowFlaseTools: [\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                'insertHtml'\n            ],\n            _initPopup: function () {\n                var that = this;\n                this.window = $(this.element).wrap('<div class=\\'editorToolbarWindow\\' />').parent().prepend('<span class=\\'k-editortoolbar-dragHandle\\'><span class=\\'k-icon k-i-handler-drag\\'></span></span>').kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: { dragHandle: '.k-editortoolbar-dragHandle' },\n                    animation: {\n                        open: { effects: 'fade:in' },\n                        close: { effects: 'fade:out' }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function () {\n                        this._moved = true;\n                    }\n                }).on('mousedown', function (e) {\n                    if (!$(e.target).is('.k-icon')) {\n                        that.preventPopupHide = true;\n                    }\n                }).on('focusout', function () {\n                    that.options.editor.element.focusout();\n                }).data('kendoWindow');\n            },\n            _toggleOverflowStyles: function (element, show) {\n                element.find('> li').toggleClass('k-item', show).find('.k-tool:not(.k-state-disabled), .k-overflow-button').toggleClass('k-overflow-button', show);\n            },\n            _initOverflowPopup: function (ui) {\n                var that = this;\n                var popupTemplate = '<ul class=\\'k-editor-overflow-popup k-overflow-container k-list-container\\'></ul>';\n                that.overflowPopup = $(popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    origin: kendo.support.isRtl(that.element) ? 'bottom left' : 'bottom right',\n                    position: kendo.support.isRtl(that.element) ? 'top left' : 'top right',\n                    copyAnchorStyles: false,\n                    open: function (e) {\n                        if (this.element.is(':empty')) {\n                            e.preventDefault();\n                        }\n                        that._toggleOverflowStyles(this.element, true);\n                        ui.attr('aria-expanded', true);\n                    },\n                    close: function () {\n                        ui.attr('aria-expanded', false);\n                    },\n                    activate: proxy(that.focusOverflowPopup, that)\n                }).data('kendoPopup');\n            },\n            items: function () {\n                var isResizable = this.options.resizable && this.options.resizable.toolbar, popup, result;\n                result = this.element.children().find('> *, select');\n                if (isResizable) {\n                    popup = this.overflowPopup;\n                    result = result.add(popup.element.children().find('> *'));\n                }\n                return result;\n            },\n            focused: function () {\n                return this.element.find('.k-state-focused').length > 0 || this.preventPopupHide || this.overflowPopup && this.overflowPopup.visible();\n            },\n            toolById: function (name) {\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (id.toLowerCase() == name) {\n                        return tools[id];\n                    }\n                }\n            },\n            toolGroupFor: function (toolName) {\n                var i, groups = this.groups;\n                if (this.isCustomTool(toolName)) {\n                    return 'custom';\n                }\n                for (i in groups) {\n                    if ($.inArray(toolName, groups[i]) >= 0) {\n                        return i;\n                    }\n                }\n            },\n            bindTo: function (editor) {\n                var that = this, window = that.window;\n                if (that._editor) {\n                    that._editor.unbind('select', proxy(that.resize, that));\n                }\n                that._editor = editor;\n                if (that.options.resizable && that.options.resizable.toolbar) {\n                    editor.options.tools.push(OVERFLOWANCHOR);\n                }\n                that.tools = that.expandTools(editor.options.tools);\n                that.render();\n                that.element.find('.k-combobox .k-input').keydown(function (e) {\n                    var combobox = $(this).closest('.k-combobox').data('kendoComboBox'), key = e.keyCode;\n                    if (key == keys.RIGHT || key == keys.LEFT) {\n                        combobox.close();\n                    } else if (key == keys.DOWN) {\n                        if (!combobox.dropDown.isOpened()) {\n                            e.stopImmediatePropagation();\n                            combobox.open();\n                        }\n                    }\n                });\n                that._attachEvents();\n                that.items().each(function initializeTool() {\n                    var toolName = that._toolName(this), tool = toolName !== 'moreVertical' ? that.tools[toolName] : that.tools.overflowAnchor, options = tool && tool.options, messages = editor.options.messages, description = options && options.tooltip || messages[toolName], ui = $(this);\n                    if (!tool || !tool.initialize) {\n                        return;\n                    }\n                    if (toolName == 'fontSize' || toolName == 'fontName') {\n                        var inheritText = messages[toolName + 'Inherit'];\n                        ui.find('input').val(inheritText).end().find('span.k-input').text(inheritText).end();\n                    }\n                    tool.initialize(ui, {\n                        title: that._appendShortcutSequence(description, tool),\n                        editor: that._editor\n                    });\n                    ui.closest('.k-widget', that.element).addClass('k-editor-widget');\n                    ui.closest('.k-colorpicker', that.element).next('.k-colorpicker').addClass('k-editor-widget');\n                });\n                editor.bind('select', proxy(that.resize, that));\n                that.update();\n                if (window) {\n                    window.wrapper.css({\n                        top: '',\n                        left: '',\n                        width: ''\n                    });\n                }\n            },\n            show: function () {\n                var that = this, window = that.window, editorOptions = that.options.editor, wrapper, editorElement, editorOffset, browser = kendo.support.browser;\n                if (window) {\n                    wrapper = window.wrapper;\n                    editorElement = editorOptions.element;\n                    if (!wrapper.is(':visible') || !that.window.options.visible) {\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(this._getWindowWidth());\n                        }\n                        if (!window._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css('padding-bottom'), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n                        if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                            setTimeout(function () {\n                                window.open();\n                            }, 0);\n                        } else {\n                            window.open();\n                        }\n                    }\n                }\n            },\n            _getWindowWidth: function () {\n                var that = this, wrapper = that.window.wrapper, editorElement = that.options.editor.element;\n                return outerWidth(editorElement) - parseInt(wrapper.css('border-left-width'), 10) - parseInt(wrapper.css('border-right-width'), 10);\n            },\n            _overlaps: function (box) {\n                var toolbarWrapper = this.window.wrapper, toolbarWrapperOffset = toolbarWrapper.offset(), toolbarWrapperLeft = toolbarWrapperOffset.left, toolbarWrapperTop = toolbarWrapperOffset.top, boxOffset = box.offset(), boxOffsetLeft = boxOffset.left, boxOffsetTop = boxOffset.top;\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft || boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() || boxOffsetTop + box.height() < toolbarWrapperTop || boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n            hide: function () {\n                if (this.window) {\n                    this.window.close();\n                }\n            },\n            focus: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.attr(TABINDEX, tabIndex || 0).focus().find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            focusOverflowPopup: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.overflowPopup.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.closest('.k-animation-container').addClass('k-overflow-wrapper');\n                element.attr(TABINDEX, tabIndex || 0).find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            _appendShortcutSequence: function (localizedText, tool) {\n                if (!tool.key) {\n                    return localizedText;\n                }\n                var res = localizedText + ' (';\n                if (tool.ctrl) {\n                    res += 'Ctrl + ';\n                }\n                if (tool.shift) {\n                    res += 'Shift + ';\n                }\n                if (tool.alt) {\n                    res += 'Alt + ';\n                }\n                res += tool.key + ')';\n                return res;\n            },\n            _nativeTools: [\n                'insertLineBreak',\n                'insertParagraph',\n                'redo',\n                'undo',\n                'autoLink'\n            ],\n            tools: {},\n            isCustomTool: function (toolName) {\n                return !(toolName in kendo.ui.Editor.defaultTools);\n            },\n            expandTools: function (tools) {\n                var currentTool, i, nativeTools = this._nativeTools, options, defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools), result = {}, name;\n                for (i = 0; i < tools.length; i++) {\n                    currentTool = tools[i];\n                    name = currentTool.name;\n                    if ($.isPlainObject(currentTool)) {\n                        if (name && defaultTools[name]) {\n                            result[name] = extend({}, defaultTools[name]);\n                            extend(result[name].options, currentTool);\n                        } else {\n                            options = extend({\n                                cssClass: 'k-i-gear',\n                                type: 'button',\n                                title: ''\n                            }, currentTool);\n                            if (!options.name) {\n                                options.name = 'custom';\n                            }\n                            options.cssClass = 'k-' + options.name;\n                            if (!options.template && options.type == 'button') {\n                                options.template = editorNS.EditorUtils.buttonTemplate;\n                                options.title = options.title || options.tooltip;\n                            }\n                            result[name] = { options: options };\n                        }\n                    } else if (defaultTools[currentTool]) {\n                        result[currentTool] = defaultTools[currentTool];\n                    }\n                }\n                for (i = 0; i < nativeTools.length; i++) {\n                    if (!result[nativeTools[i]]) {\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                    }\n                }\n                return result;\n            },\n            render: function () {\n                var that = this, tools = that.tools, options, template, toolElement, toolName, editorElement = that._editor.element, element = that.element.empty(), groupName, newGroupName, toolConfig = that._editor.options.tools, browser = kendo.support.browser, group, i, groupPosition = 0, resizable = that.options.resizable && that.options.resizable.toolbar, overflowFlaseTools = this.overflowFlaseTools;\n                function stringify(template) {\n                    var result = '';\n                    if (template.getHtml) {\n                        result = template.getHtml();\n                    } else {\n                        if (!$.isFunction(template)) {\n                            template = kendo.template(template);\n                        }\n                        result = template(options);\n                    }\n                    return kendo.trim(result);\n                }\n                function endGroup() {\n                    if (group.children().length) {\n                        if (resizable) {\n                            group.data('position', groupPosition);\n                            groupPosition++;\n                        }\n                        group.appendTo(element);\n                    }\n                }\n                function startGroup(toolName) {\n                    if (toolName !== OVERFLOWANCHOR) {\n                        group = $('<li class=\\'k-tool-group\\' role=\\'presentation\\' />');\n                        group.data('overflow', $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                    } else {\n                        group = $('<li class=\\'k-overflow-tools\\' />');\n                    }\n                }\n                element.empty();\n                if (toolConfig.length) {\n                    toolName = toolConfig[0].name || toolConfig[0];\n                }\n                startGroup(toolName, overflowFlaseTools);\n                for (i = 0; i < toolConfig.length; i++) {\n                    toolName = toolConfig[i].name || toolConfig[i];\n                    options = tools[toolName] && tools[toolName].options;\n                    if (!options && $.isPlainObject(toolName)) {\n                        options = toolName;\n                    }\n                    template = options && options.template;\n                    if (toolName == 'break') {\n                        endGroup();\n                        $('<li class=\\'k-row-break\\' />').appendTo(that.element);\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (!template) {\n                        continue;\n                    }\n                    newGroupName = that.toolGroupFor(toolName);\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                        groupName = newGroupName;\n                    }\n                    if (toolName == OVERFLOWANCHOR) {\n                        template.options.title = that.options.messages.overflowAnchor;\n                    }\n                    template = stringify(template);\n                    toolElement = $(template).appendTo(group);\n                    if (newGroupName == 'custom') {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (options.exec && toolElement.hasClass('k-tool')) {\n                        toolElement.click(proxy(options.exec, editorElement[0]));\n                    }\n                }\n                endGroup();\n                $(that.element).children(':has(> .k-tool)').not('.k-overflow-tools').addClass('k-button-group');\n                if (that.options.popup && browser.msie && browser.version < 9) {\n                    that.window.wrapper.find('*').attr('unselectable', 'on');\n                }\n                that.updateGroups();\n                if (resizable) {\n                    that._initOverflowPopup(that.element.find('.k-overflow-anchor'));\n                }\n                that.angular('compile', function () {\n                    return { elements: that.element };\n                });\n            },\n            updateGroups: function () {\n                $(this.element).children().not('.k-overflow-tools').each(function () {\n                    $(this).children().removeClass('k-group-start k-group-end').first().addClass('k-group-start').end().last().addClass('k-group-end').end();\n                });\n            },\n            decorateFrom: function (body) {\n                this.items().filter('.k-decorated').each(function () {\n                    var selectBox = $(this).data('kendoSelectBox');\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (tools[id].destroy) {\n                        tools[id].destroy();\n                    }\n                }\n                if (this.window) {\n                    this.window.destroy();\n                }\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n                if (this.overflowPopup) {\n                    this.overflowPopup.destroy();\n                }\n            },\n            _attachEvents: function () {\n                var that = this, popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n                that.attachToolsEvents(that.element.add(popupElement));\n            },\n            attachToolsEvents: function (element) {\n                var that = this, buttons = '[role=button].k-tool', enabledButtons = buttons + ':not(.k-state-disabled)', disabledButtons = buttons + '.k-state-disabled', dropdown = '.k-dropdown', colorpicker = '.k-colorpicker', editorTools = [\n                        buttons,\n                        dropdown,\n                        colorpicker\n                    ].join(',');\n                element.off(NS).on('mouseenter' + NS, enabledButtons, function () {\n                    $(this).addClass('k-state-hover');\n                }).on('mouseleave' + NS, enabledButtons, function () {\n                    $(this).removeClass('k-state-hover');\n                }).on('mousedown' + NS, editorTools, function (e) {\n                    e.preventDefault();\n                }).on('keydown' + NS, focusable, function (e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var direction = kendo.support.isRtl(that.element) ? -1 : 1;\n                    var focusableItems;\n                    var focusElement, currentContainer, keyCode = e.keyCode;\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n                        return tools[index];\n                    }\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).is('.k-dropdown')) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 * direction : -1 * direction, that.element, true);\n                        } else {\n                            focusElement = $(current);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.HOME) {\n                        focusElement = that.element.find(focusable)[0];\n                        e.preventDefault();\n                    } else if (keyCode == keys.END) {\n                        focusableItems = that.element.find(focusable).filter(function () {\n                            return $(this).css('visibility') !== 'hidden';\n                        });\n                        focusElement = focusableItems[focusableItems.length - 1];\n                        e.preventDefault();\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass('k-overflow-tool-group') ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n                            if (!focusElement || $(focusElement).closest('.k-overflow-tools').css('visibility') === 'hidden') {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n                    if ((keyCode === keys.ENTER || keyCode === keys.SPACEBAR) && ($(current).is('button') || $(current).is('a')) && !$(current).attr('href')) {\n                        that._executeToolCommand(current, e);\n                    }\n                }).on('click' + NS, enabledButtons, function (e) {\n                    that._executeToolCommand(this, e);\n                }).on('click' + NS, disabledButtons, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _executeToolCommand: function (toolElement, e) {\n                var that = this;\n                var button = $(toolElement);\n                e.preventDefault();\n                e.stopPropagation();\n                button.removeClass('k-state-hover');\n                if (!button.is('[data-popup]')) {\n                    that._editor.exec(that._toolName(toolElement));\n                }\n            },\n            _toolName: function (element) {\n                if (!element) {\n                    return;\n                }\n                var className = element.className;\n                if (/k-tool\\b/i.test(className)) {\n                    className = element.firstChild.className;\n                }\n                var tool = $.grep(className.split(' '), function (x) {\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n                });\n                if (tool[0]) {\n                    var toolname = tool[0];\n                    if (toolNamesByCssClass[toolname]) {\n                        toolname = toolNamesByCssClass[toolname];\n                    }\n                    if (toolname.indexOf('k-i-') >= 0) {\n                        return kendo.toCamelCase(toolname.substring(toolname.indexOf('k-i-') + 4));\n                    } else {\n                        return toolname.substring(toolname.lastIndexOf('-') + 1);\n                    }\n                }\n                return 'custom';\n            },\n            refreshTools: function () {\n                var that = this, editor = that._editor, range = editor.getRange(), nodes = editorNS.RangeUtils.textNodes(range), immutables = editor.options.immutables, immutablesContext = that._immutablesContext(range);\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n                that.items().each(function () {\n                    var tool = that.tools[that._toolName(this)];\n                    if (tool) {\n                        var ui = $(this);\n                        if (tool.update) {\n                            tool.update(ui, nodes);\n                        }\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n                this.update();\n            },\n            _immutablesContext: function (range) {\n                if (this._editor.options.immutables) {\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n            _updateImmutablesState: function (tool, ui, immutablesContext) {\n                var name = tool.name;\n                var uiElement = ui;\n                var trackImmutables = tool.options.trackImmutables;\n                if (trackImmutables === undefined) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n                if (trackImmutables) {\n                    var display = immutablesContext ? 'none' : '';\n                    if (!ui.is('.k-tool')) {\n                        var uiData = ui.data();\n                        for (var key in uiData) {\n                            if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                                var widget = uiData[key];\n                                uiElement = widget.wrapper;\n                                break;\n                            }\n                        }\n                    }\n                    uiElement.css('display', display);\n                    var groupUi = uiElement.closest('li');\n                    if (groupUi.children(':visible').length === 0) {\n                        groupUi.css('display', display);\n                    }\n                }\n            },\n            update: function () {\n                this.updateGroups();\n            },\n            _resize: function (e) {\n                var containerWidth = e.width;\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\n                var popup = this.overflowPopup;\n                var editorElement = this.options.editor.element;\n                var toolbarWindow = this.window;\n                this.refreshTools();\n                if (!resizable) {\n                    return;\n                }\n                if (toolbarWindow) {\n                    toolbarWindow.wrapper.width(this._getWindowWidth());\n                    if (!toolbarWindow._moved) {\n                        toolbarWindow.wrapper.css({ left: Math.max(0, parseInt(editorElement.offset().left, 10)) });\n                    }\n                }\n                if (popup.visible()) {\n                    popup.close(true);\n                }\n                this._refreshWidths();\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n                this._toggleOverflowStyles(this.element, false);\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\n                this.element.children('li.k-overflow-tools').css('visibility', popup.element.is(':empty') ? 'hidden' : 'visible');\n            },\n            _refreshWidths: function () {\n                this.element.children('li').each(function (idx, element) {\n                    var group = $(element);\n                    group.data('outerWidth', outerWidth(group, true));\n                });\n            },\n            _shrink: function (width) {\n                var group, visibleGroups;\n                if (width < this._groupsWidth()) {\n                    visibleGroups = this._visibleGroups().filter(':not(.k-overflow-tools)');\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                        group = visibleGroups.eq(i);\n                        if (width > this._groupsWidth()) {\n                            break;\n                        } else {\n                            this._hideGroup(group);\n                        }\n                    }\n                }\n            },\n            _stretch: function (width) {\n                var group, hiddenGroups;\n                if (width > this._groupsWidth()) {\n                    hiddenGroups = this._hiddenGroups();\n                    for (var i = 0; i < hiddenGroups.length; i++) {\n                        group = hiddenGroups.eq(i);\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                            break;\n                        }\n                    }\n                }\n            },\n            _hiddenGroups: function () {\n                var popup = this.overflowPopup;\n                var hiddenGroups = this.element.children('li.k-tool-group').filter(':hidden');\n                hiddenGroups = hiddenGroups.add(popup.element.children('li'));\n                hiddenGroups.sort(function (a, b) {\n                    return $(a).data('position') > $(b).data('position') ? 1 : -1;\n                });\n                return hiddenGroups;\n            },\n            _visibleGroups: function () {\n                return this.element.children('li.k-tool-group, li.k-overflow-tools').filter(':visible');\n            },\n            _groupsWidth: function () {\n                var width = 0;\n                this._visibleGroups().each(function () {\n                    width += $(this).data('outerWidth');\n                });\n                return Math.ceil(width);\n            },\n            _hideGroup: function (group) {\n                if (group.data('overflow')) {\n                    var popup = this.overflowPopup;\n                    group.detach().prependTo(popup.element).addClass('k-overflow-tool-group');\n                } else {\n                    group.addClass('k-hidden');\n                }\n            },\n            _showGroup: function (group, width) {\n                var position, previous, groupWidth;\n                if (group.hasClass('k-state-disabled')) {\n                    return true;\n                }\n                if (group.hasClass('k-overflow-tool-group')) {\n                    groupWidth = group.data('outerWidth');\n                } else {\n                    group.removeClass('k-hidden');\n                    groupWidth = outerWidth(group, true);\n                    group.addClass('k-hidden');\n                }\n                if (group.length && width > this._groupsWidth() + groupWidth) {\n                    if (group.hasClass('k-overflow-tool-group')) {\n                        position = group.data('position');\n                        if (position === 0) {\n                            group.detach().prependTo(this.element);\n                        } else {\n                            previous = this.element.children().filter(function (idx, element) {\n                                return $(element).data('position') === position - 1;\n                            });\n                            group.detach().insertAfter(previous);\n                        }\n                        group.removeClass('k-overflow-tool-group');\n                    } else {\n                        group.removeClass('k-hidden');\n                    }\n                    return true;\n                }\n                return false;\n            }\n        });\n        $.extend(editorNS, { Toolbar: Toolbar });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/viewhtml', ['editor/command'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, dom = Editor.Dom;\n        var ViewHtmlCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.async = true;\n            },\n            exec: function () {\n                var that = this, editor = that.editor, options = editor.options, messages = editor.options.messages, dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body), textarea = '.k-editor-textarea', content, comments;\n                options.serialization.immutables = editor.immutables;\n                comments = dom.getAllComments(editor.body);\n                content = EditorUtils.cacheComments(editor.value(), comments);\n                content = ViewHtmlCommand.indent(content);\n                content = EditorUtils.retrieveComments(content, comments);\n                options.serialization.immutables = undefined;\n                function apply(e) {\n                    options.deserialization.immutables = editor.immutables;\n                    editor.value(dialog.find(textarea).val());\n                    options.deserialization.immutables = undefined;\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    editor.trigger('change');\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.data('kendoWindow').destroy();\n                    if (editor.immutables) {\n                        editor.immutables.serializedImmutables = {};\n                    }\n                    editor.focus();\n                }\n                this.createDialog(dialog, {\n                    title: messages.viewHtml,\n                    width: 600,\n                    height: 400,\n                    resizable: true,\n                    close: close,\n                    visible: false\n                }).find(textarea).val(content).end().find('.k-dialog-update').click(apply).end().find('.k-dialog-close').click(close).end().data('kendoWindow').center().open();\n                dialog.find(textarea).focus();\n            }\n        });\n        extend(ViewHtmlCommand, {\n            template: '' + '<div class=\\'k-editor-dialog k-popup-edit-form k-viewhtml-dialog\\'>' + '<textarea class=\\'k-textarea k-editor-textarea\\'></textarea>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\\'k-dialog-update k-button k-primary\\'>#: dialogUpdate #</button>' + '<button class=\\'k-dialog-close k-button\\'>#: dialogCancel #</button>' + '</div>' + '</div>',\n            indent: function (content) {\n                return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, '</$1>\\n').replace(/<(ul|ol)([^>]*)><li/gi, '<$1$2>\\n<li').replace(/<br \\/>/gi, '<br />\\n').replace(/\\n$/, '');\n            }\n        });\n        kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n        Editor.EditorUtils.registerTool('viewHtml', new Tool({\n            command: ViewHtmlCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'View HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/format', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, Tool = Editor.Tool, Command = Editor.Command, EditorUtils = Editor.EditorUtils;\n        var FormatCommand = Command.extend({\n            init: function (options) {\n                options.formatter = options.formatter();\n                var finder = options.formatter.finder;\n                if (finder && EditorUtils.formatByName('immutable', finder.format)) {\n                    finder._initOptions({ immutables: options.immutables });\n                }\n                Command.fn.init.call(this, options);\n            }\n        });\n        var FormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new FormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            update: function (ui, nodes) {\n                var isFormatted = this.options.finder.isFormatted(nodes);\n                ui.toggleClass('k-state-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            }\n        });\n        $.extend(Editor, {\n            FormatCommand: FormatCommand,\n            FormatTool: FormatTool\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/inlineformat', ['editor/plugins/format'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, EditorUtils = Editor.EditorUtils, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, extend = $.extend, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, MOUSEDOWN_NS = 'mousedown.kendoEditor', KEYDOWN_NS = 'keydown.kendoEditor', KMARKER = 'k-marker';\n        var InlineFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            numberOfSiblings: function (referenceNode) {\n                var textNodesCount = 0, elementNodesCount = 0, markerCount = 0, parentNode = referenceNode.parentNode, node;\n                for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                    if (node != referenceNode) {\n                        if (node.className == KMARKER) {\n                            markerCount++;\n                        } else if (node.nodeType == 3) {\n                            textNodesCount++;\n                        } else {\n                            elementNodesCount++;\n                        }\n                    }\n                }\n                if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                    return 0;\n                } else {\n                    return elementNodesCount + textNodesCount;\n                }\n            },\n            findSuitable: function (sourceNode, skip) {\n                if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                    return null;\n                }\n                var node = sourceNode.parentNode;\n                var tags = this.format[0].tags;\n                while (!dom.ofType(node, tags)) {\n                    if (this.numberOfSiblings(node) > 0) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, attrEquals = dom.attrEquals, i, len, node, tags, attributes;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                    while (node) {\n                        node = dom.parentOfType(node, tags);\n                        if (node && attrEquals(node, attributes)) {\n                            return node;\n                        }\n                    }\n                }\n                return null;\n            },\n            isFormatted: function (nodes) {\n                var i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    if (this.findFormat(nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        });\n        var InlineFormatter = Class.extend({\n            init: function (format, values) {\n                this.finder = new InlineFormatFinder(format);\n                this.attributes = extend({}, format[0].attr, values);\n                this.tag = format[0].tags[0];\n            },\n            wrap: function (node) {\n                return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n            },\n            activate: function (range, nodes) {\n                if (this.finder.isFormatted(nodes)) {\n                    this.split(range);\n                    this.remove(nodes);\n                } else {\n                    this.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n                var nodes = textNodes(range);\n                if (nodes.length > 0) {\n                    this.activate(range, nodes);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            apply: function (nodes) {\n                var formatNodes = [];\n                var i, l, node, formatNode;\n                if (nodes.length > 1) {\n                    for (i = 0, l = nodes.length; i < l; i++) {\n                        node = nodes[i];\n                        formatNode = this.format(node, true);\n                        formatNodes.push(formatNode);\n                    }\n                } else {\n                    node = nodes[0];\n                    formatNode = this.format(node, false);\n                }\n                this.consolidate(formatNodes);\n            },\n            format: function (node, outerMostInline) {\n                var formatNode = this.finder.findSuitable(node);\n                var attributes = this.attributes;\n                var styleAttr = attributes ? attributes.style || {} : {};\n                if (formatNode) {\n                    if (dom.is(formatNode, 'font')) {\n                        if (styleAttr.color) {\n                            formatNode.removeAttribute('color');\n                        }\n                        if (styleAttr.fontName) {\n                            formatNode.removeAttribute('face');\n                        }\n                        if (styleAttr.fontSize) {\n                            formatNode.removeAttribute('size');\n                        }\n                    }\n                    dom.attr(formatNode, attributes);\n                } else {\n                    while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                        node = node.parentNode;\n                    }\n                    formatNode = this.wrap(node);\n                }\n                return formatNode;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        if (this.attributes && this.attributes.style) {\n                            dom.unstyle(formatNode, this.attributes.style);\n                            if (!formatNode.style.cssText && !formatNode.attributes['class']) {\n                                dom.unwrap(formatNode);\n                            }\n                        } else {\n                            dom.unwrap(formatNode);\n                        }\n                    }\n                }\n            },\n            split: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                var l = nodes.length;\n                var i, formatNode;\n                if (l > 0) {\n                    for (i = 0; i < l; i++) {\n                        formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            },\n            consolidate: function (nodes) {\n                var node, last;\n                while (nodes.length > 1) {\n                    node = nodes.pop();\n                    last = nodes[nodes.length - 1];\n                    if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                        last.appendChild(node.previousSibling);\n                    }\n                    if (node.tagName == last.tagName && node.previousSibling == last && node.style.cssText == last.style.cssText && node.className === last.className) {\n                        while (node.firstChild) {\n                            last.appendChild(node.firstChild);\n                        }\n                        dom.remove(node);\n                    }\n                }\n            }\n        });\n        var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n            init: function (format, greedyProperty) {\n                this.format = format;\n                this.greedyProperty = greedyProperty;\n                InlineFormatFinder.fn.init.call(this, format);\n            },\n            getInlineCssValue: function (node) {\n                var attributes = node.attributes;\n                var trim = kendo.trim;\n                var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n                var propertyAndValue, property, value;\n                if (!attributes) {\n                    return;\n                }\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    attributeValue = attribute.nodeValue;\n                    if (attribute.specified && name == 'style') {\n                        css = trim(attributeValue || node.style.cssText).split(';');\n                        for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                            pair = css[cssIndex];\n                            if (pair.length) {\n                                propertyAndValue = pair.split(':');\n                                property = trim(propertyAndValue[0].toLowerCase());\n                                value = trim(propertyAndValue[1]);\n                                if (property != this.greedyProperty) {\n                                    continue;\n                                }\n                                return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\n                            }\n                        }\n                    }\n                }\n            },\n            getFormatInner: function (node) {\n                var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n                var parents = $node.parentsUntil('[contentEditable]').addBack().toArray().reverse();\n                var i, len, value;\n                for (i = 0, len = parents.length; i < len; i++) {\n                    value = this.greedyProperty == 'className' ? parents[i].className : this.getInlineCssValue(parents[i]);\n                    if (value) {\n                        return value;\n                    }\n                }\n                return 'inherit';\n            },\n            getFormat: function (nodes) {\n                var result = this.getFormatInner(nodes[0]), i, len;\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != this.getFormatInner(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result;\n            },\n            isFormatted: function (nodes) {\n                return this.getFormat(nodes) !== '';\n            }\n        });\n        var GreedyInlineFormatter = InlineFormatter.extend({\n            init: function (format, values, greedyProperty) {\n                InlineFormatter.fn.init.call(this, format, values);\n                this.values = values;\n                this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n                if (greedyProperty) {\n                    this.greedyProperty = kendo.toCamelCase(greedyProperty);\n                }\n            },\n            activate: function (range, nodes) {\n                var greedyProperty = this.greedyProperty;\n                var action = 'apply';\n                this.split(range);\n                if (greedyProperty && this.values.style[greedyProperty] == 'inherit') {\n                    action = 'remove';\n                }\n                this[action](nodes);\n            }\n        });\n        var InlineFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new InlineFormatFinder(options.format),\n                    formatter: function () {\n                        return new InlineFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        var DelayedExecutionTool = Tool.extend({\n            update: function (ui, nodes) {\n                var list = ui.data(this.type);\n                list.close();\n                list.value(this.finder.getFormat(nodes));\n            }\n        });\n        var FontTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.type = kendo.support.browser.msie || kendo.support.touch ? 'kendoDropDownList' : 'kendoComboBox';\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, toolName = options.name, dataSource, range, defaultValue = [];\n                if (options.defaultValue) {\n                    defaultValue = [{\n                            text: editor.options.messages[options.defaultValue[0].text],\n                            value: options.defaultValue[0].value\n                        }];\n                }\n                dataSource = defaultValue.concat(options.items ? options.items : editor.options[toolName] || []);\n                ui.attr({ title: initOptions.title });\n                ui[this.type]({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    change: function () {\n                        editor._range = range;\n                        Tool.exec(editor, toolName, this.value());\n                    },\n                    close: function () {\n                        setTimeout(function () {\n                            editor._deleteSavedRange();\n                        }, 0);\n                    },\n                    highlightFirst: false\n                });\n                ui.closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n                var widget = ui.data(this.type);\n                widget.value('inherit');\n                widget.wrapper.on(MOUSEDOWN_NS, '.k-select,.k-input', function () {\n                    var newRange = editor.getRange();\n                    range = editor._containsRange(newRange) ? newRange : range;\n                }).on(KEYDOWN_NS, function (e) {\n                    if (e.keyCode === kendo.keys.ENTER) {\n                        editor._deleteSavedRange();\n                        e.preventDefault();\n                    }\n                });\n            }\n        });\n        var ColorTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            options: { palette: 'websafe' },\n            update: function () {\n                this._widget.close();\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var that = this, editor = initOptions.editor, toolName = this.name, options = extend({}, ColorTool.fn.options, this.options), palette = options.palette, columns = options.columns;\n                ui = this._widget = new kendo.ui.ColorPicker(ui, {\n                    toolIcon: 'k-icon k-i-' + EditorUtils.getToolCssClass(options.name),\n                    palette: palette,\n                    columns: columns,\n                    change: function () {\n                        var color = ui.value();\n                        if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                            editor.selectRange(that.storedRange);\n                        }\n                        if (color) {\n                            Tool.exec(editor, toolName, color);\n                        }\n                        delete that.storedRange;\n                        delete that._inputFocused;\n                        editor.focus();\n                    },\n                    open: function (e) {\n                        var picker = e.sender;\n                        that.storedRange = editor.getRange();\n                        picker._popup.element.on(MOUSEDOWN_NS, function (e) {\n                            if (!$(e.target).is('input.k-color-value')) {\n                                e.preventDefault();\n                            }\n                        });\n                        if (!picker._popup.element.is('[unselectable=\\'on\\']')) {\n                            picker._popup.element.attr({ unselectable: 'on' }).find('*:not(input)').attr('unselectable', 'on').end().find('input').on('focus', function () {\n                                that._inputFocused = true;\n                            });\n                        }\n                    },\n                    close: function (e) {\n                        e.sender._popup.element.off(MOUSEDOWN_NS);\n                        if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                            editor.selectRange(that.storedRange);\n                        }\n                    },\n                    activate: function (e) {\n                        e.preventDefault();\n                        if (e.sender._value.toCssRgba() === 'rgba(255, 255, 255, 0)') {\n                            return;\n                        }\n                        ui.trigger('change');\n                    }\n                });\n                ui.wrapper.attr({\n                    title: initOptions.title,\n                    unselectable: 'on'\n                }).find('*:not(input)').attr('unselectable', 'on');\n                ui.value('transparent');\n            }\n        });\n        extend(Editor, {\n            InlineFormatFinder: InlineFormatFinder,\n            InlineFormatter: InlineFormatter,\n            DelayedExecutionTool: DelayedExecutionTool,\n            GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n            GreedyInlineFormatter: GreedyInlineFormatter,\n            InlineFormatTool: InlineFormatTool,\n            FontTool: FontTool,\n            ColorTool: ColorTool\n        });\n        registerFormat('bold', [\n            {\n                tags: [\n                    'strong',\n                    'b'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontWeight: 'bold' } }\n            }\n        ]);\n        registerTool('bold', new InlineFormatTool({\n            key: 'B',\n            ctrl: true,\n            format: formats.bold,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Bold'\n            })\n        }));\n        registerFormat('italic', [\n            {\n                tags: [\n                    'em',\n                    'i'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontStyle: 'italic' } }\n            }\n        ]);\n        registerTool('italic', new InlineFormatTool({\n            key: 'I',\n            ctrl: true,\n            format: formats.italic,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Italic'\n            })\n        }));\n        registerFormat('underline', [\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'underline' } }\n            },\n            { tags: ['u'] }\n        ]);\n        registerTool('underline', new InlineFormatTool({\n            key: 'U',\n            ctrl: true,\n            format: formats.underline,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Underline'\n            })\n        }));\n        registerFormat('strikethrough', [\n            {\n                tags: [\n                    'del',\n                    'strike'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'line-through' } }\n            }\n        ]);\n        registerTool('strikethrough', new InlineFormatTool({\n            format: formats.strikethrough,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Strikethrough'\n            })\n        }));\n        registerFormat('superscript', [{ tags: ['sup'] }]);\n        registerTool('superscript', new InlineFormatTool({\n            format: formats.superscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Superscript'\n            })\n        }));\n        registerFormat('subscript', [{ tags: ['sub'] }]);\n        registerTool('subscript', new InlineFormatTool({\n            format: formats.subscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Subscript'\n            })\n        }));\n        registerTool('foreColor', new ColorTool({\n            cssAttr: 'color',\n            domAttr: 'color',\n            name: 'foreColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Color'\n            })\n        }));\n        registerTool('backColor', new ColorTool({\n            cssAttr: 'background-color',\n            domAttr: 'backgroundColor',\n            name: 'backColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Background Color'\n            })\n        }));\n        registerTool('fontName', new FontTool({\n            cssAttr: 'font-family',\n            domAttr: 'fontFamily',\n            name: 'fontName',\n            defaultValue: [{\n                    text: 'fontNameInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Name'\n            })\n        }));\n        registerTool('fontSize', new FontTool({\n            cssAttr: 'font-size',\n            domAttr: 'fontSize',\n            name: 'fontSize',\n            defaultValue: [{\n                    text: 'fontSizeInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Size'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/link', ['editor/plugins/inlineformat'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InlineFormatter = Editor.InlineFormatter, InlineFormatFinder = Editor.InlineFormatFinder, textNodes = RangeUtils.textNodes, editableTextNodes = RangeUtils.editableTextNodes, registerTool = Editor.EditorUtils.registerTool, keys = kendo.keys;\n        var HTTP_PROTOCOL = 'http://';\n        var protocolRegExp = /^\\w*:\\/\\//;\n        var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n        var LinkFormatFinder = Class.extend({\n            findSuitable: function (sourceNode) {\n                return dom.parentOfType(sourceNode, ['a']);\n            }\n        });\n        var LinkFormatter = Class.extend({\n            init: function () {\n                this.finder = new LinkFormatFinder();\n            },\n            apply: function (range, attributes) {\n                var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n                var markers, doc, formatter, a, parent;\n                if (attributes.innerText) {\n                    doc = RangeUtils.documentFromRange(range);\n                    markers = RangeUtils.getMarkers(range);\n                    range.deleteContents();\n                    a = dom.create(doc, 'a', attributes);\n                    range.insertNode(a);\n                    parent = a.parentNode;\n                    if (dom.name(parent) == 'a') {\n                        dom.insertAfter(a, parent);\n                    }\n                    if (dom.emptyNode(parent)) {\n                        dom.remove(parent);\n                    }\n                    var ref = a;\n                    for (var i = 0; i < markers.length; i++) {\n                        dom.insertAfter(markers[i], ref);\n                        ref = markers[i];\n                    }\n                    if (markers.length) {\n                        dom.insertBefore(doc.createTextNode('\\uFEFF'), markers[1] || markers[0]);\n                        dom.insertAfter(doc.createTextNode('\\uFEFF'), markers[1] || markers[0]);\n                        range.setStartBefore(markers[0]);\n                        range.setEndAfter(markers[markers.length - 1]);\n                    }\n                } else {\n                    formatter = new InlineFormatter([{ tags: ['a'] }], attributes);\n                    formatter.finder = this.finder;\n                    formatter.apply(nodes);\n                }\n            }\n        });\n        var UnlinkCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: function (range) {\n                        var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                        new InlineFormatter([{ tags: ['a'] }]).remove(nodes);\n                    }\n                };\n                this.options = options;\n                Command.fn.init.call(this, options);\n            }\n        });\n        var LinkCommand = Command.extend({\n            init: function (options) {\n                var that;\n                this.options = options;\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n                if (!options.url) {\n                    this.attributes = null;\n                    this.async = true;\n                } else {\n                    this.exec = function () {\n                        this.formatter.immutables = that && that.immutables();\n                        this.formatter.apply(options.range, {\n                            href: options.url,\n                            innerText: options.text || options.url,\n                            target: options.target\n                        });\n                    };\n                }\n            },\n            _dialogTemplate: function () {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-url\\'>#: messages.linkWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-textbox\\' id=\\'k-editor-link-url\\'>' + '</div>' + '<div class=\\'k-edit-label k-editor-link-text-row\\'>' + '<label for=\\'k-editor-link-text\\'>#: messages.linkText #</label>' + '</div>' + '<div class=\\'k-edit-field k-editor-link-text-row\\'>' + '<input type=\\'text\\' class=\\'k-textbox\\' id=\\'k-editor-link-text\\'>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-title\\'>#: messages.linkToolTip #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-textbox\\' id=\\'k-editor-link-title\\'>' + '</div>' + '<div class=\\'k-edit-label\\'></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'checkbox\\' class=\\'k-checkbox\\' id=\\'k-editor-link-target\\'>' + '<label for=\\'k-editor-link-target\\' class=\\'k-checkbox-label\\'>#: messages.linkOpenInNewWindow #</label>' + '</div>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({ messages: this.editor.options.messages });\n            },\n            exec: function () {\n                var messages = this.editor.options.messages;\n                this._initialText = '';\n                this._range = this.lockRange(true);\n                this.formatter.immutables = this.immutables();\n                var nodes = textNodes(this._range);\n                var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n                var img = nodes.length && dom.name(nodes[0]) == 'img';\n                var dialog = this.createDialog(this._dialogTemplate(), {\n                    title: messages.createLink,\n                    close: proxy(this._close, this),\n                    visible: false\n                });\n                if (a) {\n                    this._range.selectNodeContents(a);\n                    nodes = textNodes(this._range);\n                }\n                this._initialText = this.linkText(nodes);\n                dialog.find('.k-dialog-insert').click(proxy(this._apply, this)).end().find('.k-dialog-close').click(proxy(this._close, this)).end().find('.k-edit-field input').keydown(proxy(this._keydown, this)).end().find('#k-editor-link-url').val(this.linkUrl(a)).end().find('#k-editor-link-text').val(this._initialText).end().find('#k-editor-link-title').val(a ? a.title : '').end().find('#k-editor-link-target').attr('checked', a ? a.target == '_blank' : false).end().find('.k-editor-link-text-row').toggle(!img);\n                this._dialog = dialog.data('kendoWindow').center().open();\n                $('#k-editor-link-url', dialog).focus().select();\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                if (e.keyCode == keys.ENTER) {\n                    this._apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    this._close(e);\n                }\n            },\n            _apply: function (e) {\n                var element = this._dialog.element;\n                var href = $('#k-editor-link-url', element).val();\n                var title, text, target;\n                var textInput = $('#k-editor-link-text', element);\n                if (href && href != HTTP_PROTOCOL) {\n                    if (href.indexOf('@') > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                        href = 'mailto:' + href;\n                    }\n                    this.attributes = { href: href };\n                    title = $('#k-editor-link-title', element).val();\n                    if (title) {\n                        this.attributes.title = title;\n                    }\n                    if (textInput.is(':visible')) {\n                        text = textInput.val();\n                        if (!text && !this._initialText) {\n                            this.attributes.innerText = href;\n                        } else if (text && text !== this._initialText) {\n                            this.attributes.innerText = dom.stripBom(text);\n                        }\n                    }\n                    target = $('#k-editor-link-target', element).is(':checked');\n                    this.attributes.target = target ? '_blank' : null;\n                    this.formatter.apply(this._range, this.attributes);\n                }\n                this._close(e);\n                if (this.change) {\n                    this.change();\n                }\n            },\n            _close: function (e) {\n                e.preventDefault();\n                this._dialog.destroy();\n                dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n                this.releaseRange(this._range);\n            },\n            linkUrl: function (anchor) {\n                if (anchor) {\n                    return anchor.getAttribute('href', 2);\n                }\n                return HTTP_PROTOCOL;\n            },\n            linkText: function (nodes) {\n                var text = '';\n                var i;\n                for (i = 0; i < nodes.length; i++) {\n                    text += nodes[i].nodeValue;\n                }\n                return dom.stripBom(text || '');\n            },\n            redo: function () {\n                var range = this.lockRange(true);\n                this.formatter.apply(range, this.attributes);\n                this.releaseRange(range);\n            }\n        });\n        var AutoLinkCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n            },\n            exec: function () {\n                var detectedLink = this.detectLink();\n                if (!detectedLink) {\n                    return;\n                }\n                var range = this.getRange();\n                var linkMarker = new kendo.ui.editor.Marker();\n                var linkRange = range.cloneRange();\n                linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n                linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n                range = this.lockRange();\n                linkMarker.add(linkRange);\n                this.formatter.apply(linkRange, { href: this._ensureWebProtocol(detectedLink.text) });\n                linkMarker.remove(linkRange);\n                this.releaseRange(range);\n            },\n            detectLink: function () {\n                var range = this.getRange();\n                var startNode = range.startContainer;\n                var startOffset = range.startOffset;\n                var prev = startNode.previousSibling;\n                if (!prev && (dom.isBom(startNode) && !startNode.nextSibling || !startOffset && dom.isDataNode(startNode))) {\n                    startNode = startNode.parentNode;\n                    startOffset = 0;\n                }\n                var traverser = new LeftDomTextTraverser({\n                    node: startNode,\n                    offset: startOffset,\n                    cancelAtNode: function (node) {\n                        return node && dom.name(node) === 'a';\n                    }\n                });\n                var detection = new DomTextLinkDetection(traverser);\n                return detection.detectLink();\n            },\n            changesContent: function () {\n                return !!this.detectLink();\n            },\n            _ensureWebProtocol: function (linkText) {\n                var hasProtocol = this._hasProtocolPrefix(linkText);\n                return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n            },\n            _hasProtocolPrefix: function (linkText) {\n                return protocolRegExp.test(linkText);\n            },\n            _prefixWithWebProtocol: function (linkText) {\n                return HTTP_PROTOCOL + linkText;\n            }\n        });\n        var UnlinkTool = Tool.extend({\n            init: function (options) {\n                this.options = options;\n                this.finder = new InlineFormatFinder([{ tags: ['a'] }]);\n                Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                ui.toggleClass('k-state-disabled', !this.finder.isFormatted(nodes)).removeClass('k-state-hover');\n            }\n        });\n        var DomTextLinkDetection = Class.extend({\n            init: function (traverser) {\n                this.traverser = traverser;\n                this.start = DomPos();\n                this.end = DomPos();\n                this.text = '';\n            },\n            detectLink: function () {\n                var node = this.traverser.node;\n                var offset = this.traverser.offset;\n                if (dom.isDataNode(node)) {\n                    var text = node.data.substring(0, offset);\n                    if (/\\s{2}$/.test(dom.stripBom(text))) {\n                        return;\n                    }\n                } else if (offset === 0) {\n                    var p = dom.closestEditableOfType(node, dom.blockElements);\n                    if (p && p.previousSibling) {\n                        this.traverser.init({ node: p.previousSibling });\n                    }\n                }\n                this.traverser.traverse($.proxy(this._detectEnd, this));\n                if (!this.end.blank()) {\n                    this.traverser = this.traverser.clone(this.end);\n                    this.traverser.traverse($.proxy(this._detectStart, this));\n                    if (!this._isLinkDetected()) {\n                        var puntuationOptions = this.traverser.extendOptions(this.start);\n                        var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                        puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\n                        if (!this._isLinkDetected()) {\n                            this.start = DomPos();\n                        }\n                    }\n                }\n                if (this.start.blank()) {\n                    return null;\n                } else {\n                    return {\n                        start: this.start,\n                        end: this.end,\n                        text: this.text\n                    };\n                }\n            },\n            _isLinkDetected: function () {\n                return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n            },\n            _detectEnd: function (text, node) {\n                var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n                if (i > -1) {\n                    this.end.node = node;\n                    this.end.offset = i + 1;\n                    return false;\n                }\n            },\n            _detectStart: function (text, node) {\n                var i = lastIndexOfRegExp(text, /\\s/);\n                var ii = i + 1;\n                this.text = text.substring(ii) + this.text;\n                this.start.node = node;\n                this.start.offset = ii;\n                if (i > -1) {\n                    return false;\n                }\n            },\n            _skipStartPuntuation: function (text, node, offset) {\n                var i = indexOfRegExp(text, /\\w/);\n                var ii = i;\n                if (i === -1) {\n                    ii = text.length;\n                }\n                this.text = this.text.substring(ii);\n                this.start.node = node;\n                this.start.offset = ii + (offset | 0);\n                if (i > -1) {\n                    return false;\n                }\n            }\n        });\n        function lastIndexOfRegExp(str, search) {\n            var i = str.length;\n            while (i-- && !search.test(str[i])) {\n            }\n            return i;\n        }\n        function indexOfRegExp(str, search) {\n            var r = search.exec(str);\n            return r ? r.index : -1;\n        }\n        var DomPos = function () {\n            return {\n                node: null,\n                offset: null,\n                blank: function () {\n                    return this.node === null && this.offset === null;\n                }\n            };\n        };\n        var DomTextTraverser = Class.extend({\n            init: function (options) {\n                this.node = options.node;\n                this.offset = options.offset === undefined ? dom.isDataNode(this.node) && this.node.length || 0 : options.offset;\n                this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n            },\n            traverse: function (callback) {\n                if (!callback) {\n                    return;\n                }\n                this.cancel = false;\n                this._traverse(callback, this.node, this.offset);\n            },\n            _traverse: function (callback, node, offset) {\n                if (!node || this.cancel) {\n                    return;\n                }\n                if (node.nodeType === 3) {\n                    var text = node.data;\n                    if (offset !== undefined) {\n                        text = this.subText(text, offset);\n                    }\n                    this.cancel = callback(text, node, offset) === false;\n                } else {\n                    var edgeNode = this.edgeNode(node);\n                    this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                    return this._traverse(callback, edgeNode);\n                }\n                var next = this.next(node);\n                if (!next) {\n                    var parent = node.parentNode;\n                    while (!next && dom.isInline(parent)) {\n                        next = this.next(parent);\n                        parent = parent.parentNode;\n                    }\n                }\n                this.cancel = this.cancel || this.cancelAtNode(next);\n                this._traverse(callback, next);\n            },\n            extendOptions: function (o) {\n                return $.extend({\n                    node: this.node,\n                    offset: this.offset,\n                    cancelAtNode: this.cancelAtNode\n                }, o || {});\n            },\n            edgeNode: function (node) {\n            },\n            next: function (node) {\n            },\n            subText: function (text, offset) {\n            }\n        });\n        var LeftDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(0, splitIndex);\n            },\n            next: function (node) {\n                return node.previousSibling;\n            },\n            edgeNode: function (node) {\n                return node.lastChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new LeftDomTextTraverser(o);\n            }\n        });\n        var RightDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(splitIndex);\n            },\n            next: function (node) {\n                return node.nextSibling;\n            },\n            edgeNode: function (node) {\n                return node.firstChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new RightDomTextTraverser(o);\n            }\n        });\n        extend(kendo.ui.editor, {\n            LinkFormatFinder: LinkFormatFinder,\n            LinkFormatter: LinkFormatter,\n            UnlinkCommand: UnlinkCommand,\n            LinkCommand: LinkCommand,\n            AutoLinkCommand: AutoLinkCommand,\n            UnlinkTool: UnlinkTool,\n            DomTextLinkDetection: DomTextLinkDetection,\n            LeftDomTextTraverser: LeftDomTextTraverser,\n            RightDomTextTraverser: RightDomTextTraverser\n        });\n        registerTool('createLink', new Tool({\n            key: 'K',\n            ctrl: true,\n            command: LinkCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Create Link'\n            })\n        }));\n        registerTool('unlink', new UnlinkTool({\n            key: 'K',\n            ctrl: true,\n            shift: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Remove Link'\n            })\n        }));\n        registerTool('autoLink', new Tool({\n            key: [\n                keys.ENTER,\n                keys.SPACEBAR\n            ],\n            keyPressCommand: true,\n            command: AutoLinkCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatblock', ['editor/plugins/format'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, dom = Editor.Dom, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, registerFormat = EditorUtils.registerFormat, RangeUtils = Editor.RangeUtils;\n        var BlockFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            contains: function (node, children) {\n                var i, len, child;\n                for (i = 0, len = children.length; i < len; i++) {\n                    child = children[i];\n                    if (!child || !dom.isAncestorOrSelf(node, child)) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var format = this.format, suitable = [], i, len, candidate;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    for (var f = format.length - 1; f >= 0; f--) {\n                        candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                        if (candidate) {\n                            break;\n                        }\n                    }\n                    if (!candidate || candidate.contentEditable === 'true') {\n                        return [];\n                    }\n                    if ($.inArray(candidate, suitable) < 0) {\n                        suitable.push(candidate);\n                    }\n                }\n                this._resolveListsItems(suitable);\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    if (this.contains(suitable[i], suitable)) {\n                        return [suitable[i]];\n                    }\n                }\n                return suitable;\n            },\n            _resolveListsItems: function (nodes) {\n                var i, node, wrapper;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    wrapper = dom.is(node, 'li') ? node : dom.wrapper(node);\n                    wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                    if (dom.is(wrapper, 'li')) {\n                        node = nodes[i] = wrapper;\n                    }\n                }\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, i, len, node, tags, attributes;\n                var editableParent = dom.editableParent(sourceNode);\n                var immutables = this.options && this.options.immutables;\n                var ImmutablesNS = Editor.Immutables;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (immutables && tags && tags[0] == 'immutable') {\n                        var immutable = ImmutablesNS.immutableParent(node);\n                        if (immutable && dom.attrEquals(immutable, attributes)) {\n                            return node;\n                        }\n                    }\n                    while (node && dom.isAncestorOf(editableParent, node)) {\n                        if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                            return node;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n                return null;\n            },\n            getFormat: function (nodes) {\n                var that = this, findFormat = function (node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    }, result = findFormat(nodes[0]), i, len;\n                if (!result) {\n                    return '';\n                }\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != findFormat(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result.nodeName.toLowerCase();\n            },\n            isFormatted: function (nodes) {\n                for (var i = 0, len = nodes.length; i < len; i++) {\n                    if (!this.findFormat(nodes[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        });\n        var BlockFormatter = Class.extend({\n            init: function (format, values) {\n                this.format = format;\n                this.values = values;\n                this.finder = new BlockFormatFinder(format);\n            },\n            wrap: function (tag, attributes, nodes) {\n                var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n                if (dom.isInline(commonAncestor)) {\n                    commonAncestor = dom.blockParentOrBody(commonAncestor);\n                }\n                var ancestors = dom.significantChildNodes(commonAncestor), position = dom.findNodeIndex(ancestors[0]), wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes), i, ancestor;\n                for (i = 0; i < ancestors.length; i++) {\n                    ancestor = ancestors[i];\n                    if (dom.isBlock(ancestor)) {\n                        dom.attr(ancestor, attributes);\n                        if (wrapper.childNodes.length) {\n                            dom.insertBefore(wrapper, ancestor);\n                            wrapper = wrapper.cloneNode(false);\n                        }\n                        position = dom.findNodeIndex(ancestor) + 1;\n                        continue;\n                    }\n                    wrapper.appendChild(ancestor);\n                }\n                if (wrapper.firstChild) {\n                    dom.insertAt(commonAncestor, wrapper, position);\n                }\n            },\n            apply: function (nodes) {\n                var format, values = this.values;\n                function attributes(format) {\n                    return extend({}, format && format.attr, values);\n                }\n                this._handleImmutables(nodes, true);\n                var images = dom.filter('img', nodes);\n                var imageFormat = EditorUtils.formatByName('img', this.format);\n                var imageAttributes = attributes(imageFormat);\n                $.each(images, function () {\n                    dom.attr(this, imageAttributes);\n                });\n                if (images.length == nodes.length) {\n                    return;\n                }\n                var nonImages = dom.filter('img', nodes, true);\n                var formatNodes = this.finder.findSuitable(nonImages);\n                if (formatNodes.length) {\n                    for (var i = 0, len = formatNodes.length; i < len; i++) {\n                        format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                        dom.attr(formatNodes[i], attributes(format));\n                    }\n                } else {\n                    format = this.format[0];\n                    this.wrap(format.tags[0], attributes(format), nonImages);\n                }\n            },\n            _handleImmutables: function (nodes, applyFormatting) {\n                if (!this.immutables()) {\n                    return;\n                }\n                var immutableFormat = EditorUtils.formatByName('immutable', this.format);\n                if (!immutableFormat) {\n                    return;\n                }\n                var ImmutablesNS = Editor.Immutables;\n                var l = nodes.length - 1;\n                for (var i = l; i >= 0; i--) {\n                    var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                    if (!immutableParent) {\n                        continue;\n                    }\n                    if (immutableParent !== nodes[i + 1]) {\n                        if (applyFormatting) {\n                            dom.attr(immutableParent, immutableFormat.attr);\n                        } else {\n                            dom.unstyle(immutableParent, immutableFormat.attr.style);\n                        }\n                    }\n                    nodes.splice(i, 1);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode, namedFormat, name;\n                this._handleImmutables(nodes, false);\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        name = dom.name(formatNode);\n                        namedFormat = EditorUtils.formatByName(name, this.format);\n                        if (namedFormat.attr.style) {\n                            dom.unstyle(formatNode, namedFormat.attr.style);\n                        }\n                        if (namedFormat.attr.className) {\n                            dom.removeClass(formatNode, namedFormat.attr.className);\n                        }\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var GreedyBlockFormatter = Class.extend({\n            init: function (format, values) {\n                var that = this;\n                that.format = format;\n                that.values = values;\n                that.finder = new BlockFormatFinder(format);\n            },\n            apply: function (nodes) {\n                var format = this.format;\n                var blocks = dom.blockParents(nodes);\n                var formatTag = format[0].tags[0];\n                var i, len, list, formatter, range;\n                var element;\n                var tagName;\n                var block;\n                var immutalbeParent;\n                if (blocks.length) {\n                    for (i = 0, len = blocks.length; i < len; i++) {\n                        block = blocks[i];\n                        immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n                        if (!immutalbeParent) {\n                            tagName = dom.name(block);\n                            if (tagName == 'li') {\n                                list = block.parentNode;\n                                formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                                range = this.editor.createRange();\n                                range.selectNode(blocks[i]);\n                                formatter.toggle(range);\n                            } else if (formatTag && (tagName == 'td' || block.attributes.contentEditable)) {\n                                new BlockFormatter(format, this.values).apply(block.childNodes);\n                            } else {\n                                element = dom.changeTag(block, formatTag);\n                                dom.attr(element, format[0].attr);\n                            }\n                        }\n                    }\n                } else {\n                    var blockFormatter = new BlockFormatter(format, this.values);\n                    blockFormatter.editor = this.editor;\n                    blockFormatter.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                this.apply(nodes);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            }\n        });\n        var BlockFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new BlockFormatFinder(options.format),\n                    formatter: function () {\n                        return new BlockFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        extend(Editor, {\n            BlockFormatFinder: BlockFormatFinder,\n            BlockFormatter: BlockFormatter,\n            GreedyBlockFormatter: GreedyBlockFormatter,\n            BlockFormatTool: BlockFormatTool\n        });\n        var listElements = [\n            'ul',\n            'ol',\n            'li'\n        ];\n        registerFormat('justifyLeft', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'left' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'left',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyLeft', new BlockFormatTool({\n            format: formats.justifyLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Left'\n            })\n        }));\n        registerFormat('justifyCenter', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'center' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'center',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyCenter', new BlockFormatTool({\n            format: formats.justifyCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Center'\n            })\n        }));\n        registerFormat('justifyRight', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'right' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'right',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyRight', new BlockFormatTool({\n            format: formats.justifyRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Right'\n            })\n        }));\n        registerFormat('justifyFull', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'justify' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'justify',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyFull', new BlockFormatTool({\n            format: formats.justifyFull,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Full'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/lists', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, BlockFormatFinder = Editor.BlockFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\n        var ListFormatFinder = BlockFormatFinder.extend({\n            init: function (tag) {\n                this.tag = tag;\n                var tags = this.tags = [\n                    tag == 'ul' ? 'ol' : 'ul',\n                    tag\n                ];\n                BlockFormatFinder.fn.init.call(this, [{ tags: tags }]);\n            },\n            isFormatted: function (nodes) {\n                var formatNodes = [];\n                var formatNode, i;\n                for (i = 0; i < nodes.length; i++) {\n                    formatNode = this.findFormat(nodes[i]);\n                    if (formatNode && dom.name(formatNode) == this.tag) {\n                        formatNodes.push(formatNode);\n                    }\n                }\n                if (formatNodes.length < 1) {\n                    return false;\n                }\n                if (formatNodes.length != nodes.length) {\n                    return false;\n                }\n                for (i = 0; i < formatNodes.length; i++) {\n                    if (formatNodes[i].parentNode != formatNode.parentNode) {\n                        break;\n                    }\n                    if (formatNodes[i] != formatNode) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var candidate = this.findFormat(nodes[0]);\n                if (candidate && dom.name(candidate) == this.tag) {\n                    return candidate;\n                }\n                return null;\n            }\n        });\n        var ListFormatter = Class.extend({\n            init: function (tag, unwrapTag) {\n                var that = this;\n                that.finder = new ListFormatFinder(tag);\n                that.tag = tag;\n                that.unwrapTag = unwrapTag;\n            },\n            isList: function (node) {\n                return dom.list(node);\n            },\n            immutables: function () {\n                return this.editor && !!this.editor.options.immutables;\n            },\n            wrap: function (list, nodes) {\n                var li = dom.create(list.ownerDocument, 'li'), i, node, isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.is(node, 'li')) {\n                        list.appendChild(node);\n                        continue;\n                    }\n                    if (this.isList(node)) {\n                        while (node.firstChild) {\n                            list.appendChild(node.firstChild);\n                        }\n                        continue;\n                    }\n                    if (dom.is(node, 'td')) {\n                        while (node.firstChild) {\n                            li.appendChild(node.firstChild);\n                        }\n                        list.appendChild(li);\n                        node.appendChild(list);\n                        list = list.cloneNode(false);\n                        li = li.cloneNode(false);\n                        continue;\n                    }\n                    li.appendChild(node);\n                    if (dom.isBlock(node)) {\n                        list.appendChild(li);\n                        if (!isImmutable(node)) {\n                            dom.unwrap(node);\n                        }\n                        li = li.cloneNode(false);\n                    }\n                }\n                if (li.firstChild) {\n                    list.appendChild(li);\n                }\n            },\n            containsAny: function (parent, nodes) {\n                for (var i = 0; i < nodes.length; i++) {\n                    if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            suitable: function (candidate, nodes) {\n                if (candidate.className == 'k-marker') {\n                    var sibling = candidate.nextSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                    sibling = candidate.previousSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                }\n                return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n            },\n            _parentLists: function (node) {\n                var editable = dom.closestEditable(node);\n                return $(node).parentsUntil(editable, 'ul,ol');\n            },\n            split: function (range) {\n                var nodes = textNodes(range);\n                var start, end, parents;\n                if (nodes.length) {\n                    start = dom.parentOfType(nodes[0], ['li']);\n                    end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                    range.setStartBefore(start);\n                    range.setEndAfter(end);\n                    for (var i = 0, l = nodes.length; i < l; i++) {\n                        var formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            parents = this._parentLists(formatNode);\n                            if (parents.length) {\n                                RangeUtils.split(range, parents.last()[0], true);\n                            } else {\n                                RangeUtils.split(range, formatNode, true);\n                            }\n                        }\n                    }\n                }\n            },\n            merge: function (tag, formatNode) {\n                var prev = formatNode.previousSibling, next;\n                while (prev && (prev.className == 'k-marker' || prev.nodeType == 3 && dom.isWhitespace(prev))) {\n                    prev = prev.previousSibling;\n                }\n                if (prev && dom.name(prev) == tag) {\n                    while (formatNode.firstChild) {\n                        prev.appendChild(formatNode.firstChild);\n                    }\n                    dom.remove(formatNode);\n                    formatNode = prev;\n                }\n                next = formatNode.nextSibling;\n                while (next && (next.className == 'k-marker' || next.nodeType == 3 && dom.isWhitespace(next))) {\n                    next = next.nextSibling;\n                }\n                if (next && dom.name(next) == tag) {\n                    while (formatNode.lastChild) {\n                        next.insertBefore(formatNode.lastChild, next.firstChild);\n                    }\n                    dom.remove(formatNode);\n                }\n            },\n            breakable: function (node) {\n                return node != node.ownerDocument.body && !/table|tbody|thead|tr|td/.test(dom.name(node)) && !node.attributes.contentEditable;\n            },\n            applyOnSection: function (section, nodes) {\n                var tag = this.tag;\n                var commonAncestor = dom.closestSplittableParent(nodes);\n                var ancestors = [];\n                var formatNode = this.finder.findSuitable(nodes);\n                if (!formatNode) {\n                    formatNode = new ListFormatFinder(tag == 'ul' ? 'ol' : 'ul').findSuitable(nodes);\n                }\n                var childNodes;\n                if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n                    childNodes = $.map(nodes, function (node) {\n                        return dom.parentOfType(node, ['td']);\n                    });\n                } else {\n                    childNodes = dom.significantChildNodes(commonAncestor);\n                    if ($.grep(childNodes, dom.isBlock).length) {\n                        childNodes = $.grep(childNodes, $.proxy(function (node) {\n                            return this.containsAny(node, nodes);\n                        }, this));\n                    }\n                    if (!childNodes.length) {\n                        childNodes = nodes;\n                    }\n                }\n                function pushAncestor() {\n                    ancestors.push(this);\n                }\n                for (var i = 0; i < childNodes.length; i++) {\n                    var child = childNodes[i];\n                    var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n                    if (!suitable) {\n                        continue;\n                    }\n                    if (formatNode && this.isList(child)) {\n                        $.each(child.children, pushAncestor);\n                        dom.remove(child);\n                    } else {\n                        ancestors.push(child);\n                    }\n                }\n                if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                    ancestors = [commonAncestor];\n                }\n                if (!formatNode) {\n                    formatNode = dom.create(commonAncestor.ownerDocument, tag);\n                    if (dom.isBlock(ancestors[0])) {\n                        dom.mergeAttributes(ancestors[0], formatNode);\n                    }\n                    dom.insertBefore(formatNode, ancestors[0]);\n                }\n                this.wrap(formatNode, ancestors);\n                while (dom.isBom(formatNode.nextSibling)) {\n                    dom.remove(formatNode.nextSibling);\n                }\n                if (!dom.is(formatNode, tag)) {\n                    dom.changeTag(formatNode, tag);\n                }\n                this.merge(tag, formatNode);\n            },\n            apply: function (nodes) {\n                var i = 0, sections = [], lastSection, lastNodes, section, node, l = nodes.length, immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n                function addLastSection() {\n                    if (lastSection) {\n                        sections.push({\n                            section: lastSection,\n                            nodes: lastNodes\n                        });\n                    }\n                }\n                for (i = 0; i < l; i++) {\n                    node = immutableParent(nodes[i]) || nodes[i];\n                    section = dom.closestEditable(node, [\n                        'td',\n                        'th',\n                        'body'\n                    ]);\n                    if (!lastSection || section != lastSection) {\n                        addLastSection();\n                        lastNodes = [node];\n                        lastSection = section;\n                    } else {\n                        lastNodes.push(node);\n                    }\n                }\n                addLastSection();\n                for (i = 0; i < sections.length; i++) {\n                    this.applyOnSection(sections[i].section, sections[i].nodes);\n                }\n            },\n            unwrap: function (ul) {\n                var fragment = ul.ownerDocument.createDocumentFragment(), unwrapTag = this.unwrapTag, parents, li, p, child;\n                for (li = ul.firstChild; li; li = li.nextSibling) {\n                    p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    while (li.firstChild) {\n                        child = li.firstChild;\n                        if (dom.isBlock(child)) {\n                            if (p.firstChild) {\n                                fragment.appendChild(p);\n                                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                            }\n                            fragment.appendChild(child);\n                        } else {\n                            p.appendChild(child);\n                        }\n                    }\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                    }\n                }\n                parents = this._parentLists(ul);\n                if (parents[0]) {\n                    dom.insertAfter(fragment, parents.last()[0]);\n                    parents.last().remove();\n                } else {\n                    dom.insertAfter(fragment, ul);\n                }\n                dom.remove(ul);\n            },\n            remove: function (nodes) {\n                var formatNode;\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        this.unwrap(formatNode);\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = textNodes(range), ancestor = range.commonAncestorContainer;\n                if (!nodes.length) {\n                    range.selectNodeContents(ancestor);\n                    nodes = textNodes(range);\n                    if (!nodes.length) {\n                        var text = ancestor.ownerDocument.createTextNode('');\n                        range.startContainer.appendChild(text);\n                        nodes = [text];\n                        range.selectNode(text.parentNode);\n                    }\n                }\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.split(range);\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var ListCommand = Command.extend({\n            init: function (options) {\n                options.formatter = new ListFormatter(options.tag);\n                Command.fn.init.call(this, options);\n            }\n        });\n        var ListTool = FormatTool.extend({\n            init: function (options) {\n                this.options = options;\n                FormatTool.fn.init.call(this, extend(options, { finder: new ListFormatFinder(options.tag) }));\n            },\n            command: function (commandArguments) {\n                return new ListCommand(extend(commandArguments, { tag: this.options.tag }));\n            }\n        });\n        extend(Editor, {\n            ListFormatFinder: ListFormatFinder,\n            ListFormatter: ListFormatter,\n            ListCommand: ListCommand,\n            ListTool: ListTool\n        });\n        registerTool('insertUnorderedList', new ListTool({\n            tag: 'ul',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert unordered list'\n            })\n        }));\n        registerTool('insertOrderedList', new ListTool({\n            tag: 'ol',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert ordered list'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatting', ['editor/plugins/inlineformat'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, DelayedExecutionTool = Editor.DelayedExecutionTool, Command = Editor.Command, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var FormattingTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                var that = this;\n                Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n                that.type = 'kendoSelectBox';\n                that.finder = {\n                    getFormat: function () {\n                        return '';\n                    }\n                };\n            },\n            options: {\n                items: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                width: 110\n            },\n            toFormattingItem: function (item) {\n                var value = item.value;\n                if (!value) {\n                    return item;\n                }\n                if (item.tag || item.className) {\n                    return item;\n                }\n                var dot = value.indexOf('.');\n                if (dot === 0) {\n                    item.className = value.substring(1);\n                } else if (dot == -1) {\n                    item.tag = value;\n                } else {\n                    item.tag = value.substring(0, dot);\n                    item.className = value.substring(dot + 1);\n                }\n                return item;\n            },\n            command: function (args) {\n                var that = this;\n                var item = args.value;\n                item = this.toFormattingItem(item);\n                return new Editor.FormatCommand({\n                    range: args.range,\n                    formatter: function () {\n                        var formatter, tags = (item.tag || item.context || 'span').split(','), format = [{\n                                    tags: tags,\n                                    attr: { className: item.className || '' }\n                                }];\n                        if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                            formatter = new Editor.GreedyInlineFormatter(format);\n                        } else {\n                            formatter = new Editor.GreedyBlockFormatter(format);\n                        }\n                        formatter.editor = that.editor;\n                        return formatter;\n                    }\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor;\n                var options = this.options;\n                var toolName = options.name;\n                var that = this;\n                var selectBox;\n                that.editor = editor;\n                ui.width(options.width);\n                selectBox = ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: options.items || editor.options[toolName],\n                    title: editor.options.messages[toolName],\n                    autoSize: true,\n                    change: function () {\n                        var dataItem = this.dataItem();\n                        if (dataItem) {\n                            Tool.exec(editor, toolName, dataItem.toJSON());\n                        }\n                    },\n                    dataBound: function () {\n                        var i, items = this.dataSource.data();\n                        for (i = 0; i < items.length; i++) {\n                            items[i] = that.toFormattingItem(items[i]);\n                        }\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                }).data('kendoSelectBox');\n                ui.attr('title', initOptions.title);\n                selectBox.wrapper.attr('title', initOptions.title);\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            getFormattingValue: function (items, nodes) {\n                for (var i = 0; i < items.length; i++) {\n                    var item = items[i];\n                    var tag = item.tag || item.context || '';\n                    var className = item.className ? '.' + item.className : '';\n                    var selector = tag + className;\n                    var element = $(nodes[0]).closest(selector)[0];\n                    if (!element) {\n                        continue;\n                    }\n                    if (nodes.length == 1) {\n                        return item.value;\n                    }\n                    for (var n = 1; n < nodes.length; n++) {\n                        if (!$(nodes[n]).closest(selector)[0]) {\n                            break;\n                        } else if (n == nodes.length - 1) {\n                            return item.value;\n                        }\n                    }\n                }\n                return '';\n            },\n            update: function (ui, nodes) {\n                var selectBox = $(ui).data(this.type);\n                if (!selectBox) {\n                    return;\n                }\n                var dataSource = selectBox.dataSource, items = dataSource.data(), i, context, ancestor = dom.commonAncestor.apply(null, nodes);\n                if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                    return;\n                } else {\n                    this._ancestor = ancestor;\n                }\n                for (i = 0; i < items.length; i++) {\n                    context = items[i].context;\n                    items[i].visible = !context || !!$(ancestor).closest(context).length;\n                }\n                dataSource.filter([{\n                        field: 'visible',\n                        operator: 'eq',\n                        value: true\n                    }]);\n                DelayedExecutionTool.fn.update.call(this, ui, nodes);\n                selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n                selectBox.wrapper.toggleClass('k-state-disabled', !dataSource.view().length);\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        var CleanFormatCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true);\n                this.tagsToClean = this.options.remove || 'strong,em,span,sup,sub,del,b,i,u,font'.split(',');\n                RangeUtils.wrapSelectedElements(range);\n                var nodes = RangeUtils.mapAll(range, function (node) {\n                    return node;\n                });\n                for (var c = nodes.length - 1; c >= 0; c--) {\n                    var node = nodes[c];\n                    if (!this.immutableParent(node)) {\n                        this.clean(node);\n                    }\n                }\n                this.releaseRange(range);\n            },\n            clean: function (node) {\n                if (!node || dom.isMarker(node)) {\n                    return;\n                }\n                var name = dom.name(node);\n                if (name == 'ul' || name == 'ol') {\n                    var listFormatter = new Editor.ListFormatter(name);\n                    var prev = node.previousSibling;\n                    var next = node.nextSibling;\n                    listFormatter.unwrap(node);\n                    for (; prev && prev != next; prev = prev.nextSibling) {\n                        this.clean(prev);\n                    }\n                } else if (name == 'blockquote') {\n                    dom.changeTag(node, 'p');\n                } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                        this.clean(node.childNodes[i]);\n                    }\n                    node.removeAttribute('style');\n                    node.removeAttribute('class');\n                } else {\n                    unwrapListItem(node);\n                }\n                if ($.inArray(name, this.tagsToClean) > -1) {\n                    dom.unwrap(node);\n                }\n            },\n            immutableParent: function (node) {\n                return this.immutables() && Editor.Immutables.immutableParent(node);\n            }\n        });\n        function unwrapListItem(node) {\n            var li = dom.closestEditableOfType(node, ['li']);\n            if (li) {\n                var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n                var range = kendo.ui.editor.W3CRange.fromNode(node);\n                range.selectNode(li);\n                listFormatter.toggle(range);\n            }\n        }\n        $.extend(Editor, {\n            FormattingTool: FormattingTool,\n            CleanFormatCommand: CleanFormatCommand\n        });\n        registerTool('formatting', new FormattingTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Format'\n            })\n        }));\n        registerTool('cleanFormatting', new Tool({\n            command: CleanFormatCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Clean formatting'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/image', [\n        'kendo.imagebrowser',\n        'editor/command'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, keys = kendo.keys, KEDITORIMAGEURL = '#k-editor-image-url', KEDITORIMAGETITLE = '#k-editor-image-title', KEDITORIMAGEWIDTH = '#k-editor-image-width', KEDITORIMAGEHEIGHT = '#k-editor-image-height';\n        var ImageCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.async = true;\n                that.attributes = {};\n            },\n            insertImage: function (img, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.src && attributes.src != 'http://') {\n                    var removeIEAttributes = function () {\n                        setTimeout(function () {\n                            if (!attributes.width) {\n                                img.removeAttribute('width');\n                            }\n                            if (!attributes.height) {\n                                img.removeAttribute('height');\n                            }\n                            img.removeAttribute('complete');\n                        });\n                    };\n                    if (!img) {\n                        img = dom.create(doc, 'img', attributes);\n                        img.onload = img.onerror = removeIEAttributes;\n                        range.deleteContents();\n                        range.insertNode(img);\n                        if (!img.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), img);\n                        }\n                        removeIEAttributes();\n                        range.setStartAfter(img);\n                        range.setEndAfter(img);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        img.onload = img.onerror = removeIEAttributes;\n                        dom.attr(img, attributes);\n                        removeIEAttributes();\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser k-imagebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-title\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-width\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-height\">' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                if (!that.insertImage(RangeUtils.image(range), range)) {\n                    that.releaseRange(range);\n                }\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), applied = false, img = RangeUtils.image(range), imageWidth = img && img.getAttribute('width') || '', imageHeight = img && img.getAttribute('height') || '', dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, imageBrowser = options.imageBrowser, showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertImage,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10), h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n                    that.attributes = {\n                        src: element.find(KEDITORIMAGEURL).val().replace(/ /g, '%20'),\n                        alt: element.find(KEDITORIMAGETITLE).val()\n                    };\n                    that.attributes.width = null;\n                    that.attributes.height = null;\n                    if (!isNaN(w) && w > 0) {\n                        that.attributes.width = w;\n                    }\n                    if (!isNaN(h) && h > 0) {\n                        that.attributes.height = h;\n                    }\n                    applied = that.insertImage(img, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORIMAGEURL).val(img ? img.getAttribute('src', 2) : 'http://').end().find(KEDITORIMAGETITLE).val(img ? img.alt : '').end().find(KEDITORIMAGEWIDTH).val(imageWidth).end().find(KEDITORIMAGEHEIGHT).val(imageHeight).end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    this._imageBrowser = new kendo.ui.ImageBrowser(element.find('.k-imagebrowser'), extend({}, imageBrowser));\n                    this._imageBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORIMAGEURL).val(this.value());\n                        }\n                    });\n                    this._imageBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORIMAGEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.ImageCommand = ImageCommand;\n        registerTool('insertImage', new Editor.Tool({\n            command: ImageCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert Image'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/import', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n        var ImportCommand = Command.extend({\n            exec: function () {\n                (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n            },\n            _initializeUploadWidget: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var importOptions = editor.options['import'];\n                var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n                    success: proxy(cmd._onUploadSuccess, cmd),\n                    progress: proxy(cmd._onUploadProgress, cmd),\n                    select: proxy(cmd._onUploadSelect, cmd),\n                    error: proxy(cmd._onUploadError, cmd),\n                    complete: proxy(cmd._onUploadComplete, cmd),\n                    showFileList: false,\n                    multiple: false,\n                    async: {\n                        saveUrl: importOptions.proxyUrl,\n                        autoUpload: true,\n                        saveField: 'file'\n                    },\n                    validation: {\n                        allowedExtensions: importOptions.allowedExtensions,\n                        maxFileSize: importOptions.maxFileSize\n                    }\n                }).getKendoUpload();\n                editor._uploadWidget = upload;\n                return upload;\n            },\n            _onUploadComplete: function (ev) {\n                this._trigger('complete', ev);\n                ev.sender.clearAllFiles();\n                this._removeLoadingOverlay();\n            },\n            _onUploadSuccess: function (ev) {\n                this.editor.value(ev.response.html.replace(/<\\/?body>/gi, ''));\n                this._trigger('success', ev);\n            },\n            _onUploadProgress: function (ev) {\n                this._trigger('progress', ev);\n            },\n            _onUploadSelect: function (ev) {\n                this._trigger('select', ev);\n                if (!ev.files[0].validationErrors) {\n                    this._initLoadingOverlay();\n                }\n            },\n            _onUploadError: function (ev) {\n                this._trigger('error', ev);\n            },\n            _trigger: function (eventType, uploadEvent) {\n                var editor = this.editor;\n                var importOptions = editor.options['import'];\n                if (typeof importOptions[eventType] === 'function') {\n                    importOptions[eventType].call(editor, uploadEvent);\n                }\n            },\n            _initLoadingOverlay: function () {\n                var editable = this.editor.body;\n                if (Editor.Dom.is(editable, 'body')) {\n                    this._iframeWrapper = this._container = this.editor.wrapper.find('iframe').parent().css({ position: 'relative' }).append(loadingOverlay);\n                } else {\n                    this._container = $(editable).append(loadingOverlay);\n                }\n                kendo.ui.progress(this._container, true);\n            },\n            _removeLoadingOverlay: function () {\n                kendo.ui.progress(this._container, false);\n                $(this._iframeWrapper).css({ position: '' });\n                delete this._container;\n                delete this._iframeWrapper;\n            }\n        });\n        extend(Editor, { ImportCommand: ImportCommand });\n        registerTool('import', new Tool({\n            command: ImportCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Import'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/insert', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, GenericCommand = editorNS.GenericCommand, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, RestorePoint = editorNS.RestorePoint, extend = $.extend;\n        var InsertHtmlCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                var options = this.options;\n                var range = options.range;\n                var body = editor.body;\n                var startRestorePoint = new RestorePoint(range, body);\n                var html = options.html || options.value || '';\n                editor.selectRange(range);\n                editor.clipboard.paste(html, options);\n                if (options.postProcess) {\n                    options.postProcess(editor, editor.getRange());\n                }\n                var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n                genericCommand.editor = editor;\n                editor.undoRedoStack.push(genericCommand);\n                editor.focus();\n            }\n        });\n        var InsertHtmlTool = Tool.extend({\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, dataSource = options.items ? options.items : editor.options.insertHtml;\n                this._selectBox = new editorNS.SelectBox(ui, {\n                    dataSource: dataSource,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    change: function () {\n                        Tool.exec(editor, 'insertHtml', this.value());\n                    },\n                    title: editor.options.messages.insertHtml,\n                    highlightFirst: false\n                });\n                ui.attr('title', initOptions.title);\n                this._selectBox.wrapper.attr('title', initOptions.title);\n            },\n            command: function (commandArguments) {\n                return new InsertHtmlCommand(commandArguments);\n            },\n            update: function (ui) {\n                var selectbox = ui.data('kendoSelectBox') || ui.find('select').data('kendoSelectBox');\n                selectbox.close();\n                selectbox.value(selectbox.options.title);\n            }\n        });\n        extend(editorNS, {\n            InsertHtmlCommand: InsertHtmlCommand,\n            InsertHtmlTool: InsertHtmlTool\n        });\n        registerTool('insertHtml', new InsertHtmlTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Insert HTML',\n                initialValue: 'Insert HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/export', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, defaultExportAsItems = [\n                {\n                    text: 'Docx',\n                    value: 'docx'\n                },\n                {\n                    text: 'Rtf',\n                    value: 'rtf'\n                },\n                {\n                    text: 'Pdf',\n                    value: 'pdf'\n                },\n                {\n                    text: 'Html',\n                    value: 'html'\n                },\n                {\n                    text: 'Plain Text',\n                    value: 'txt'\n                }\n            ];\n        var ExportAsCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.exportType = options.exportType;\n            },\n            exec: function () {\n                var cmd = this;\n                var range = this.lockRange(true);\n                cmd.postToProxy();\n                cmd.releaseRange(range);\n            },\n            postToProxy: function () {\n                this.generateForm().appendTo('body').submit().remove();\n            },\n            generateForm: function () {\n                var cmd = this;\n                var exportAsOptions = cmd.editor.options.exportAs;\n                var form = $('<form>').attr({\n                    action: exportAsOptions && exportAsOptions.proxyURL || '',\n                    method: 'POST'\n                });\n                form.append([\n                    cmd.valueInput(),\n                    cmd.exportTypeInput(),\n                    cmd.fileNameInput()\n                ]);\n                return form;\n            },\n            valueInput: function () {\n                var editor = this.editor;\n                return $('<input>').attr({\n                    value: editor.encodedValue(),\n                    name: 'value',\n                    type: 'hidden'\n                });\n            },\n            exportTypeInput: function () {\n                var cmd = this;\n                return $('<input>').attr({\n                    value: cmd.exportType,\n                    name: 'exportType',\n                    type: 'hidden'\n                });\n            },\n            fileNameInput: function () {\n                var editor = this.editor;\n                var exportAsOptions = editor.options.exportAs;\n                var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr('id') || 'editor';\n                return $('<input>').attr({\n                    value: fileName,\n                    name: 'fileName',\n                    type: 'hidden'\n                });\n            }\n        });\n        var ExportAsTool = Tool.extend({\n            init: function (options) {\n                var tool = this;\n                Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n                tool.type = 'kendoSelectBox';\n            },\n            options: {\n                items: defaultExportAsItems,\n                width: 115\n            },\n            command: function (args) {\n                var value = args.value;\n                return new Editor.ExportAsCommand({\n                    range: args.range,\n                    exportType: value.exportType\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var tool = this;\n                var editor = initOptions.editor;\n                var options = tool.options;\n                var toolName = options.name;\n                var changeHandler = proxy(tool.changeHandler, tool);\n                var dataSource = options.items || editor.options[toolName];\n                var selectBox;\n                dataSource.unshift({\n                    text: editor.options.messages[toolName],\n                    value: ''\n                });\n                tool.editor = editor;\n                ui.width(options.width);\n                selectBox = ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    autoSize: true,\n                    change: changeHandler,\n                    open: function (e) {\n                        var sender = e.sender;\n                        sender.items()[0].style.display = 'none';\n                        sender.unbind('open');\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                }).data('kendoSelectBox');\n                ui.attr('title', initOptions.title);\n                selectBox.wrapper.attr('title', initOptions.title);\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            changeHandler: function (e) {\n                var sender = e.sender;\n                var dataItem = sender.dataItem();\n                var value = dataItem && dataItem.value;\n                this._exec(value);\n                sender.value('');\n            },\n            _exec: function (value) {\n                if (value) {\n                    Tool.exec(this.editor, this.options.name, { exportType: value });\n                }\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        extend(Editor, {\n            ExportAsTool: ExportAsTool,\n            ExportAsCommand: ExportAsCommand\n        });\n        registerTool('exportAs', new ExportAsTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Export As'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/indent', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, blockElements = dom.blockElements, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatter = Editor.BlockFormatter;\n        function indent(node, value) {\n            var isRtl = $(node).css('direction') == 'rtl', indentDirection = isRtl ? 'Right' : 'Left', property = dom.name(node) != 'td' ? 'margin' + indentDirection : 'padding' + indentDirection;\n            if (value === undefined) {\n                return node.style[property] || 0;\n            } else {\n                if (value > 0) {\n                    node.style[property] = value + 'px';\n                } else {\n                    node.style[property] = '';\n                    if (!node.style.cssText) {\n                        node.removeAttribute('style');\n                    }\n                }\n            }\n        }\n        var IndentFormatter = Class.extend({\n            init: function () {\n                this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n            },\n            apply: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targets = [], i, len, formatNode, parentList, sibling;\n                formatNodes = this.mapImmutables(formatNodes);\n                if (formatNodes.length) {\n                    for (i = 0, len = formatNodes.length; i < len; i++) {\n                        if (dom.is(formatNodes[i], 'li')) {\n                            if (!$(formatNodes[i]).index()) {\n                                targets.push(formatNodes[i].parentNode);\n                            } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                                targets.push(formatNodes[i]);\n                            }\n                        } else {\n                            targets.push(formatNodes[i]);\n                        }\n                    }\n                    while (targets.length) {\n                        formatNode = targets.shift();\n                        if (dom.is(formatNode, 'li')) {\n                            parentList = formatNode.parentNode;\n                            sibling = $(formatNode).prev('li');\n                            var siblingList = sibling.find('ul,ol').last();\n                            var nestedList = $(formatNode).children('ul,ol')[0];\n                            if (nestedList && sibling[0]) {\n                                if (siblingList[0]) {\n                                    siblingList.append(formatNode);\n                                    siblingList.append($(nestedList).children());\n                                    dom.remove(nestedList);\n                                } else {\n                                    sibling.append(nestedList);\n                                    nestedList.insertBefore(formatNode, nestedList.firstChild);\n                                }\n                            } else {\n                                nestedList = sibling.children('ul,ol')[0];\n                                if (!nestedList) {\n                                    nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList));\n                                    sibling.append(nestedList);\n                                }\n                                while (formatNode && formatNode.parentNode == parentList) {\n                                    nestedList.appendChild(formatNode);\n                                    formatNode = targets.shift();\n                                }\n                            }\n                        } else {\n                            var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                            indent(formatNode, marginLeft);\n                            for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                                if ($.contains(formatNode, targets[targetIndex])) {\n                                    targets.splice(targetIndex, 1);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    var formatter = new BlockFormatter([{ tags: ['p'] }], { style: { marginLeft: 30 } });\n                    formatter.apply(nodes);\n                }\n            },\n            mapImmutables: function (nodes) {\n                if (!this.immutables) {\n                    return nodes;\n                } else {\n                    var immutables = [];\n                    return $.map(nodes, function (node) {\n                        var immutable = Editor.Immutables.immutableParent(node);\n                        if (immutable) {\n                            if ($.inArray(immutable, immutables) === -1) {\n                                immutables.push(immutable);\n                            } else {\n                                return null;\n                            }\n                        }\n                        return immutable || node;\n                    });\n                }\n            },\n            remove: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targetNode, i, len, list, listParent, siblings, formatNode, marginLeft;\n                formatNodes = this.mapImmutables(formatNodes);\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    formatNode = $(formatNodes[i]);\n                    if (formatNode.is('li')) {\n                        list = formatNode.parent();\n                        listParent = list.parent();\n                        if (listParent.is('li,ul,ol') && !indent(list[0])) {\n                            if (targetNode && $.contains(targetNode, listParent[0])) {\n                                continue;\n                            }\n                            siblings = formatNode.nextAll('li');\n                            if (siblings.length) {\n                                $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                            }\n                            if (listParent.is('li')) {\n                                formatNode.insertAfter(listParent);\n                            } else {\n                                formatNode.appendTo(listParent);\n                            }\n                            if (!list.children('li').length) {\n                                list.remove();\n                            }\n                            continue;\n                        } else {\n                            if (targetNode == list[0]) {\n                                continue;\n                            }\n                            targetNode = list[0];\n                        }\n                    } else {\n                        targetNode = formatNodes[i];\n                    }\n                    marginLeft = parseInt(indent(targetNode), 10) - 30;\n                    indent(targetNode, marginLeft);\n                }\n            }\n        });\n        var IndentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.apply(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.remove(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                $.extend(this.options, { immutables: options.editor && options.editor.options.immutables });\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var suitableNodes = this.finder.findSuitable(nodes), isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n                for (i = 0, len = suitableNodes.length; i < len; i++) {\n                    suitable = suitableNodes[i];\n                    if (this.options.immutables) {\n                        immutableParent = Editor.Immutables.immutableParent(suitable);\n                        if (immutableParent) {\n                            suitable = immutableParent;\n                        }\n                    }\n                    isOutdentable = indent(suitable);\n                    if (!isOutdentable) {\n                        listParentsCount = $(suitable).parents('ul,ol').length;\n                        isOutdentable = dom.is(suitable, 'li') && (listParentsCount > 1 || indent(suitable.parentNode)) || dom.ofType(suitable, [\n                            'ul',\n                            'ol'\n                        ]) && listParentsCount > 0;\n                    }\n                    if (isOutdentable) {\n                        ui.removeClass('k-state-disabled');\n                        return;\n                    }\n                }\n                ui.addClass('k-state-disabled').removeClass('k-state-hover');\n            }\n        });\n        extend(Editor, {\n            IndentFormatter: IndentFormatter,\n            IndentCommand: IndentCommand,\n            OutdentCommand: OutdentCommand,\n            OutdentTool: OutdentTool\n        });\n        registerTool('indent', new Tool({\n            command: IndentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Indent'\n            })\n        }));\n        registerTool('outdent', new OutdentTool({\n            command: OutdentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Outdent'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/linebreak', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, editorNS = kendo.ui.editor, dom = editorNS.Dom, Command = editorNS.Command, Tool = editorNS.Tool, BlockFormatter = editorNS.BlockFormatter, normalize = dom.normalize, RangeUtils = editorNS.RangeUtils, registerTool = editorNS.EditorUtils.registerTool;\n        var ParagraphCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            _insertMarker: function (doc, range) {\n                var marker = dom.create(doc, 'a'), container;\n                marker.className = 'k-marker';\n                range.insertNode(marker);\n                if (!marker.parentNode) {\n                    container = range.commonAncestorContainer;\n                    container.innerHTML = '';\n                    container.appendChild(marker);\n                }\n                normalize(marker.parentNode);\n                return marker;\n            },\n            _moveFocus: function (range, candidate) {\n                if (dom.isEmpty(candidate)) {\n                    range.setStartBefore(candidate);\n                } else {\n                    range.selectNodeContents(candidate);\n                    var focusNode = RangeUtils.textNodes(range)[0];\n                    if (!focusNode) {\n                        while (candidate.childNodes.length && !dom.is(candidate.firstChild, 'br')) {\n                            candidate = candidate.firstChild;\n                        }\n                        focusNode = candidate;\n                    }\n                    if (dom.isEmpty(focusNode)) {\n                        range.setStartBefore(focusNode);\n                    } else {\n                        if (dom.emptyNode(focusNode)) {\n                            focusNode.innerHTML = '\\uFEFF';\n                        }\n                        var startNode = focusNode.firstChild || focusNode;\n                        if (dom.isDataNode(startNode)) {\n                            range.setStart(startNode, 0);\n                        } else {\n                            range.setStartBefore(startNode);\n                        }\n                    }\n                }\n            },\n            shouldTrim: function (range) {\n                var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','), startInBlock = dom.parentOfType(range.startContainer, blocks), endInBlock = dom.parentOfType(range.endContainer, blocks);\n                return startInBlock && !endInBlock || !startInBlock && endInBlock;\n            },\n            _blankAfter: function (node) {\n                while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === '')) {\n                    node = node.nextSibling;\n                }\n                return !node;\n            },\n            exec: function () {\n                var range = this.getRange(), doc = RangeUtils.documentFromRange(range), parent, previous, next, emptyParagraphContent = editorNS.emptyElementContent, paragraph, marker, li, heading, tableNode, rng, shouldTrim;\n                this.expandImmutablesIn(range);\n                shouldTrim = this.shouldTrim(range);\n                range.deleteContents();\n                marker = this._insertMarker(doc, range);\n                dom.stripBomNode(marker.previousSibling);\n                dom.stripBomNode(marker.nextSibling);\n                li = dom.closestEditableOfType(marker, ['li']);\n                heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n                tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n                if (li) {\n                    if (dom.emptyNode(li)) {\n                        paragraph = dom.create(doc, 'p');\n                        if (dom.next(li)) {\n                            rng = range.cloneRange();\n                            rng.selectNode(li);\n                            RangeUtils.split(rng, li.parentNode);\n                        }\n                        var br = $('br', li);\n                        if (br.length == 1) {\n                            br.remove();\n                        }\n                        var parentNode = li.parentNode;\n                        var parentChildrenLength = li.parentNode.children.length;\n                        var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n                        dom.insertAfter(paragraph, parentNode);\n                        dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n                        if (firstChild && firstChild !== marker) {\n                            paragraph.appendChild(firstChild);\n                            paragraph.appendChild(marker);\n                        } else {\n                            paragraph.innerHTML = emptyParagraphContent;\n                        }\n                        next = paragraph;\n                    }\n                } else if (heading && this._blankAfter(marker)) {\n                    paragraph = this._insertParagraphAfter(heading);\n                    dom.remove(marker);\n                    next = paragraph;\n                } else if (tableNode) {\n                    paragraph = this._insertParagraphAfter(tableNode);\n                    dom.remove(marker);\n                    next = paragraph;\n                }\n                if (!next) {\n                    if (!(li || heading)) {\n                        new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                    }\n                    range.selectNode(marker);\n                    parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n                    RangeUtils.split(range, parent, shouldTrim);\n                    previous = parent.previousSibling;\n                    if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                        previous = previous.firstChild;\n                    }\n                    next = parent.nextSibling;\n                    this.clean(previous, { links: true });\n                    this.clean(next, { links: true });\n                    if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                        next = next.firstChild;\n                    }\n                    dom.remove(parent);\n                    normalize(previous);\n                }\n                normalize(next);\n                this._moveFocus(range, next);\n                range.collapse(true);\n                dom.scrollTo(next, true);\n                RangeUtils.selectRange(range);\n            },\n            _insertParagraphAfter: function (node) {\n                var range = this.getRange();\n                var doc = RangeUtils.documentFromRange(range);\n                var emptyElementContent = editorNS.emptyElementContent;\n                var paragraph = dom.create(doc, 'p');\n                dom.insertAfter(paragraph, node);\n                paragraph.innerHTML = emptyElementContent;\n                return paragraph;\n            },\n            clean: function (node, options) {\n                var root = node;\n                if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                    dom.remove(node.firstChild);\n                }\n                if (dom.isDataNode(node) && !node.nodeValue) {\n                    node = node.parentNode;\n                }\n                if (node) {\n                    var siblings = false;\n                    while (node.firstChild && node.firstChild.nodeType == 1) {\n                        siblings = siblings || dom.significantNodes(node.childNodes).length > 1;\n                        node = node.firstChild;\n                    }\n                    if (!dom.isEmpty(node) && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                        $(root).find('.k-br').remove();\n                        node.innerHTML = editorNS.emptyElementContent;\n                    }\n                    if (options && options.links) {\n                        while (node != root) {\n                            if (dom.is(node, 'a') && dom.emptyNode(node)) {\n                                dom.unwrap(node);\n                                break;\n                            }\n                            node = node.parentNode;\n                        }\n                    }\n                }\n            }\n        });\n        var NewLineCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.getRange();\n                this.expandImmutablesIn(range);\n                var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n                var node = range.startContainer;\n                var filler;\n                var browser = kendo.support.browser;\n                var oldIE = browser.msie && browser.version < 11;\n                var tableNode = dom.is(node, 'table') && node;\n                range.deleteContents();\n                if (tableNode) {\n                    dom.insertAfter(br, tableNode);\n                } else {\n                    range.insertNode(br);\n                }\n                normalize(br.parentNode);\n                if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                    filler = br.cloneNode(true);\n                    filler.className = 'k-br';\n                    dom.insertAfter(filler, br);\n                }\n                range.setStartAfter(br);\n                range.collapse(true);\n                dom.scrollTo(br.nextSibling || br, true);\n                RangeUtils.selectRange(range);\n            }\n        });\n        extend(editorNS, {\n            ParagraphCommand: ParagraphCommand,\n            NewLineCommand: NewLineCommand\n        });\n        registerTool('insertLineBreak', new Tool({\n            key: 13,\n            shift: true,\n            command: NewLineCommand\n        }));\n        registerTool('insertParagraph', new Tool({\n            key: 13,\n            command: ParagraphCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/file', [\n        'kendo.filebrowser',\n        'editor/plugins/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, LinkFormatter = Editor.LinkFormatter, textNodes = RangeUtils.textNodes, keys = kendo.keys, KEDITORFILEURL = '#k-editor-file-url', KEDITORFILETEXT = '#k-editor-file-text', KEDITORFILETITLE = '#k-editor-file-title';\n        var FileCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.formatter = new LinkFormatter();\n                that.async = true;\n                that.attributes = {};\n            },\n            insertFile: function (file, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.href && attributes.href != 'http://') {\n                    if (!file) {\n                        file = dom.create(doc, 'a', { href: attributes.href });\n                        file.innerHTML = attributes.innerHTML;\n                        file.title = attributes.title;\n                        range.deleteContents();\n                        range.insertNode(file);\n                        if (!file.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), file);\n                        }\n                        range.setStartAfter(file);\n                        range.setEndAfter(file);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        dom.attr(file, attributes);\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-file-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-text\">#: messages.fileText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-file-text\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-file-title\">' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                this.formatter.apply(range, this.attributes);\n                that.releaseRange(range);\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), nodes = textNodes(range), applied = false, file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null, dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, fileBrowser = options.fileBrowser, showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertFile,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, href = element.find(KEDITORFILEURL).val().replace(/ /g, '%20'), innerHTML = element.find(KEDITORFILETEXT).val(), title = element.find(KEDITORFILETITLE).val();\n                    that.attributes = {\n                        href: href,\n                        innerHTML: innerHTML !== '' ? innerHTML : href,\n                        title: title\n                    };\n                    applied = that.insertFile(file, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORFILEURL).val(file ? file.getAttribute('href', 2) : 'http://').end().find(KEDITORFILETEXT).val(file ? file.innerText : '').end().find(KEDITORFILETITLE).val(file ? file.title : '').end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    that._fileBrowser = new kendo.ui.FileBrowser(element.find('.k-filebrowser'), extend({}, fileBrowser));\n                    that._fileBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORFILEURL).val(this.value());\n                        }\n                    });\n                    that._fileBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORFILEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.FileCommand = FileCommand;\n        registerTool('insertFile', new Editor.Tool({\n            command: FileCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert File'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/tables', [\n        'editor/plugins/formatblock',\n        'editor/plugins/insert'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, Command = Editor.Command, NS = 'kendoEditor', ACTIVESTATE = 'k-state-active', SELECTEDSTATE = 'k-state-selected', SCOPE = 'scope', ROW = 'row', COL = 'col', ROWGROUP = 'rowgroup', COLGROUP = 'colgroup', COLSPAN = 'colspan', ROWSPAN = 'rowspan', TABLE = 'table', THEAD = 'thead', TBODY = 'tbody', TR = 'tr', TD = 'td', TH = 'th', Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InsertHtmlCommand = Editor.InsertHtmlCommand, BlockFormatFinder = Editor.BlockFormatFinder, registerTool = Editor.EditorUtils.registerTool, getTouches = kendo.getTouches;\n        var template = kendo.template;\n        var columnTemplate = '<td style=\\'width:#=width#%;\\'>#=content#</td>';\n        var tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n        var TableCommand = InsertHtmlCommand.extend({\n            init: function (options) {\n                var o = $.extend({\n                    postProcess: this.postProcess,\n                    skipCleaners: true\n                }, options || {});\n                InsertHtmlCommand.fn.init.call(this, o);\n            },\n            _tableHtml: function (rows, columns) {\n                rows = rows || 1;\n                columns = columns || 1;\n                var columnHtml = template(columnTemplate)({\n                    width: 100 / columns,\n                    content: Editor.emptyTableCellContent\n                });\n                var rowHeight = 100 / rows;\n                return '<table class=\\'k-table\\' data-last>' + new Array(rows + 1).join('<tr style=\\'height:' + rowHeight + '%;\\'>' + new Array(columns + 1).join(columnHtml) + '</tr>') + '</table>';\n            },\n            postProcess: function (editor, range) {\n                var insertedTable = $('table[data-last]', editor.document).removeAttr('data-last');\n                range.setStart(insertedTable.find(TD)[0], 0);\n                range.collapse(true);\n                editor.selectRange(range);\n            },\n            exec: function () {\n                var options = this.options;\n                options.html = this._tableHtml(options.rows, options.columns);\n                InsertHtmlCommand.fn.exec.call(this);\n            }\n        });\n        var PopupTool = Tool.extend({\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                var popup = $(this.options.popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    copyAnchorStyles: false,\n                    open: proxy(this._open, this),\n                    activate: proxy(this._activate, this),\n                    close: proxy(this._close, this)\n                }).data('kendoPopup');\n                ui.click(proxy(this._toggle, this)).keydown(proxy(this._keydown, this));\n                var editor = this._editor = options.editor;\n                this._popup = popup;\n                var tableWizard = new Editor.TableWizardTool({\n                    template: new ToolTemplate({\n                        template: EditorUtils.tableWizardButtonTemplate,\n                        title: editor.options.messages.tableWizard\n                    }),\n                    command: Editor.TableWizardCommand,\n                    insertNewTable: true\n                });\n                registerTool('tableWizardInsert', tableWizard);\n                var twTool = $('<div>' + tableWizard.options.template.getHtml() + '</div>');\n                twTool.appendTo(popup.element);\n                if (editor.toolbar) {\n                    editor.toolbar.attachToolsEvents(twTool);\n                }\n            },\n            popup: function () {\n                return this._popup;\n            },\n            _activate: $.noop,\n            _open: function () {\n                this._popup.options.anchor.addClass(ACTIVESTATE);\n            },\n            _close: function () {\n                this._popup.options.anchor.removeClass(ACTIVESTATE);\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                if (key == keys.DOWN && e.altKey) {\n                    this._popup.open();\n                } else if (key == keys.ESC) {\n                    this._popup.close();\n                }\n            },\n            _toggle: function (e) {\n                var button = $(e.target).closest('.k-tool');\n                if (!button.hasClass('k-state-disabled')) {\n                    this.popup().toggle();\n                }\n            },\n            update: function (ui) {\n                var popup = this.popup();\n                if (popup.wrapper && popup.wrapper.css('display') == 'block') {\n                    popup.close();\n                }\n                ui.removeClass('k-state-hover');\n            },\n            destroy: function () {\n                this._popup.destroy();\n            }\n        });\n        var InsertTableTool = PopupTool.extend({\n            init: function (options) {\n                this.cols = 8;\n                this.rows = 6;\n                PopupTool.fn.init.call(this, $.extend(options, {\n                    command: TableCommand,\n                    popupTemplate: '<div class=\\'k-ct-popup\\'>' + '<div>' + new Array(this.cols * this.rows + 1).join('<span class=\\'k-ct-cell k-state-disabled\\'></span>') + '</div>' + '<div class=\\'k-status\\'></div>' + '</div>'\n                }));\n            },\n            _activate: function () {\n                var that = this, element = that._popup.element, cells = element.find('.k-ct-cell'), firstCell = cells.eq(0), lastCell = cells.eq(cells.length - 1), start = kendo.getOffset(firstCell), end = kendo.getOffset(lastCell), cols = that.cols, rows = that.rows, cellWidth, cellHeight;\n                element.find('*').addBack().attr('unselectable', 'on');\n                end.left += lastCell[0].offsetWidth;\n                end.top += lastCell[0].offsetHeight;\n                cellWidth = (end.left - start.left) / cols;\n                cellHeight = (end.top - start.top) / rows;\n                function tableFromLocation(e) {\n                    var w = $(window);\n                    return {\n                        row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                        col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                    };\n                }\n                element.autoApplyNS(NS).on('mousemove', '.k-ct-cell', function (e) {\n                    that._setTableSize(tableFromLocation(e));\n                }).on('mouseleave', '.k-ct-cell', function () {\n                    that._setTableSize();\n                }).on('down', '.k-ct-cell', function (e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n            },\n            _valid: function (size) {\n                return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n            },\n            _exec: function (size) {\n                if (this._valid(size)) {\n                    this._editor.exec('createTable', {\n                        rows: size.row,\n                        columns: size.col\n                    });\n                    this._popup.close();\n                }\n            },\n            _setTableSize: function (size) {\n                var element = this._popup.element;\n                var status = element.find('.k-status');\n                var cells = element.find('.k-ct-cell');\n                var cols = this.cols;\n                var messages = this._editor.options.messages;\n                if (this._valid(size)) {\n                    status.text(kendo.format(messages.createTableHint, size.row, size.col));\n                    cells.each(function (i) {\n                        $(this).toggleClass(SELECTEDSTATE, i % cols < size.col && i / cols < size.row);\n                    });\n                } else {\n                    status.text(messages.createTable);\n                    cells.removeClass(SELECTEDSTATE);\n                }\n            },\n            _keydown: function (e) {\n                PopupTool.fn._keydown.call(this, e);\n                if (!this._popup.visible()) {\n                    return;\n                }\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                var cells = this._popup.element.find('.k-ct-cell');\n                var focus = Math.max(cells.filter('.k-state-selected').last().index(), 0);\n                var selectedRows = Math.floor(focus / this.cols);\n                var selectedColumns = focus % this.cols;\n                var changed = false;\n                if (key == keys.DOWN && !e.altKey) {\n                    changed = true;\n                    selectedRows++;\n                } else if (key == keys.UP) {\n                    changed = true;\n                    selectedRows--;\n                } else if (key == keys.RIGHT) {\n                    changed = true;\n                    selectedColumns++;\n                } else if (key == keys.LEFT) {\n                    changed = true;\n                    selectedColumns--;\n                }\n                var tableSize = {\n                    row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                    col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n                };\n                if (key == keys.ENTER) {\n                    this._exec(tableSize);\n                } else {\n                    this._setTableSize(tableSize);\n                }\n                if (changed) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _open: function () {\n                var messages = this._editor.options.messages;\n                PopupTool.fn._open.call(this);\n                this.popup().element.find('.k-status').text(messages.createTable).end().find('.k-ct-cell').removeClass(SELECTEDSTATE);\n            },\n            _close: function () {\n                PopupTool.fn._close.call(this);\n                this.popup().element.off('.' + NS);\n            }\n        });\n        var TableModificationCommand = Command.extend({\n            _clearColIndexAttr: function (table) {\n                dom.clearTableMappings(table, 'col-index');\n            },\n            _mapColIndices: function (table) {\n                dom.reMapTableColumns(table, 'col-index');\n            },\n            _findRowSpanCell: function (parent, rowIndex, colIndex) {\n                var row, cell;\n                for (var i = rowIndex; i >= 0; i--) {\n                    row = parent.rows[i];\n                    cell = $(row).find('[col-index=' + colIndex + ']');\n                    if (cell.length) {\n                        return cell;\n                    }\n                }\n            },\n            _resetTableResizing: function (editor) {\n                editor._destroyResizings();\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeTableResizing();\n            },\n            _findNextTdInRow: function (row, colIndex) {\n                var lastTd = row.find('td:last-child'), lastIndex = parseInt(lastTd.attr('col-index'), 10) + lastTd.prop('colSpan') - 1, td;\n                for (var i = colIndex; i <= lastIndex; i++) {\n                    td = row.find('[col-index=' + i + ']');\n                    if (td.length) {\n                        return td;\n                    }\n                }\n            },\n            _adjustColgroups: function (row, table) {\n                var colElements = table.getElementsByTagName(COL), colgroupElements = table.getElementsByTagName(COLGROUP), cells = row.cells, numberOfCells = cells.length, i, colgroup, cell;\n                while (colElements.length > 0) {\n                    colElements[0].remove();\n                }\n                while (colgroupElements.length > 0) {\n                    colgroupElements[0].remove();\n                }\n                for (i = numberOfCells - 1; i >= 0; i--) {\n                    cell = cells[i];\n                    if (cell.getAttribute(SCOPE) === COLGROUP) {\n                        colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                        colgroup.setAttribute('span', cell.getAttribute(COLSPAN));\n                        table.prepend(colgroup);\n                    } else {\n                        table.prepend(dom.createEmptyNode(this.editor.document, COL));\n                    }\n                }\n            },\n            _associateHeaderIds: function (table) {\n                dom.clearTableMappings(table, 'col-index');\n                dom.reMapTableColumns(table, 'col-index');\n                $(table).find('th, td').removeAttr('id headers');\n                dom.associateWithIds(table);\n            },\n            _getNumberOfColumns: function (table) {\n                return dom._getNumberOfColumns(table, 'td, th');\n            }\n        });\n        var InsertRowCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), table = dom.closest(td, TABLE), position = this.options.position || 'after', cellCount, row, cell, newRow, rowIndex, rowSpanIndex, createdCell;\n                if (!table || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                row = td.parentNode;\n                rowIndex = dom.findNodeIndex(row, true);\n                if (td.rowSpan > 1 && position === 'after') {\n                    row = table.rows[rowIndex + td.rowSpan - 1];\n                }\n                cellCount = this._getNumberOfColumns(table);\n                newRow = row.cloneNode(true);\n                $(newRow).empty();\n                for (var i = 0; i < cellCount; i = i + cell.prop('colSpan')) {\n                    cell = $(row).find('[col-index=' + i + ']');\n                    if (cell.length) {\n                        if (cell.prop('rowSpan') > 1 && position === 'after' && cell) {\n                            cell.attr(ROWSPAN, cell.prop('rowSpan') + 1);\n                        } else {\n                            this._appendCell(newRow, cell);\n                        }\n                    } else {\n                        rowIndex = dom.findNodeIndex(row, true);\n                        cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                        rowSpanIndex = cell.closest(TR).index();\n                        if (rowSpanIndex + cell.prop('rowSpan') - 1 === rowIndex && position === 'after') {\n                            this._appendCell(newRow, cell);\n                        } else {\n                            cell.attr(ROWSPAN, cell.prop('rowSpan') + 1);\n                        }\n                    }\n                    createdCell = $(newRow).find('[col-index=' + i + ']');\n                    if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                        createdCell.attr(SCOPE, ROW);\n                    }\n                }\n                if (position == 'before') {\n                    dom.insertBefore(newRow, row);\n                } else {\n                    dom.insertAfter(newRow, row);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                this._resetTableResizing(this.editor);\n            },\n            _appendCell: function (row, cell) {\n                var newCell;\n                newCell = cell.clone();\n                newCell.html(Editor.emptyTableCellContent);\n                newCell.removeAttr(ROWSPAN);\n                newCell.appendTo(row);\n            }\n        });\n        var InsertColumnCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), table = dom.closest(td, TABLE), colElements = table.getElementsByTagName(COL), colgroupElements = table.getElementsByTagName(COLGROUP), columnIndex, i, rows = table && table.rows, cell, newCell, position = this.options.position || 'after';\n                if (!td || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                columnIndex = parseInt(td.getAttribute('col-index'), 10);\n                if (td.colSpan > 1 && position === 'after') {\n                    td.setAttribute('col-index', columnIndex + td.colSpan - 1);\n                    columnIndex = columnIndex + td.colSpan - 1;\n                }\n                for (i = 0; i < rows.length; i++) {\n                    cell = this._processForColSpan(rows[i], columnIndex, position, td);\n                    if (!cell) {\n                        continue;\n                    }\n                    newCell = cell.cloneNode();\n                    newCell.innerHTML = Editor.emptyTableCellContent;\n                    newCell.removeAttribute(COLSPAN);\n                    if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                        newCell.setAttribute(SCOPE, COL);\n                    }\n                    if (position == 'before') {\n                        dom.insertBefore(newCell, cell);\n                    } else {\n                        dom.insertAfter(newCell, cell);\n                    }\n                    this._resizeCells(newCell, cell);\n                }\n                if (colElements.length > 0 || colgroupElements.length > 0) {\n                    this._adjustColgroups(rows[0], table);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                this._resetTableResizing(this.editor);\n            },\n            _processForColSpan: function (row, columnIndex, position, selectedCell) {\n                var cell, colSpanEffect, index = columnIndex - 1;\n                cell = $(row).find('[col-index=' + columnIndex + ']')[0];\n                if (cell && cell.colSpan > 1 && position === 'after' && cell !== selectedCell) {\n                    cell.colSpan += 1;\n                    return;\n                }\n                if (cell) {\n                    return cell;\n                }\n                for (index; index >= 0; index--) {\n                    cell = $(row).find('[col-index=' + index + ']')[0];\n                    if (cell && cell.colSpan > 1) {\n                        break;\n                    }\n                }\n                if (!cell) {\n                    return;\n                }\n                colSpanEffect = parseInt(cell.getAttribute('col-index'), 10) + cell.colSpan - 1;\n                if (colSpanEffect === columnIndex && position === 'after') {\n                    return cell;\n                } else if (columnIndex <= colSpanEffect) {\n                    cell.setAttribute(COLSPAN, cell.colSpan + 1);\n                }\n            },\n            _resizeCells: function (newCell, cell) {\n                var width = newCell.style.width, parsedWidth, unit, calculatedWidth;\n                if (!width) {\n                    return;\n                }\n                parsedWidth = parseFloat(width);\n                unit = width.slice(parsedWidth.toString().length);\n                calculatedWidth = parsedWidth / 2 + unit;\n                newCell.style.width = calculatedWidth;\n                cell.style.width = calculatedWidth;\n            }\n        });\n        var DeleteRowCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange();\n                var rows = RangeUtils.mapAll(range, function (node) {\n                    return $(node).closest(TR)[0];\n                });\n                var td = dom.closest(range.endContainer, [\n                    TD,\n                    TH\n                ]);\n                var row = rows[0];\n                var rowSpan = td ? td.rowSpan : 1;\n                var rowIndex = $(rows[0]).index();\n                var table = dom.closest(row, TABLE);\n                var rowParent = row.parentElement;\n                var focusElement;\n                if (!table || this.immutables() && Editor.Immutables.immutableParent(row)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                for (var x = 0; x < rowSpan; x++) {\n                    if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                        rows.push(rowParent.rows[rowIndex + x]);\n                    }\n                }\n                if (table.rows.length <= rows.length) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                    this._resetTableResizing(this.editor);\n                } else if (rowParent.rows.length <= rows.length) {\n                    focusElement = rowParent.nextSibling;\n                    if (!focusElement) {\n                        focusElement = rowParent.previousSibling;\n                    }\n                    dom.remove(rowParent);\n                } else {\n                    this._mapColIndices(table);\n                    for (var i = 0; i < rows.length; i++) {\n                        row = rows[i];\n                        dom.removeTextSiblings(row);\n                        focusElement = dom.next(row) || dom.prev(row);\n                        focusElement = focusElement.cells[0];\n                        this._handleRowSpanCells(table, row);\n                        dom.remove(row);\n                    }\n                    this._clearColIndexAttr(table);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                } else if (dom.is(rowParent, THEAD) && $(table).find('[scope]').length > 0) {\n                    this._adjustColgroups(rowParent.rows[0], table);\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n                this._resetTableResizing(this.editor);\n            },\n            _handleRowSpanCells: function (table, row) {\n                var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true), firstRow = table.rows[0], lastCell = firstRow.cells[firstRow.cells.length - 1], lastIndex = parseInt(lastCell.getAttribute('col-index'), 10) + lastCell.colSpan - 1;\n                for (index = 0; index <= lastIndex; index = index + cell.prop('colSpan')) {\n                    cell = $(row).find('[col-index=' + index + ']');\n                    if (cell.length && cell.prop('rowSpan') > 1) {\n                        nextRow = table.rows[rowIndex + 1];\n                        adjacentCell = $(nextRow).find('[col-index=' + (index + 1) + ']');\n                        if (adjacentCell.length) {\n                            adjacentCell.before(cell);\n                        } else {\n                            $(nextRow).append(cell);\n                        }\n                        this._reduceRowSpan(cell);\n                    }\n                    if (!cell.length) {\n                        cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                        this._reduceRowSpan(cell);\n                    }\n                }\n            },\n            _reduceRowSpan: function (td) {\n                var rowSpanValue = td.prop('rowSpan') - 1;\n                if (rowSpanValue <= 1) {\n                    td.removeAttr(ROWSPAN);\n                    if (td.attr(SCOPE) === ROWGROUP) {\n                        td.attr(SCOPE, ROW);\n                    }\n                } else {\n                    td.attr(ROWSPAN, rowSpanValue);\n                }\n            }\n        });\n        var DeleteColumnCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), table = dom.closest(td, TABLE), rows = table && table.rows, columnIndex = dom.findNodeIndex(td, true), columnCount = rows && rows[0].cells.length, colElements = table.getElementsByTagName(COL), colgroupElements = table.getElementsByTagName(COLGROUP), focusElement, i, cell, x;\n                if (!td || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                if (columnCount == 1 || td.colSpan == columnCount) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                    this._resetTableResizing(this.editor);\n                } else {\n                    dom.removeTextSiblings(td);\n                    focusElement = dom.next(td) || dom.prev(td);\n                    this._mapColIndices(table);\n                    columnIndex = parseInt(td.getAttribute('col-index'), 10);\n                    for (x = 0; x < td.colSpan; x++) {\n                        for (i = 0; i < rows.length; i = i + (cell.prop('rowSpan') || 1)) {\n                            cell = $(rows[i]).find('[col-index=' + (columnIndex + x) + ']');\n                            if (cell.length && cell.prop('colSpan') <= 1) {\n                                cell.remove();\n                            } else {\n                                this._handleColSpanCells(rows[i], columnIndex + x);\n                            }\n                        }\n                    }\n                    this._clearColIndexAttr(table);\n                }\n                if (colElements.length > 0 || colgroupElements.length > 0) {\n                    this._adjustColgroups(rows[0], table);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n                this._resetTableResizing(this.editor);\n            },\n            _handleColSpanCells: function (row, colIndex) {\n                var cell = $(row).find('[col-index=' + colIndex + ']');\n                if (cell.length && cell.prop('colSpan') > 1) {\n                    var clone = cell.clone(true);\n                    cell.after(clone);\n                    this._reduceColSpan(clone);\n                    clone.attr('col-index', parseInt(cell.attr('col-index'), 10) + 1);\n                    cell.remove();\n                    return;\n                }\n                for (var i = colIndex; i >= 0; i--) {\n                    cell = $(row).find('[col-index=' + i + ']');\n                    if (cell.length) {\n                        this._reduceColSpan(cell);\n                        cell.attr('col-index', parseInt(cell.attr('col-index'), 10) + 1);\n                        return;\n                    }\n                }\n            },\n            _reduceColSpan: function (td) {\n                var colSpanValue = td.prop('colSpan') - 1;\n                if (colSpanValue <= 1) {\n                    td.removeAttr(COLSPAN);\n                    if (td.attr(SCOPE) === COLGROUP) {\n                        td.attr(SCOPE, COL);\n                    }\n                } else {\n                    td.attr(COLSPAN, colSpanValue);\n                }\n            }\n        });\n        var MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), table, row, columnIndex, nextTd, colspan;\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n                table = dom.closest(td, TABLE);\n                row = td.parentNode;\n                columnIndex = dom.findNodeIndex(td, true);\n                nextTd = row.children[columnIndex + 1];\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                columnIndex = parseInt($(td).attr('col-index'), 10);\n                nextTd = $(row).find('[col-index=' + (columnIndex + 1 + this._getColspan(td) - 1) + ']').get(0);\n                if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n                colspan = this._getColspan(td) + this._getColspan(nextTd);\n                $(td).prop(COLSPAN, colspan).append(dom.emptyNode(nextTd) ? '' : '<br/>' + nextTd.innerHTML);\n                $(td).width(td.offsetWidth);\n                $(nextTd).remove();\n                if (td.getAttribute(SCOPE) === COL) {\n                    td.setAttribute(SCOPE, COLGROUP);\n                }\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    this._adjustColgroups(row, table);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                this._resetTableResizing(this.editor);\n            },\n            _getColspan: function (td) {\n                return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n            }\n        });\n        var MergeCellsVerticallyCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n                tr = dom.closest(td, TR);\n                parent = dom.closest(td, [\n                    THEAD,\n                    TBODY\n                ]);\n                table = dom.closest(td, TABLE);\n                columnIndex = dom.findNodeIndex(td, true);\n                rowIndex = dom.findNodeIndex(tr, true);\n                if (rowIndex + 1 === parent.rows.length) {\n                    this.releaseRange(range);\n                    return;\n                }\n                targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n                bottomTd = targetRow && targetRow.children[columnIndex];\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                columnIndex = $(td).attr('col-index');\n                bottomTd = $(targetRow).find('[col-index=' + columnIndex + ']').get(0);\n                if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n                $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd)).append(dom.emptyNode(bottomTd) ? '' : '<br/>' + bottomTd.innerHTML);\n                if (td.getAttribute(SCOPE) === ROW) {\n                    td.setAttribute(SCOPE, ROWGROUP);\n                }\n                $(bottomTd).remove();\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n            },\n            _getRowspan: function (td) {\n                return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n            }\n        });\n        var SplitCellCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), type = this.options.type, attr = type === 'row' ? COLSPAN : ROWSPAN, td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), parent = dom.closest(td, [\n                        THEAD,\n                        TBODY\n                    ]), table = dom.closest(td, TABLE), emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n                if (!td || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                if (type === 'row' && $(td).is('[' + attr + ']')) {\n                    this._splitCellHorizontally(td, parent, attr, emptyTd);\n                } else if (type === 'column' && $(td).is('[' + attr + ']')) {\n                    this._splitCellVertically(td, parent, attr, emptyTd);\n                }\n                if ($(td).prop(attr.toLowerCase()) <= 1) {\n                    $(td).removeAttr(attr);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n            },\n            _getRowspanValue: function (td) {\n                return parseInt(td.getAttribute(ROWSPAN), 10);\n            },\n            _getColspanValue: function (td) {\n                return parseInt(td.getAttribute(COLSPAN), 10);\n            },\n            _splitCellHorizontally: function (td, parent, attr, emptyTd) {\n                var rowSpan = td.rowSpan, colSpan = td.colSpan, tdToAdd = $(emptyTd), colSpanResult = Math.floor(colSpan / 2);\n                if (colSpanResult > 1) {\n                    tdToAdd.attr(COLSPAN, colSpanResult);\n                }\n                if (rowSpan > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpan);\n                }\n                $(td).prop(attr, colSpan - colSpanResult).after(tdToAdd);\n                $(td).width(td.offsetWidth);\n                tdToAdd.width(tdToAdd[0].offsetWidth);\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === COLGROUP) {\n                        tdToAdd.attr(SCOPE, COL);\n                        if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === '1') {\n                            td.setAttribute(SCOPE, COL);\n                        }\n                        this._adjustColgroups(td.parentNode, parent.parentNode);\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n            },\n            _splitCellVertically: function (td, parent, attr, emptyTd) {\n                var tr = dom.closest(td, TR), columnIndex = parseInt($(td).attr('col-index'), 10), rowIndex = dom.findNodeIndex(tr, true), rowSpan = td.rowSpan, colSpan = td.colSpan, rowSpanResult = Math.floor(rowSpan / 2), targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult), nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan), tdToAdd = $(emptyTd);\n                if (rowSpanResult > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpanResult);\n                }\n                if (colSpan > 1) {\n                    tdToAdd.attr(COLSPAN, colSpan);\n                }\n                if (nextTd && nextTd.length) {\n                    nextTd.before(tdToAdd);\n                } else {\n                    targetRow.append(tdToAdd);\n                }\n                $(td).prop(attr, rowSpan - rowSpanResult);\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === ROWGROUP) {\n                        tdToAdd.attr(SCOPE, ROW);\n                        if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === '1') {\n                            td.setAttribute(SCOPE, ROW);\n                        }\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n            }\n        });\n        var TableModificationTool = Tool.extend({\n            command: function (options) {\n                var commandsMap = {\n                    row: {\n                        insert: InsertRowCommand,\n                        'delete': DeleteRowCommand,\n                        merge: MergeCellsHorizontallyCommand,\n                        split: SplitCellCommand\n                    },\n                    column: {\n                        insert: InsertColumnCommand,\n                        'delete': DeleteColumnCommand,\n                        merge: MergeCellsVerticallyCommand,\n                        split: SplitCellCommand\n                    }\n                };\n                options = extend(options, this.options);\n                options.action = options.action || 'insert';\n                return new commandsMap[options.type][options.action](options);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n                ui.attr('disabled', 'disabled');\n            },\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                if (isFormatted === true) {\n                    ui.parent().addClass('k-hidden k-state-disabled');\n                    ui.attr('disabled', 'disabled');\n                    ui.addClass('k-state-disabled');\n                } else {\n                    ui.parent().removeClass('k-hidden k-state-disabled');\n                    ui.removeAttr('disabled');\n                    ui.removeClass('k-state-disabled');\n                }\n            }\n        });\n        extend(kendo.ui.editor, {\n            PopupTool: PopupTool,\n            TableCommand: TableCommand,\n            InsertTableTool: InsertTableTool,\n            TableModificationTool: TableModificationTool,\n            InsertRowCommand: InsertRowCommand,\n            InsertColumnCommand: InsertColumnCommand,\n            DeleteRowCommand: DeleteRowCommand,\n            DeleteColumnCommand: DeleteColumnCommand,\n            MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n            MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n            SplitCellCommand: SplitCellCommand\n        });\n        registerTool('createTable', new InsertTableTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                popup: true,\n                title: 'Create table'\n            })\n        }));\n        registerTool('addColumnLeft', new TableModificationTool({\n            type: 'column',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the left'\n            })\n        }));\n        registerTool('addColumnRight', new TableModificationTool({\n            type: 'column',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the right'\n            })\n        }));\n        registerTool('addRowAbove', new TableModificationTool({\n            type: 'row',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row above'\n            })\n        }));\n        registerTool('addRowBelow', new TableModificationTool({\n            type: 'row',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row below'\n            })\n        }));\n        registerTool('deleteRow', new TableModificationTool({\n            type: 'row',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete row'\n            })\n        }));\n        registerTool('deleteColumn', new TableModificationTool({\n            type: 'column',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete column'\n            })\n        }));\n        registerTool('mergeCellsHorizontally', new TableModificationTool({\n            type: 'row',\n            action: 'merge',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Merge Cell Right'\n            })\n        }));\n        registerTool('mergeCellsVertically', new TableModificationTool({\n            type: 'column',\n            action: 'merge',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Merge Cell Down'\n            })\n        }));\n        registerTool('splitCellHorizontally', new TableModificationTool({\n            type: 'row',\n            action: 'split',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Split Cell'\n            })\n        }));\n        registerTool('splitCellVertically', new TableModificationTool({\n            type: 'column',\n            action: 'split',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Split Cell'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/clipboard', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, RangeUtils = editorNS.RangeUtils, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, extend = $.extend;\n        var Clipboard = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                var pasteCleanup = editor.options.pasteCleanup;\n                this.cleaners = [\n                    new ScriptCleaner(pasteCleanup),\n                    new TabCleaner(pasteCleanup),\n                    new MSWordFormatCleaner(pasteCleanup),\n                    new WebkitFormatCleaner(pasteCleanup),\n                    new HtmlTagsCleaner(pasteCleanup),\n                    new HtmlAttrCleaner(pasteCleanup),\n                    new HtmlContentCleaner(pasteCleanup),\n                    new CustomCleaner(pasteCleanup)\n                ];\n            },\n            htmlToFragment: function (html) {\n                var editor = this.editor, doc = editor.document, container = dom.create(doc, 'div'), fragment = doc.createDocumentFragment();\n                container.innerHTML = html;\n                while (container.firstChild) {\n                    fragment.appendChild(container.firstChild);\n                }\n                return fragment;\n            },\n            isBlock: function (html) {\n                return /<(div|p|ul|ol|table|h[1-6])/i.test(html);\n            },\n            _startModification: function () {\n                var range;\n                var restorePoint;\n                var editor = this.editor;\n                if (this._inProgress) {\n                    return;\n                }\n                this._inProgress = true;\n                range = editor.getRange();\n                restorePoint = new RestorePoint(range, editor.body);\n                dom.persistScrollTop(editor.document);\n                return {\n                    range: range,\n                    restorePoint: restorePoint\n                };\n            },\n            _endModification: function (modificationInfo) {\n                editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n                this.editor._selectionChange();\n                this._inProgress = false;\n            },\n            _contentModification: function (before, after) {\n                var that = this;\n                var editor = that.editor;\n                var modificationInfo = that._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                before.call(that, editor, modificationInfo.range);\n                setTimeout(function () {\n                    after.call(that, editor, modificationInfo.range);\n                    that._endModification(modificationInfo);\n                });\n            },\n            _removeBomNodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                for (var i = 0; i < nodes.length; i++) {\n                    nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n                }\n            },\n            _onBeforeCopy: function (range) {\n                var marker = new Marker();\n                marker.add(range);\n                this._removeBomNodes(range);\n                marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            oncopy: function () {\n                this._onBeforeCopy(this.editor.getRange());\n            },\n            oncut: function () {\n                this._onBeforeCopy(this.editor.getRange());\n                this._contentModification($.noop, $.noop);\n            },\n            _fileToDataURL: function (blob) {\n                var deferred = $.Deferred();\n                var reader = new FileReader();\n                if (!(blob instanceof window.File) && blob.getAsFile) {\n                    blob = blob.getAsFile();\n                }\n                reader.onload = $.proxy(deferred.resolve, deferred);\n                reader.readAsDataURL(blob);\n                return deferred.promise();\n            },\n            _triggerPaste: function (html, options) {\n                var args = { html: html || '' };\n                args.html = args.html.replace(/\\ufeff/g, '');\n                this.editor.trigger('paste', args);\n                this.paste(args.html, options || {});\n            },\n            _handleImagePaste: function (e) {\n                if (!('FileReader' in window) || browser.msie && browser.version > 10) {\n                    return;\n                }\n                var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData || {};\n                var items = clipboardData.items || clipboardData.files;\n                return this._insertImages(items);\n            },\n            _insertImages: function (items) {\n                if (!items) {\n                    return;\n                }\n                var images = $.grep(items, function (item) {\n                    return /^image\\//i.test(item.type);\n                });\n                var html = $.grep(items, function (item) {\n                    return /^text\\/html/i.test(item.type);\n                });\n                if (html.length || !images.length) {\n                    return;\n                }\n                var modificationInfo = this._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                $.when.apply($, $.map(images, this._fileToDataURL)).done($.proxy(function () {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function (e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join('');\n                    this._triggerPaste(html);\n                    this._endModification(modificationInfo);\n                }, this));\n                return true;\n            },\n            onpaste: function (e) {\n                if (this.editor.body.contentEditable === 'false') {\n                    return;\n                }\n                if (this._handleImagePaste(e)) {\n                    e.preventDefault();\n                    return;\n                }\n                this.expandImmutablesIn();\n                this._contentModification(function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: '\\uFEFF'\n                    });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n                    this._decoreateClipboardNode(clipboardNode, body);\n                    body.appendChild(clipboardNode);\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).unbind('paste');\n                        textRange.execCommand('Paste');\n                        $(body).bind('paste', $.proxy(this.onpaste, this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n                    range.deleteContents();\n                }, function afterPaste(editor, range) {\n                    var html = '', containers;\n                    editor.selectRange(range);\n                    containers = $(editor.body).children('.k-paste-container');\n                    containers.each(function () {\n                        var lastChild = this.lastChild;\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n                        html += this.innerHTML;\n                    });\n                    containers.remove();\n                    this._triggerPaste(html, { clean: true });\n                });\n            },\n            ondragover: function (e) {\n                if (browser.msie || browser.edge) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                }\n            },\n            ondrop: function (e) {\n                if (!('FileReader' in window)) {\n                    return;\n                }\n                var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n                var items = dataTransfer.items || dataTransfer.files;\n                if (this._insertImages(items)) {\n                    e.preventDefault();\n                }\n            },\n            _decoreateClipboardNode: function (node, body) {\n                if (!browser.msie && !browser.webkit) {\n                    return;\n                }\n                node = $(node);\n                node.css({\n                    borderWidth: '0px',\n                    width: '0px',\n                    height: '0px',\n                    overflow: 'hidden',\n                    margin: '0',\n                    padding: '0'\n                });\n                if (browser.msie) {\n                    var documentElement = $(body.ownerDocument.documentElement);\n                    node.css({\n                        fontVariant: 'normal',\n                        fontWeight: 'normal',\n                        lineSpacing: 'normal',\n                        lineHeight: 'normal',\n                        textDecoration: 'none'\n                    });\n                    var color = documentElement.css('color');\n                    if (color) {\n                        node.css('color', color);\n                    }\n                    var fontFamily = documentElement.css('fontFamily');\n                    if (fontFamily) {\n                        node.css('fontFamily', fontFamily);\n                    }\n                    var fontSize = documentElement.css('fontSize');\n                    if (fontSize) {\n                        node.css('fontSize', fontSize);\n                    }\n                }\n            },\n            _moveToCaretPosition: function (node, range) {\n                var that = this;\n                var body = that.editor.body;\n                var nodeOffset = dom.offset(node, body);\n                var caretOffset = that._caretOffset(range, body);\n                var translateX = caretOffset.left - nodeOffset.left;\n                var translateY = caretOffset.top - nodeOffset.top;\n                var translate = 'translate(' + translateX + 'px,' + translateY + 'px)';\n                $(node).css({\n                    '-webkit-transform': translate,\n                    'transform': translate\n                });\n            },\n            _caretOffset: function (range, body) {\n                var editor = this.editor;\n                var caret = dom.create(editor.document, 'span', { innerHTML: '\\uFEFF' });\n                var startContainer = range.startContainer;\n                var rangeChanged;\n                if (range.collapsed) {\n                    var isStartTextNode = dom.isDataNode(startContainer);\n                    if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                        dom.insertBefore(caret, startContainer);\n                    } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                        dom.insertAfter(caret, startContainer);\n                    } else {\n                        range.insertNode(caret);\n                        rangeChanged = true;\n                    }\n                } else {\n                    startContainer = startContainer === body ? startContainer.childNodes[range.startOffset] : startContainer;\n                    dom.insertBefore(caret, startContainer);\n                }\n                var offset = dom.offset(caret, body);\n                var prev = caret.previousSibling;\n                var next = caret.nextSibling;\n                dom.remove(caret);\n                if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                    var prevLength = prev.length;\n                    next.data = prev.data + next.data;\n                    range.setStart(next, prevLength);\n                    dom.remove(prev);\n                    range.collapse(true);\n                    editor.selectRange(range);\n                }\n                return offset;\n            },\n            expandImmutablesIn: function (range) {\n                var editor = this.editor;\n                if (editor && editor.options.immutables) {\n                    var body = editor.body;\n                    range = range || editor.getRange();\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    if (range.startContainer === body && range.startOffset === 0) {\n                        var doc = body.ownerDocument;\n                        var bomNode = doc.createTextNode('\\uFEFF');\n                        body.insertBefore(bomNode, body.childNodes[0]);\n                        range.setStartBefore(bomNode);\n                    }\n                    editor.selectRange(range);\n                }\n            },\n            splittableParent: function (block, node) {\n                var parentNode, body;\n                if (block) {\n                    return dom.closestEditableOfType(node, [\n                        'p',\n                        'ul',\n                        'ol'\n                    ]) || node.parentNode;\n                }\n                parentNode = node.parentNode;\n                body = node.ownerDocument.body;\n                if (dom.isInline(parentNode)) {\n                    while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                        parentNode = parentNode.parentNode;\n                    }\n                }\n                return parentNode;\n            },\n            paste: function (html, options) {\n                var editor = this.editor, i, l, childNodes;\n                this.expandImmutablesIn();\n                options = extend({\n                    clean: false,\n                    split: true\n                }, options);\n                if (!options.skipCleaners) {\n                    for (i = 0, l = this.cleaners.length; i < l; i++) {\n                        if (this.cleaners[i].applicable(html)) {\n                            html = this.cleaners[i].clean(html);\n                        }\n                    }\n                }\n                if (options.clean) {\n                    html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/gi, '$3');\n                    html = html.replace(/<(a|span)[^>]*><\\/\\1>/gi, '');\n                }\n                html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/gi, '<$1$2>&nbsp;</$1>');\n                html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n                var block = this.isBlock(html);\n                editor.focus();\n                var range = editor.getRange();\n                range.deleteContents();\n                if (range.startContainer == editor.document) {\n                    range.selectNodeContents(editor.body);\n                }\n                var marker = new Marker();\n                var caret = marker.addCaret(range);\n                var parent = this.splittableParent(block, caret);\n                var unwrap = false;\n                var splittable = parent != editor.body && !dom.is(parent, 'td');\n                if (options.split && splittable && (block || dom.isInline(parent))) {\n                    range.selectNode(caret);\n                    RangeUtils.split(range, parent, true);\n                    unwrap = true;\n                }\n                var fragment = this.htmlToFragment(html);\n                if (fragment.firstChild && fragment.firstChild.className === 'k-paste-container') {\n                    var fragmentsHtml = [];\n                    for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                        fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                    }\n                    fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n                }\n                childNodes = fragment.childNodes;\n                $(childNodes).filter('table').addClass('k-table').end().find('table').addClass('k-table');\n                $(childNodes).each(function (index, elm) {\n                    if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === '') {\n                        elm.appendChild(editor.document.createTextNode('\\uFEFF'));\n                    }\n                });\n                range.insertNode(fragment);\n                parent = this.splittableParent(block, caret);\n                if (unwrap) {\n                    while (caret.parentNode != parent) {\n                        dom.unwrap(caret.parentNode);\n                    }\n                    dom.unwrap(caret.parentNode);\n                }\n                dom.normalize(range.commonAncestorContainer);\n                caret.style.display = 'inline';\n                dom.restoreScrollTop(editor.document);\n                dom.scrollTo(caret);\n                marker.removeCaret(range);\n                var rangeEnd = range.commonAncestorContainer.parentNode;\n                if (range.collapsed && dom.name(rangeEnd) == 'tbody' || range.collapsed && dom.name(rangeEnd) == 'thead') {\n                    range.setStartAfter($(rangeEnd).closest('table')[0]);\n                    range.collapse(true);\n                }\n                var focusedTable = $(range.commonAncestorContainer.parentNode).closest('table');\n                if (focusedTable.get(0)) {\n                    var siblingNodes = focusedTable.parent().contents();\n                    var lastSiblingIndex = siblingNodes.length - 1;\n                    var lastSibling = siblingNodes.get(lastSiblingIndex);\n                    while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                        lastSiblingIndex -= 1;\n                        lastSibling = siblingNodes.get(lastSiblingIndex);\n                    }\n                    if (lastSibling === focusedTable.get(0) && !focusedTable.parents('table').length) {\n                        dom.insertAfter(dom.createEmptyNode(editor.document, 'p'), focusedTable[0]);\n                    }\n                }\n                editor.selectRange(range);\n            }\n        });\n        var Cleaner = Class.extend({\n            init: function (options) {\n                this.options = options || {};\n                this.replacements = [];\n            },\n            clean: function (html, customReplacements) {\n                var that = this, replacements = customReplacements || that.replacements, i, l;\n                for (i = 0, l = replacements.length; i < l; i += 2) {\n                    html = html.replace(replacements[i], replacements[i + 1]);\n                }\n                return html;\n            }\n        });\n        var ScriptCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /<(\\/?)script([^>]*)>/i,\n                    '<$1telerik:script$2>'\n                ];\n            },\n            applicable: function (html) {\n                return !this.options.none && /<script[^>]*>/i.test(html);\n            }\n        });\n        var TabCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                var replacement = ' ';\n                this.replacements = [\n                    /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi,\n                    replacement,\n                    /\\t/gi,\n                    replacement,\n                    /&nbsp;&nbsp; &nbsp;/gi,\n                    replacement\n                ];\n            },\n            applicable: function (html) {\n                return /&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i.test(html);\n            }\n        });\n        var MSWordFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.junkReplacements = [\n                    /<\\?xml[^>]*>/gi,\n                    '',\n                    /<!--(.|\\n)*?-->/g,\n                    '',\n                    /&quot;/g,\n                    '\\'',\n                    /<o:p>&nbsp;<\\/o:p>/gi,\n                    '&nbsp;',\n                    /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,\n                    '',\n                    /<\\/o>/g,\n                    ''\n                ];\n                this.replacements = this.junkReplacements.concat([\n                    /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\n                    '$1',\n                    /<br><br>/g,\n                    '<BR><BR>',\n                    /<br>(?!\\n)/g,\n                    ' ',\n                    /<table([^>]*)>(\\s|&nbsp;)+<t/gi,\n                    '<table$1><t',\n                    /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi,\n                    '',\n                    /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi,\n                    '',\n                    /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi,\n                    '',\n                    /<BR><BR>/g,\n                    '<br>',\n                    /^\\s*(&nbsp;)+/gi,\n                    '',\n                    /(&nbsp;|<br[^>]*>)+\\s*$/gi,\n                    '',\n                    /mso-[^;\"]*;?/gi,\n                    '',\n                    /<(\\/?)b(\\s[^>]*)?>/gi,\n                    '<$1strong$2>',\n                    /<(\\/?)font(\\s[^>]*)?>/gi,\n                    this.convertFontMatch,\n                    /<(\\/?)i(\\s[^>]*)?>/gi,\n                    '<$1em$2>',\n                    /style=([\"|'])\\s*\\1/g,\n                    '',\n                    /(<br[^>]*>)?\\n/g,\n                    function ($0, $1) {\n                        return $1 ? $0 : ' ';\n                    }\n                ]);\n            },\n            convertFontMatch: function (match, closing, args) {\n                var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n                var face = faceRe.exec(args);\n                var family = args && face && face[1];\n                if (closing) {\n                    return '</span>';\n                } else if (family) {\n                    return '<span style=\"font-family:' + family + '\">';\n                } else {\n                    return '<span>';\n                }\n            },\n            applicable: function (html) {\n                return /class=\"?Mso/i.test(html) || /style=\"[^\"]*mso-/i.test(html) || /urn:schemas-microsoft-com:office/.test(html);\n            },\n            stripEmptyAnchors: function (html) {\n                return html.replace(/<a([^>]*)>\\s*<\\/a>/gi, function (a, attributes) {\n                    if (!attributes || attributes.indexOf('href') < 0) {\n                        return '';\n                    }\n                    return a;\n                });\n            },\n            listType: function (p, listData) {\n                var html = p.innerHTML;\n                var text = dom.innerText(p);\n                var startingSymbol;\n                var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n                var symbol = matchSymbol && matchSymbol[1];\n                var isNumber = /^[a-z\\d]/i.test(symbol);\n                var trimStartText = function (text) {\n                    return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n                };\n                if (matchSymbol) {\n                    startingSymbol = true;\n                }\n                html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\xA0');\n                if (!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html) || startingSymbol && /^.\\u00a0+/.test(html) || symbol && !isNumber && listData) {\n                    return {\n                        tag: 'ul',\n                        style: this._guessUnorderedListStyle(trimStartText(text))\n                    };\n                }\n                if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                    return {\n                        tag: 'ol',\n                        style: this._guessOrderedListStyle(trimStartText(text))\n                    };\n                }\n            },\n            _convertToLi: function (p) {\n                var content, name = dom.name(p);\n                if (p.childNodes.length == 1) {\n                    content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, '');\n                } else {\n                    dom.remove(p.firstChild);\n                    if (p.firstChild.nodeType == 3) {\n                        if (/^[ivxlcdm]+\\.$/i.test(p.firstChild.nodeValue)) {\n                            dom.remove(p.firstChild);\n                        }\n                    }\n                    if (/^(&nbsp;|\\s)+$/i.test(p.firstChild.innerHTML)) {\n                        dom.remove(p.firstChild);\n                    }\n                    if (name != 'p') {\n                        content = '<' + name + '>' + p.innerHTML + '</' + name + '>';\n                    } else {\n                        content = p.innerHTML;\n                    }\n                }\n                dom.remove(p);\n                return dom.create(document, 'li', { innerHTML: content });\n            },\n            _guessUnorderedListStyle: function (symbol) {\n                if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                    return null;\n                } else if (/^o/.test(symbol)) {\n                    return 'circle';\n                } else {\n                    return 'square';\n                }\n            },\n            _guessOrderedListStyle: function (symbol) {\n                var listType = null;\n                if (!/^\\d/.test(symbol)) {\n                    listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') + (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n                }\n                return listType;\n            },\n            extractListLevels: function (html) {\n                var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n                html = html.replace(msoListRegExp, function (match, list, level) {\n                    return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n                });\n                return html;\n            },\n            _createList: function (type, styleType) {\n                return dom.create(document, type, { style: { listStyleType: styleType } });\n            },\n            lists: function (placeholder) {\n                var blockChildren = $(placeholder).find(dom.blockElements.join(',')), lastMargin = -1, name, levels = {}, li, rootMargin, rootIndex, lastRootLi, isLastRootLi, rootList, i, p, type, margin, list, listData, acceptedNameTags = [\n                        'p',\n                        'h1',\n                        'h2',\n                        'h3',\n                        'h4',\n                        'h5',\n                        'h6'\n                    ], isParentTable = false;\n                for (i = 0; i < blockChildren.length; i++) {\n                    p = blockChildren[i];\n                    listData = $(p).data();\n                    var listIndex = listData.list;\n                    name = dom.name(p);\n                    isParentTable = !!$(p).parents('table').length;\n                    if (isParentTable) {\n                        continue;\n                    }\n                    var listType = this.listType(p, listData);\n                    type = listType && listType.tag;\n                    if (!type || acceptedNameTags.indexOf(name) < 0) {\n                        if (!p.innerHTML) {\n                            dom.remove(p);\n                        } else if (li && !isLastRootLi) {\n                            li.appendChild(p);\n                        }\n                        continue;\n                    }\n                    if (browser.msie) {\n                        continue;\n                    }\n                    margin = listData.level || parseFloat(p.style.marginLeft || 0);\n                    var levelType = type + listIndex;\n                    if (!levels[margin]) {\n                        levels[margin] = {};\n                    }\n                    if (!rootMargin || rootMargin < 0) {\n                        rootMargin = margin;\n                        rootIndex = listIndex;\n                        lastRootLi = $(placeholder).find('[data-list=\\'' + rootIndex + '\\']:last')[0];\n                        rootList = this._createList(type, listType.style);\n                        dom.insertBefore(rootList, p);\n                        lastMargin = margin;\n                        levels[margin][levelType] = rootList;\n                    }\n                    isLastRootLi = lastRootLi === p;\n                    list = levels[margin][levelType];\n                    if (margin > lastMargin || !list) {\n                        list = this._createList(type, listType.style);\n                        levels[margin][levelType] = list;\n                        li.appendChild(list);\n                    }\n                    li = this._convertToLi(p);\n                    list.appendChild(li);\n                    if (isLastRootLi) {\n                        rootMargin = lastMargin = -1;\n                    } else {\n                        lastMargin = margin;\n                    }\n                }\n            },\n            removeAttributes: function (element) {\n                var attributes = element.attributes, i = attributes.length;\n                while (i--) {\n                    if (dom.name(attributes[i]) != 'colspan') {\n                        element.removeAttributeNode(attributes[i]);\n                    }\n                }\n            },\n            createColGroup: function (row) {\n                var cells = row.cells;\n                var table = $(row).closest('table');\n                var colgroup = table.children('colgroup');\n                if (cells.length < 2) {\n                    return;\n                } else if (colgroup.length) {\n                    cells = colgroup.children();\n                    colgroup[0].parentNode.removeChild(colgroup[0]);\n                }\n                colgroup = $($.map(cells, function (cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n                    return '<col />';\n                }).join(''));\n                if (!colgroup.is('colgroup')) {\n                    colgroup = $('<colgroup/>').append(colgroup);\n                }\n                colgroup.prependTo(table);\n            },\n            convertHeaders: function (row) {\n                var cells = row.cells, i, boldedCells = $.map(cells, function (cell) {\n                        var child = $(cell).children('p').children('strong')[0];\n                        if (child && dom.name(child) == 'strong') {\n                            return child;\n                        }\n                    });\n                if (boldedCells.length == cells.length) {\n                    for (i = 0; i < boldedCells.length; i++) {\n                        dom.unwrap(boldedCells[i]);\n                    }\n                    $(row).closest('table').find('colgroup').after('<thead></thead>').end().find('thead').append(row);\n                    for (i = 0; i < cells.length; i++) {\n                        dom.changeTag(cells[i], 'th');\n                    }\n                }\n            },\n            removeParagraphs: function (cells) {\n                var i, j, len, cell, paragraphs;\n                for (i = 0; i < cells.length; i++) {\n                    this.removeAttributes(cells[i]);\n                    cell = $(cells[i]);\n                    paragraphs = cell.children('p');\n                    for (j = 0, len = paragraphs.length; j < len; j++) {\n                        if (j < len - 1) {\n                            dom.insertAfter(dom.create(document, 'br'), paragraphs[j]);\n                        }\n                        dom.unwrap(paragraphs[j]);\n                    }\n                }\n            },\n            removeDefaultColors: function (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                    if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                        dom.unwrap(spans[i]);\n                    }\n                }\n            },\n            tables: function (placeholder) {\n                var tables = $(placeholder).find('table'), that = this, rows, firstRow, longestRow, i, j;\n                for (i = 0; i < tables.length; i++) {\n                    rows = tables[i].rows;\n                    longestRow = firstRow = rows[0];\n                    for (j = 1; j < rows.length; j++) {\n                        if (rows[j].cells.length > longestRow.cells.length) {\n                            longestRow = rows[j];\n                        }\n                    }\n                    that.createColGroup(longestRow);\n                    that.convertHeaders(firstRow);\n                    that.removeAttributes(tables[i]);\n                    that.removeParagraphs(tables.eq(i).find('td,th'));\n                    that.removeDefaultColors(tables.eq(i).find('span'));\n                }\n            },\n            headers: function (placeholder) {\n                var titles = $(placeholder).find('p.MsoTitle');\n                for (var i = 0; i < titles.length; i++) {\n                    dom.changeTag(titles[i], 'h1');\n                }\n            },\n            removeFormatting: function (placeholder) {\n                $(placeholder).find('*').each(function () {\n                    $(this).css({\n                        fontSize: '',\n                        fontFamily: ''\n                    });\n                    if (!this.getAttribute('style') && !this.style.cssText) {\n                        this.removeAttribute('style');\n                    }\n                });\n            },\n            clean: function (html) {\n                var that = this, placeholder;\n                var filters = this.options;\n                if (filters.none) {\n                    html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                    html = that.stripEmptyAnchors(html);\n                } else {\n                    html = filters.msConvertLists ? this.extractListLevels(html) : html;\n                    html = Cleaner.fn.clean.call(that, html);\n                    html = that.stripEmptyAnchors(html);\n                    placeholder = dom.create(document, 'div', { innerHTML: html });\n                    that.headers(placeholder);\n                    if (filters.msConvertLists) {\n                        that.lists(placeholder);\n                    }\n                    that.tables(placeholder);\n                    if (filters.msAllFormatting) {\n                        that.removeFormatting(placeholder);\n                    }\n                    html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/gi, '$1');\n                }\n                return html;\n            }\n        });\n        var WebkitFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /\\s+class=\"Apple-style-span[^\"]*\"/gi,\n                    '',\n                    /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi,\n                    '<$1',\n                    /^<div>(.*)<\\/div>$/,\n                    '$1'\n                ];\n            },\n            applicable: function (html) {\n                return /class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i.test(html);\n            }\n        });\n        var DomCleaner = Cleaner.extend({\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                container = this.cleanDom(container);\n                return container.innerHTML;\n            },\n            cleanDom: function (container) {\n                return container;\n            }\n        });\n        var HtmlTagsCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var tags = this.collectTags();\n                $(container).find(tags).each(function () {\n                    dom.unwrap(this);\n                });\n                return container;\n            },\n            collectTags: function () {\n                if (this.options.span) {\n                    return 'span';\n                }\n            },\n            applicable: function () {\n                return this.options.span;\n            }\n        });\n        var HtmlAttrCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var attributes = this.collectAttr();\n                var nodes = $(container).find('[' + attributes.join('],[') + ']');\n                nodes.removeAttr(attributes.join(' '));\n                return container;\n            },\n            collectAttr: function () {\n                if (this.options.css) {\n                    return [\n                        'class',\n                        'style'\n                    ];\n                }\n                return [];\n            },\n            applicable: function () {\n                return this.options.css;\n            }\n        });\n        var TextContainer = function () {\n            this.text = '';\n            this.add = function (text) {\n                this.text += text;\n            };\n        };\n        var HtmlTextLines = Class.extend({\n            init: function (separators) {\n                this.separators = separators || {\n                    text: ' ',\n                    line: '<br/>'\n                };\n                this.lines = [];\n                this.inlineBlockText = [];\n                this.resetLine();\n            },\n            appendText: function (text) {\n                if (text.nodeType === 3) {\n                    text = text.nodeValue;\n                }\n                this.textContainer.add(text);\n            },\n            appendInlineBlockText: function (text) {\n                this.inlineBlockText.push(text);\n            },\n            flashInlineBlockText: function () {\n                if (this.inlineBlockText.length) {\n                    this.appendText(this.inlineBlockText.join(' '));\n                    this.inlineBlockText = [];\n                }\n            },\n            endLine: function () {\n                this.flashInlineBlockText();\n                this.resetLine();\n            },\n            html: function () {\n                var separators = this.separators;\n                var result = '';\n                var lines = this.lines;\n                this.flashInlineBlockText();\n                for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                    var line = lines[i];\n                    for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                        var text = line[j].text;\n                        result += text;\n                        if (j !== jl1) {\n                            result += separators.text;\n                        }\n                    }\n                    if (i !== il1) {\n                        result += separators.line;\n                    }\n                }\n                return result;\n            },\n            resetLine: function () {\n                this.textContainer = new TextContainer();\n                this.line = [];\n                this.line.push(this.textContainer);\n                this.lines.push(this.line);\n            }\n        });\n        var DomEnumerator = Class.extend({\n            init: function (callback) {\n                this.callback = callback;\n            },\n            enumerate: function (node) {\n                if (!node) {\n                    return;\n                }\n                var preventDown = this.callback(node);\n                var child = node.firstChild;\n                if (!preventDown && child) {\n                    this.enumerate(child);\n                }\n                this.enumerate(node.nextSibling);\n            }\n        });\n        var HtmlContentCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.hasText = false;\n                this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\n            },\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                return this.cleanDom(container);\n            },\n            cleanDom: function (container) {\n                this.separators = this.getDefaultSeparators();\n                this.htmlLines = new HtmlTextLines(this.separators);\n                this.enumerator.enumerate(container.firstChild);\n                this.hasText = false;\n                return this.htmlLines.html();\n            },\n            buildText: function (node) {\n                if (dom.isDataNode(node)) {\n                    if (dom.isEmptyspace(node)) {\n                        return;\n                    }\n                    this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                    this.hasText = true;\n                } else if (dom.isBlock(node) && this.hasText) {\n                    var action = this.actions[dom.name(node)] || this.actions.block;\n                    return action(this, node);\n                } else if (dom.isBr(node)) {\n                    this.htmlLines.appendText(this.separators.line);\n                }\n            },\n            applicable: function () {\n                var o = this.options;\n                return o.all || o.keepNewLines;\n            },\n            getDefaultSeparators: function () {\n                if (this.options.all) {\n                    return {\n                        text: ' ',\n                        line: ' '\n                    };\n                } else {\n                    return {\n                        text: ' ',\n                        line: '<br/>'\n                    };\n                }\n            },\n            actions: {\n                ul: $.noop,\n                ol: $.noop,\n                table: $.noop,\n                thead: $.noop,\n                tbody: $.noop,\n                td: function (cleaner, node) {\n                    var tdCleaner = new HtmlContentCleaner({ all: true });\n                    var cellText = tdCleaner.cleanDom(node);\n                    cleaner.htmlLines.appendInlineBlockText(cellText);\n                    return true;\n                },\n                block: function (cleaner) {\n                    cleaner.htmlLines.endLine();\n                }\n            }\n        });\n        var CustomCleaner = Cleaner.extend({\n            clean: function (html) {\n                return this.options.custom(html);\n            },\n            applicable: function () {\n                return typeof this.options.custom === 'function';\n            }\n        });\n        extend(editorNS, {\n            Clipboard: Clipboard,\n            Cleaner: Cleaner,\n            ScriptCleaner: ScriptCleaner,\n            TabCleaner: TabCleaner,\n            MSWordFormatCleaner: MSWordFormatCleaner,\n            WebkitFormatCleaner: WebkitFormatCleaner,\n            HtmlTagsCleaner: HtmlTagsCleaner,\n            HtmlAttrCleaner: HtmlAttrCleaner,\n            HtmlContentCleaner: HtmlContentCleaner,\n            HtmlTextLines: HtmlTextLines,\n            CustomCleaner: CustomCleaner\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/keyboard', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, RangeUtils = editorNS.RangeUtils, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, bomSpan = '<span  class=\\'k-br\\'>\\uFEFF</span>', extend = $.extend;\n        var nodeTypes = dom.nodeTypes;\n        var PREVIOUS_SIBLING = 'previousSibling';\n        function selected(node, range) {\n            return range.startContainer === node && range.endContainer === node && range.startOffset === 0 && range.endOffset == node.childNodes.length;\n        }\n        function getSibling(node, direction, condition) {\n            var sibling = node ? node[direction] : null;\n            while (sibling && !condition(sibling)) {\n                sibling = sibling[direction];\n            }\n            return sibling;\n        }\n        var tableCells = 'td,th,caption';\n        var tableCellsWrappers = 'table,tbody,thead,tfoot,tr';\n        var tableElements = tableCellsWrappers + ',' + tableCells;\n        var inTable = function (range) {\n            return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers);\n        };\n        var RemoveTableContent = Class.extend({\n            remove: function (range) {\n                var that = this;\n                var marker = new Marker();\n                marker.add(range, false);\n                var nodes = RangeUtils.getAll(range, function (node) {\n                    return $(node).is(tableElements);\n                });\n                var doc = RangeUtils.documentFromRange(range);\n                var start = marker.start;\n                var end = marker.end;\n                var cellsTypes = tableCells.split(',');\n                var startCell = dom.parentOfType(start, cellsTypes);\n                var endCell = dom.parentOfType(end, cellsTypes);\n                that._removeContent(start, startCell, true);\n                that._removeContent(end, endCell, false);\n                $(nodes).each(function (i, node) {\n                    node = $(node);\n                    (node.is(tableCells) ? node : node.find(tableCells)).each(function (j, cell) {\n                        cell.innerHTML = '&#65279;';\n                    });\n                });\n                if (startCell && !start.previousSibling) {\n                    dom.insertBefore(doc.createTextNode('\\uFEFF'), start);\n                }\n                if (endCell && !end.nextSibling) {\n                    dom.insertAfter(doc.createTextNode('\\uFEFF'), end);\n                }\n                if (startCell) {\n                    range.setStartBefore(start);\n                } else if (nodes[0]) {\n                    startCell = $(nodes[0]);\n                    startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                    if (startCell.length) {\n                        range.setStart(startCell.get(0), 0);\n                    }\n                }\n                range.collapse(true);\n                dom.remove(start);\n                dom.remove(end);\n            },\n            _removeContent: function (start, top, forwards) {\n                if (top) {\n                    var sibling = forwards ? 'nextSibling' : 'previousSibling', next, getNext = function (node) {\n                            while (node && !node[sibling]) {\n                                node = node.parentNode;\n                            }\n                            return node && $.contains(top, node) ? node[sibling] : null;\n                        };\n                    start = getNext(start);\n                    while (start) {\n                        next = getNext(start);\n                        dom.remove(start);\n                        start = next;\n                    }\n                }\n            }\n        });\n        var TypingHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard, isTypingKey = keyboard.isTypingKey(e), evt = extend($.Event(), e);\n                that.editor.trigger('keydown', evt);\n                if (evt.isDefaultPrevented()) {\n                    e.preventDefault();\n                    return true;\n                }\n                if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                    var range = editor.getRange();\n                    var body = editor.body;\n                    that.startRestorePoint = new RestorePoint(range, body);\n                    if (inTable(range)) {\n                        var removeTableContent = new RemoveTableContent(editor);\n                        removeTableContent.remove(range);\n                        editor.selectRange(range);\n                    }\n                    if (browser.webkit && !range.collapsed && selected(body, range)) {\n                        body.innerHTML = '';\n                    }\n                    if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                        var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                        backspaceHandler.deleteSelection(range);\n                    }\n                    keyboard.startTyping(function () {\n                        that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n                    });\n                    return true;\n                }\n                return false;\n            },\n            keyup: function (e) {\n                var keyboard = this.editor.keyboard;\n                this.editor.trigger('keyup', e);\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var BackspaceHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            _addCaret: function (container) {\n                var caret = dom.create(this.editor.document, 'a');\n                if (!kendo.support.browser.chrome && container.firstChild && container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n                    container = container.firstChild;\n                }\n                dom.insertAt(container, caret, 0);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                return caret;\n            },\n            _restoreCaret: function (caret) {\n                var range = this.editor.createRange();\n                if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n                    range.setStart(caret.previousSibling, caret.previousSibling.length);\n                } else {\n                    range.setStartAfter(caret);\n                }\n                range.collapse(true);\n                this.editor.selectRange(range);\n                dom.remove(caret);\n            },\n            _handleDelete: function (range) {\n                var node = range.endContainer;\n                var block = dom.closestEditableOfType(node, dom.blockElements);\n                if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                    var next = dom.next(block);\n                    if (!next || dom.name(next) != 'p') {\n                        return false;\n                    }\n                    var caret = this._addCaret(next);\n                    this._merge(block, next);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                return false;\n            },\n            _cleanBomBefore: function (range) {\n                var offset = range.startOffset;\n                var node = range.startContainer;\n                var text = node.nodeValue;\n                var count = 0;\n                while (offset - count >= 0 && text[offset - count - 1] == '\\uFEFF') {\n                    count++;\n                }\n                if (count > 0) {\n                    node.deleteData(offset - count, count);\n                    range.setStart(node, Math.max(0, offset - count));\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            },\n            _handleBackspace: function (range) {\n                var node = range.startContainer;\n                var li = dom.closestEditableOfType(node, ['li']);\n                var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n                var editor = this.editor;\n                var previousSibling;\n                if (dom.isDataNode(node)) {\n                    if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                        range.setStart(node, 0);\n                        range.setEnd(node, node.length);\n                        editor.selectRange(range);\n                        return false;\n                    }\n                    this._cleanBomBefore(range);\n                }\n                previousSibling = getSibling(block, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.htmlIndentSpace(sibling);\n                });\n                if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                    range.startOffset = 0;\n                    range.endOffset = 0;\n                    editor.selectRange(range);\n                }\n                var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n                var liIndex = li && $(li).index();\n                var startAtNonFirstLi = startAtLi && liIndex > 0;\n                if (startAtNonFirstLi) {\n                    block = li;\n                    previousSibling = dom.prev(li);\n                }\n                if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n                    if (block.innerText === '') {\n                        block.innerHTML = '\\uFEFF';\n                    }\n                    return true;\n                }\n                if (editorNS.RangeUtils.isStartOf(range, block) && (parseInt(block.style.marginLeft, 10) > 0 || parseInt(block.style.marginRight, 10) > 0)) {\n                    editor.exec('outdent');\n                    return true;\n                }\n                if (block && previousSibling && editorNS.RangeUtils.isStartOf(range, block) || startAtNonFirstLi) {\n                    var caret = this._addCaret(block);\n                    this._merge(previousSibling, block);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                if (startAtLi && liIndex === 0) {\n                    var child = li.firstChild;\n                    if (!child) {\n                        li.innerHTML = editorNS.emptyElementContent;\n                        child = li.firstChild;\n                    }\n                    var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), 'p');\n                    range.selectNodeContents(li);\n                    formatter.toggle(range);\n                    if (dom.insignificant(child)) {\n                        range.setStartBefore(child);\n                    } else {\n                        range.setStart(child, 0);\n                    }\n                    editor.selectRange(range);\n                    return true;\n                }\n                var rangeStartNode = node.childNodes[range.startOffset - 1];\n                var linkRange = range;\n                var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n                var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.isDataNode(sibling) || !dom.isBom(sibling) && sibling.length > 0;\n                });\n                if (anchor || (range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, 'a')) {\n                    anchor = anchor || previousNode;\n                    linkRange = editor.createRange();\n                    linkRange.setStart(anchor, anchor.childNodes.length);\n                    linkRange.collapse(true);\n                }\n                anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n                var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n                if (isEndOfLink) {\n                    var command = new editorNS.UnlinkCommand({\n                        range: linkRange,\n                        body: editor.body,\n                        immutables: !!editor.immutables\n                    });\n                    editor.execCommand(command);\n                    editor._selectionChange();\n                }\n                return false;\n            },\n            _handleSelection: function (range) {\n                var ancestor = range.commonAncestorContainer;\n                var table = dom.closest(ancestor, 'table');\n                var emptyParagraphContent = editorNS.emptyElementContent;\n                var editor = this.editor;\n                var parentElementOrNode;\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                    return true;\n                }\n                var marker = new Marker();\n                marker.add(range, false);\n                if (range.commonAncestorContainer === editor.body) {\n                    this._surroundFullyContent(marker, range);\n                }\n                if (editor.immutables) {\n                    this._handleImmutables(marker);\n                }\n                this._surroundFullySelectedAnchor(marker, range);\n                range.setStartAfter(marker.start);\n                range.setEndBefore(marker.end);\n                var start = range.startContainer;\n                var end = range.endContainer;\n                range.deleteContents();\n                if (end.tagName.toLocaleLowerCase() === 'li' && dom.emptyNode(end)) {\n                    range.selectNode(end);\n                    range.deleteContents();\n                }\n                if (table && $(table).text() === '') {\n                    range.selectNode(table);\n                    range.deleteContents();\n                }\n                ancestor = range.commonAncestorContainer;\n                if (dom.name(ancestor) === 'p' && ancestor.innerHTML === '') {\n                    ancestor.innerHTML = emptyParagraphContent;\n                    range.setStart(ancestor, 0);\n                }\n                this._join(start, end);\n                dom.insertAfter(editor.document.createTextNode('\\uFEFF'), marker.start);\n                marker.remove(range);\n                start = range.startContainer;\n                if (dom.name(start) == 'tr') {\n                    start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                    range.setStart(start, dom.getNodeLength(start));\n                }\n                range.collapse(true);\n                editor.selectRange(range);\n                parentElementOrNode = start.parentElement || start.parentNode;\n                if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n                    this._cleanBomBefore(range);\n                }\n                return true;\n            },\n            _handleImmutables: function (marker) {\n                var immutableParent = editorNS.Immutables.immutableParent;\n                var startImmutable = immutableParent(marker.start);\n                var endImmutable = immutableParent(marker.start);\n                if (startImmutable) {\n                    dom.insertBefore(marker.start, startImmutable);\n                }\n                if (endImmutable) {\n                    dom.insertAfter(marker.end, endImmutable);\n                }\n                if (startImmutable) {\n                    dom.remove(startImmutable);\n                }\n                if (endImmutable && endImmutable.parentNode) {\n                    dom.remove(endImmutable);\n                }\n            },\n            _surroundFullyContent: function (marker, range) {\n                var children = range.commonAncestorContainer.children, startParent = children[0], endParent = children[children.length - 1];\n                this._moveMarker(marker, range, startParent, endParent);\n            },\n            _surroundFullySelectedAnchor: function (marker, range) {\n                var start = marker.start, startParent = $(start).closest('a').get(0), end = marker.end, endParent = $(end).closest('a').get(0);\n                this._moveMarker(marker, range, startParent, endParent);\n            },\n            _moveMarker: function (marker, range, startParent, endParent) {\n                var start = marker.start, end = marker.end;\n                if (startParent && RangeUtils.isStartOf(range, startParent)) {\n                    dom.insertBefore(start, startParent);\n                }\n                if (endParent && RangeUtils.isEndOf(range, endParent)) {\n                    dom.insertAfter(end, endParent);\n                }\n            },\n            _root: function (node) {\n                while (node && dom.name(node) != 'body' && node.parentNode && dom.name(node.parentNode) != 'body') {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            _join: function (start, end) {\n                start = this._root(start);\n                end = this._root(end);\n                if (start != end && dom.is(end, 'p')) {\n                    this._merge(start, end);\n                }\n            },\n            _merge: function (dest, src) {\n                dom.removeTrailingBreak(dest);\n                while (dest && src.firstChild) {\n                    if (dest.nodeType == 1) {\n                        dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n                        if (dest) {\n                            dest.appendChild(src.firstChild);\n                        }\n                    } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                        this._mergeWithTextNode(dest, src.firstChild);\n                    } else {\n                        dest.parentNode.appendChild(src.firstChild);\n                    }\n                }\n                dom.remove(src);\n            },\n            _mergeWithTextNode: function (textNode, appendedNode) {\n                if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                    if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                        dom.insertAfter(appendedNode, textNode.nextSibling);\n                    } else {\n                        dom.insertAfter(appendedNode, textNode);\n                    }\n                }\n            },\n            _isCaret: function (element) {\n                return $(element).is('a');\n            },\n            keydown: function (e) {\n                var method, startRestorePoint;\n                var editor = this.editor;\n                var range = editor.getRange();\n                var keyCode = e.keyCode;\n                var keys = kendo.keys;\n                var backspace = keyCode === keys.BACKSPACE;\n                var del = keyCode == keys.DELETE;\n                if (editor.immutables && editor.immutables.keydown(e, range)) {\n                    return;\n                }\n                if ((backspace || del) && !range.collapsed) {\n                    method = '_handleSelection';\n                } else if (backspace) {\n                    method = '_handleBackspace';\n                } else if (del) {\n                    method = '_handleDelete';\n                }\n                if (!method) {\n                    return;\n                }\n                startRestorePoint = new RestorePoint(range, editor.body);\n                if (this[method](range)) {\n                    e.preventDefault();\n                    editorNS._finishUpdate(editor, startRestorePoint);\n                }\n            },\n            deleteSelection: function (range) {\n                this._handleSelection(range);\n            },\n            keyup: $.noop\n        });\n        var SystemHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.systemCommandIsInProgress = false;\n            },\n            createUndoCommand: function () {\n                this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n            },\n            changed: function () {\n                if (this.startRestorePoint) {\n                    return this.startRestorePoint.html != this.editor.body.innerHTML;\n                }\n                return false;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard;\n                if (keyboard.isModifierKey(e)) {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                    }\n                    that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                    return true;\n                }\n                if (keyboard.isSystem(e)) {\n                    that.systemCommandIsInProgress = true;\n                    if (that.changed()) {\n                        that.systemCommandIsInProgress = false;\n                        that.createUndoCommand();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            keyup: function () {\n                var that = this;\n                if (that.systemCommandIsInProgress && that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var SelectAllHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                if (!browser.webkit || e.isDefaultPrevented() || !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                    return;\n                }\n                if (this.editor.options.immutables) {\n                    this._toSelectableImmutables();\n                }\n                this._selectEditorBody();\n            },\n            _selectEditorBody: function () {\n                var editor = this.editor;\n                var range = editor.getRange();\n                range.selectNodeContents(editor.body);\n                editor.selectRange(range);\n            },\n            _toSelectableImmutables: function () {\n                var editor = this.editor, body = editor.body, immutable = editorNS.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(bomSpan).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(bomSpan).appendTo(body);\n                }\n            },\n            keyup: $.noop\n        });\n        var Keyboard = Class.extend({\n            init: function (handlers) {\n                this.handlers = handlers;\n                this.typingInProgress = false;\n            },\n            isCharacter: function (keyCode) {\n                return keyCode >= 48 && keyCode <= 90 || keyCode >= 96 && keyCode <= 111 || keyCode >= 186 && keyCode <= 192 || keyCode >= 219 && keyCode <= 222 || keyCode == 229;\n            },\n            toolFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, toolOptions, modifier = this._getShortcutModifier(e, navigator.platform);\n                for (toolName in tools) {\n                    toolOptions = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    if ((toolOptions.key == key || toolOptions.key == e.keyCode) && toolOptions.ctrl == modifier && toolOptions.alt == e.altKey && toolOptions.shift == e.shiftKey) {\n                        return toolName;\n                    }\n                }\n            },\n            _getShortcutModifier: function (e, platform) {\n                var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n                return mac ? e.metaKey : e.ctrlKey;\n            },\n            toolsFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, o, matchesKey, found = [];\n                var matchKey = function (toolKey) {\n                    return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode;\n                };\n                for (toolName in tools) {\n                    o = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    matchesKey = $.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                    if (matchesKey && o.ctrl == e.ctrlKey && o.alt == e.altKey && o.shift == e.shiftKey) {\n                        found.push(tools[toolName]);\n                    }\n                }\n                return found;\n            },\n            isTypingKey: function (e) {\n                var keyCode = e.keyCode;\n                return this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey || keyCode == 32 || keyCode == 13 || keyCode == 8 || keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey;\n            },\n            isModifierKey: function (e) {\n                var keyCode = e.keyCode;\n                return keyCode == 17 && !e.shiftKey && !e.altKey || keyCode == 16 && !e.ctrlKey && !e.altKey || keyCode == 18 && !e.ctrlKey && !e.shiftKey;\n            },\n            isSystem: function (e) {\n                return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n            },\n            startTyping: function (callback) {\n                this.onEndTyping = callback;\n                this.typingInProgress = true;\n            },\n            stopTyping: function () {\n                if (this.typingInProgress && this.onEndTyping) {\n                    this.onEndTyping();\n                }\n                this.typingInProgress = false;\n            },\n            endTyping: function (force) {\n                var that = this;\n                that.clearTimeout();\n                if (force) {\n                    that.stopTyping();\n                } else {\n                    that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n                }\n            },\n            isTypingInProgress: function () {\n                return this.typingInProgress;\n            },\n            clearTimeout: function () {\n                window.clearTimeout(this.timeout);\n            },\n            notify: function (e, what) {\n                var i, handlers = this.handlers;\n                for (i = 0; i < handlers.length; i++) {\n                    if (handlers[i][what](e)) {\n                        break;\n                    }\n                }\n            },\n            keydown: function (e) {\n                this.notify(e, 'keydown');\n            },\n            keyup: function (e) {\n                this.notify(e, 'keyup');\n            }\n        });\n        extend(editorNS, {\n            TypingHandler: TypingHandler,\n            SystemHandler: SystemHandler,\n            BackspaceHandler: BackspaceHandler,\n            SelectAllHandler: SelectAllHandler,\n            Keyboard: Keyboard\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/exportpdf', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, extend = $.extend;\n        var ExportPdfCommand = Command.extend({\n            init: function (options) {\n                this.async = true;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this;\n                var range = that.lockRange(true);\n                var editor = that.editor;\n                editor._destroyResizings();\n                editor.saveAsPDF().then(function () {\n                    that.releaseRange(range);\n                    editor._initializeColumnResizing();\n                    editor._initializeRowResizing();\n                    editor._initializeTableResizing();\n                });\n            }\n        });\n        extend(editorNS, { ExportPdfCommand: ExportPdfCommand });\n        registerTool('pdf', new Tool({\n            command: ExportPdfCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Export PDF'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/print', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, extend = $.extend;\n        var PrintCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                if (kendo.support.browser.msie) {\n                    editor.document.execCommand('print', false, null);\n                } else if (editor.window.print) {\n                    editor.window.print();\n                }\n            }\n        });\n        extend(editorNS, { PrintCommand: PrintCommand });\n        registerTool('print', new Tool({\n            command: PrintCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Print'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatpainter', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var CopyFormatCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.inlineStyles = [];\n                this.blockStyles = [];\n                this.collectStyles(range);\n                this.editor.inlineStyles = this.inlineStyles;\n                this.editor.blockStyles = this.blockStyles;\n                this.releaseRange(range);\n            },\n            collectStyles: function (range) {\n                var rangeNodes = RangeUtils.nodes(range);\n                var node;\n                if (rangeNodes.length === 1) {\n                    node = rangeNodes[0].parentNode;\n                } else {\n                    node = range.startContainer;\n                }\n                while (node && !dom.is(node, 'body') && node.getAttribute('data-role') !== 'editor') {\n                    if (dom.isBlock(node)) {\n                        this.populateStyles(node, 'blockStyles');\n                        if (dom.is(node, 'li')) {\n                            node = node.parentNode;\n                        } else {\n                            node = null;\n                        }\n                    } else {\n                        this.populateStyles(node, 'inlineStyles');\n                        node = node.parentNode;\n                    }\n                }\n            },\n            populateStyles: function (node, destination) {\n                var styles = node.style;\n                var attributes = node.attributes;\n                var nodeStyles = {\n                    tags: [node.tagName],\n                    attr: { style: {} }\n                };\n                var styleValue, styleKey, attributeKey, attributeValue, i;\n                for (i = 0; styles && i < styles.length; i++) {\n                    styleKey = styles[i];\n                    styleValue = styles[styleKey];\n                    nodeStyles.attr.style[styleKey] = styleValue;\n                }\n                for (i = 0; attributes && i < attributes.length; i++) {\n                    attributeKey = attributes[i].nodeName;\n                    attributeValue = attributes[i].nodeValue;\n                    if (attributeKey === 'style') {\n                        continue;\n                    } else if (attributeKey === 'class') {\n                        nodeStyles.attr.className = attributeValue;\n                    } else {\n                        nodeStyles.attr[attributeKey] = attributeValue;\n                    }\n                }\n                this[destination].push(nodeStyles);\n            }\n        });\n        var ApplyFormatCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                var markers = RangeUtils.getMarkers(range);\n                var editor = this.editor;\n                var inlineStyles = editor.inlineStyles;\n                var blockStyles = editor.blockStyles;\n                var nodes;\n                if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n                    return;\n                }\n                if (markers.length === 3) {\n                    this.marker.removeCaret(range);\n                    this.marker.caret = null;\n                }\n                this.removeEmptyElementsFromRange(range);\n                nodes = RangeUtils.nodes(range);\n                this.cleanInlineParents(nodes);\n                dom.normalize(range.commonAncestorContainer);\n                if (markers.length === 2) {\n                    range.setStartAfter(markers[0]);\n                    range.setEndBefore(markers[1]);\n                } else {\n                    range.setStartBefore(nodes[0]);\n                    range.setEndAfter(nodes[0]);\n                }\n                nodes = RangeUtils.nodes(range);\n                if (nodes && blockStyles && blockStyles.length) {\n                    this.applyBlockStyles(nodes, blockStyles);\n                }\n                if (nodes && inlineStyles && inlineStyles.length) {\n                    this.applyInlineStyles(nodes, inlineStyles);\n                }\n                this.releaseRange(range);\n            },\n            removeEmptyElementsFromRange: function (range) {\n                var isEmptyInline = function (node) {\n                    return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n                };\n                var emptyElements, i;\n                emptyElements = RangeUtils.getAll(range, isEmptyInline);\n                if (emptyElements && emptyElements.length > 0) {\n                    for (i = 0; i < emptyElements.length; i++) {\n                        emptyElements[i].parentNode.removeChild(emptyElements[i]);\n                    }\n                }\n            },\n            cleanInlineParents: function (nodes) {\n                var i, node, parent, children, j, child, newNode;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    parent = node.parentNode;\n                    if (this.immutableParent(node)) {\n                        continue;\n                    }\n                    while (parent && dom.isInline(parent)) {\n                        children = parent.childNodes;\n                        for (j = 0; j < children.length; j++) {\n                            child = children[j];\n                            if (!dom.isMarker(child) && child !== node) {\n                                newNode = parent.cloneNode(true);\n                                newNode.innerHTML = '';\n                                dom.wrap(child, newNode);\n                            }\n                        }\n                        dom.unwrap(parent);\n                        parent = node.parentNode;\n                    }\n                }\n            },\n            applyBlockStyles: function (nodes, blockStyles) {\n                var formatTag = blockStyles[0].tags[0];\n                var attr = blockStyles[0].attr;\n                var document = this.editor.document;\n                var i, len, node, wrapper, blockParent, outerWrapper;\n                var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    node = nodes[i];\n                    if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                        continue;\n                    }\n                    blockParent = dom.blockParentOrBody(node);\n                    if (blockParent.tagName !== 'BODY' && blockParent.tagName !== formatTag) {\n                        if (blockParent.tagName !== 'LI' && blockParent.tagName !== 'TD' && blockParent.tagName !== 'TH') {\n                            previousNodes = [];\n                            nextNodes = [];\n                            previous = node.previousSibling;\n                            next = node.nextSibling;\n                            while (previous) {\n                                if (!dom.isMarker(previous)) {\n                                    previousNodes.push(previous);\n                                }\n                                previous = previous.previousSibling;\n                            }\n                            if (previousNodes.length) {\n                                prevWrapper = blockParent.cloneNode(true);\n                                prevWrapper.innerHTML = '';\n                                dom.insertBefore(prevWrapper, previousNodes[0]);\n                                for (j = 0; j < previousNodes.length; j++) {\n                                    child = previousNodes[j];\n                                    dom.insertAt(prevWrapper, child, 0);\n                                }\n                            }\n                            while (next) {\n                                if (!dom.isMarker(next)) {\n                                    nextNodes.push(next);\n                                }\n                                next = next.nextSibling;\n                            }\n                            if (nextNodes.length) {\n                                nextWrapper = blockParent.cloneNode(true);\n                                nextWrapper.innerHTML = '';\n                                dom.insertBefore(nextWrapper, nextNodes[0]);\n                                for (j = 0; j < nextNodes.length; j++) {\n                                    child = nextNodes[j];\n                                    nextWrapper.appendChild(child);\n                                }\n                            }\n                            dom.unwrap(blockParent);\n                        }\n                        wrapper = dom.create(document, formatTag, attr);\n                        dom.wrap(node, wrapper);\n                    } else if (blockParent.tagName === formatTag) {\n                        dom.attr(blockParent, attr);\n                    }\n                }\n                if (blockStyles.length === 2 && blockParent.tagName !== 'LI' && formatTag === 'LI') {\n                    listItems = [];\n                    while (dom.is(wrapper, 'li')) {\n                        listItems.push(wrapper);\n                        wrapper = dom.prev(wrapper);\n                    }\n                    outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                    dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n                    outerWrapper.appendChild(listItems[0]);\n                    for (i = 1, len = listItems.length; i < len; i++) {\n                        dom.insertBefore(listItems[i], outerWrapper.firstChild);\n                    }\n                } else if (blockStyles.length === 2 && blockParent.tagName !== 'LI') {\n                    outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                    dom.wrap(wrapper, outerWrapper);\n                }\n            },\n            applyInlineStyles: function (nodes, inlineStyles) {\n                var document = this.editor.document;\n                var currentStyle, createdNode, topNode, i, newNode, node;\n                for (i = 0; i < inlineStyles.length; i++) {\n                    currentStyle = inlineStyles[i];\n                    createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n                    if (topNode) {\n                        createdNode.appendChild(topNode);\n                    }\n                    topNode = createdNode;\n                }\n                if (topNode) {\n                    for (i = 0; i < nodes.length; i++) {\n                        node = nodes[i];\n                        if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                            continue;\n                        }\n                        newNode = topNode.cloneNode(true);\n                        dom.insertBefore(newNode, node);\n                        while (newNode.children && newNode.children.length) {\n                            newNode = newNode.children[0];\n                        }\n                        newNode.appendChild(node);\n                    }\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            immutableParent: function (node) {\n                return this.immutables() && Editor.Immutables.immutableParent(node);\n            }\n        });\n        var CopyFormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                return new CopyFormatCommand(commandArguments);\n            }\n        });\n        var ApplyFormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                return new ApplyFormatCommand(commandArguments);\n            }\n        });\n        $.extend(Editor, {\n            CopyFormatCommand: CopyFormatCommand,\n            ApplyFormatCommand: ApplyFormatCommand,\n            CopyFormatTool: CopyFormatTool,\n            ApplyFormatTool: ApplyFormatTool\n        });\n        registerTool('copyFormat', new CopyFormatTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Copy format'\n            })\n        }));\n        registerTool('applyFormat', new ApplyFormatTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Apply format'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/resizing-utils', ['editor/main'], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var PERCENTAGE = '%';\n        var PIXEL = 'px';\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = 'string';\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is('body') && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n            return 0;\n        }\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            } else {\n                return parseFloat(value) / total * 100;\n            }\n        }\n        function inPercentages(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value);\n        }\n        function inPixels(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PIXELS.test(value);\n        }\n        function toPercentages(value) {\n            return parseFloat(value) + PERCENTAGE;\n        }\n        function toPixels(value) {\n            return parseFloat(value) + PIXEL;\n        }\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n        extend(Editor, { ResizingUtils: ResizingUtils });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-element-resizing', [\n        'editor/main',\n        'kendo.resizable',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_ENTER = 'mouseenter';\n        var MOUSE_LEAVE = 'mouseleave';\n        var MOUSE_MOVE = 'mousemove';\n        var MOUSE_UP = 'mouseup';\n        var COMMA = ',';\n        var DOT = '.';\n        var LAST_CHILD = ':last-child';\n        var TABLE = 'table';\n        var TableElementResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.options.tags = $.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n            destroy: function () {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n                that._destroyResizeHandle();\n            },\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: '',\n                rtl: false,\n                handle: {\n                    dataAttribute: '',\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: ''\n                }\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), proxy(that.detectElementBorderHovering, that));\n            },\n            resizingInProgress: function () {\n                var that = this;\n                var resizable = that._resizable;\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n                return false;\n            },\n            resize: noop,\n            detectElementBorderHovering: function (e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        } else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    } else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n            elementBorderHovered: noop,\n            showResizeHandle: function (tableElement, e) {\n                var that = this;\n                if (e.buttons !== 0) {\n                    return;\n                }\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n                that._initResizable(tableElement);\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n            _initResizeHandle: function () {\n                var that = this;\n                var options = that.options;\n                that._destroyResizeHandle();\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n            setResizeHandlePosition: noop,\n            setResizeHandleDimensions: noop,\n            setResizeHandleDataAttributes: function (tableElement) {\n                var that = this;\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n            _attachResizeHandleEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n                that.resizeHandle.on(MOUSE_DOWN + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).show();\n                }).on(MOUSE_UP + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n            },\n            _hideResizeMarker: function () {\n                var that = this;\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n            _destroyResizeHandle: function () {\n                var that = this;\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n            _initResizable: function (tableElement) {\n                var that = this;\n                if (!that.resizeHandle) {\n                    return;\n                }\n                that._destroyResizable();\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: proxy(that.onResizeStart, that),\n                    resize: proxy(that.onResize, that),\n                    resizeend: proxy(that.onResizeEnd, that)\n                });\n            },\n            _destroyResizable: function () {\n                var that = this;\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n            onResizeStart: function () {\n                this._disableKeyboard();\n            },\n            onResize: function (e) {\n                this.setResizeHandleDragPosition(e);\n            },\n            setResizeHandleDragPosition: noop,\n            onResizeEnd: function (e) {\n                var that = this;\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n            _disableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _forceResizing: function (e) {\n                var resizable = this._resizable;\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n        var ResizingFactory = Class.extend({\n            create: function (editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n                $(editor.body).on(MOUSE_ENTER + NS, TABLE, function (e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    } else {\n                        that._initResizing(editor, table, options);\n                    }\n                }).on(MOUSE_LEAVE + NS, TABLE, function (e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                }).on(MOUSE_LEAVE + NS, function () {\n                    var resizing = editor[resizingName];\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                }).on(MOUSE_UP + NS, function (e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n            },\n            dispose: function (editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n            _initResizing: function (editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n            _destroyResizing: function (editor, options) {\n                var resizingName = options.name;\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n        TableElementResizing.create = function (editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n        TableElementResizing.dispose = function (editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n        extend(Editor, { TableElementResizing: TableElementResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/column-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing',\n        'editor/dom'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var NS = '.kendoEditorColumnResizing';\n        var RESIZE_HANDLE_CLASS = 'k-column-resize-handle';\n        var RESIZE_MARKER_CLASS = 'k-column-resize-marker';\n        var BODY = 'body';\n        var TBODY = 'tbody';\n        var THEAD = 'thead';\n        var TD = 'td';\n        var TH = 'th';\n        var TR = 'tr';\n        var COLATTR = 'col-index';\n        var COMMA = ',';\n        var WIDTH = 'width';\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [\n                    TD,\n                    TH\n                ],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'column',\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n                if (mousePosition > borderOffset - handleWidth && mousePosition < borderOffset + handleWidth) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (column) {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var columnOffsetLeft = column.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(column.css('marginLeft'));\n                var innerElementOffsetTop = tableInnerElement.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(tableInnerElement.css('marginTop'));\n                that.resizeHandle.css({\n                    top: innerElementOffsetTop + scrollTopOffset,\n                    left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - handleWidth / 2,\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: fullHeight\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rootElement = $(options.rootElement);\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(column.css('marginLeft'));\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var resizeHandleOffsetLeft = resizeHandle.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(resizeHandle.css('marginLeft'));\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n                resizeHandle.css({ left: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? -1 : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                var colIndex;\n                var nextColumn;\n                dom.reMapTableColumns(that.element, COLATTR);\n                colIndex = parseInt(column.attr(COLATTR), 10);\n                if (column.prop('colSpan') > 1) {\n                    column = $(that.element).find('[' + COLATTR + '=' + (colIndex + column.prop('colSpan') - 1) + ']').eq(0);\n                    colIndex = parseInt(column.attr(COLATTR), 10);\n                }\n                nextColumn = $(that.element).find('[' + COLATTR + '=' + (colIndex + 1) + ']:not([colspan])');\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(nextColumn);\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(parseInt(column.attr(COLATTR), 10), initialAdjacentColumnWidth, initialColumnWidth, initialColumnWidth - newWidth);\n                dom.clearTableMappings(that.element, COLATTR);\n            },\n            _setTableComputedWidth: function () {\n                var element = this.element;\n                if (element.style[WIDTH] === '') {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n            _setColumnsComputedWidth: function () {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var innerElementWidth = outerWidth(tableInnerElement);\n                var columns = tableInnerElement.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function () {\n                    return outerWidth($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                    } else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n            _resizeTopAndBottomColumns: function (column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).attr(COLATTR);\n                var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    var cell = this;\n                    return $(cell).attr(COLATTR) === columnIndex && cell !== column;\n                });\n                var length = topAndBottomColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n            _resizeColumn: function (column, newWidth) {\n                var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n                } else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n            _resizeAdjacentColumns: function (columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    return parseInt($(this).attr(COLATTR), 10) === columnIndex + 1;\n                });\n                var length = adjacentColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n            _resizeAdjacentColumn: function (adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n        ColumnResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'columnResizing',\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n        ColumnResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { ColumnResizing: ColumnResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/row-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var math = window.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorRowResizing';\n        var RESIZE_HANDLE_CLASS = 'k-row-resize-handle';\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = 'k-row-resize-marker-wrapper';\n        var RESIZE_MARKER_CLASS = 'k-row-resize-marker';\n        var BODY = 'body';\n        var TR = 'tr';\n        var TBODY = 'tbody';\n        var THEAD = 'thead';\n        var COMMA = ',';\n        var HEIGHT = 'height';\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'row',\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n                if (mousePosition > borderOffset - handleHeight && mousePosition < borderOffset + handleHeight) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var rowOffsetLeft = row.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(row.css('marginLeft'));\n                var rowOffsetTop = row.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(row.css('marginTop'));\n                that.resizeHandle.css({\n                    top: rowOffsetTop + outerHeight(row) + scrollTopOffset - handleHeight / 2,\n                    left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n                that.resizeHandle.css({\n                    width: innerTableElement.width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var $row = $(row);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var tableTopOffset = topInnerTableElement.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(topInnerTableElement.css('marginTop'));\n                var rowOffsetTop = $row.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat($row.css('marginTop'));\n                var resizeHandleOffsetTop = resizeHandle.offset().top - (Math.max(0, rootElement.offset().top) + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(resizeHandle.css('marginTop'));\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                    min: rowOffsetTop + scrollTopOffset + min,\n                    max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n                resizeHandle.css({ top: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableHead = element.children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableHeadHeight + tableBodyHeight - options.min)\n                });\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n                if (inPercentages(initialStyleHeight)) {\n                    that._setRowsHeightInPercentages();\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n            _setTableHeight: function (newHeight) {\n                var element = this.element;\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                } else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n        RowResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'rowResizing',\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n        RowResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { RowResizing: RowResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resize-handle', [\n        'editor/main',\n        'kendo.draganddrop',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizeHandle';\n        var RESIZE_HANDLE_CLASS = 'k-table-resize-handle';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var HALF_INSIDE = 'halfInside';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var BODY = 'body';\n        var TABLE = 'table';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        var TableResizeHandle = Observable.extend({\n            init: function (options) {\n                var that = this;\n                Observable.fn.init.call(that);\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS).remove();\n                that.element = null;\n                that._destroyDraggable();\n                that.unbind();\n            },\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template: '<div class=\\'k-table-resize-handle-wrapper\\' unselectable=\\'on\\' contenteditable=\\'false\\'>' + '<div class=\\'' + RESIZE_HANDLE_CLASS + '\\'></div>' + '</div>'\n            },\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n            show: function () {\n                this._setPosition();\n            },\n            _setPosition: function () {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: 'absolute'\n                });\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                $(that.element).on(MOUSE_OVER + NS, proxy(that._onMouseOver, that)).on(MOUSE_OUT + NS, proxy(that._onMouseOut, that));\n            },\n            _onMouseOver: function () {\n                this.trigger(MOUSE_OVER);\n            },\n            _onMouseOut: function () {\n                this.trigger(MOUSE_OUT);\n            },\n            _addStyles: function () {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass('k-resize-' + that.options.direction);\n            },\n            _initPositioningStrategy: function () {\n                var that = this;\n                var options = that.options;\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n            _initDraggable: function () {\n                var that = this;\n                var element = that.element;\n                if (that._draggable || !element) {\n                    return;\n                }\n                that._draggable = new Draggable(element, {\n                    dragstart: proxy(that._onDragStart, that),\n                    drag: proxy(that._onDrag, that),\n                    dragend: proxy(that._onDragEnd, that)\n                });\n            },\n            _onDragStart: function () {\n                this.trigger(DRAG_START);\n            },\n            _onDrag: function (e) {\n                var that = this;\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n            _onDragEnd: function () {\n                this.trigger(DRAG_END);\n            },\n            _destroyDraggable: function () {\n                var that = this;\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n            _initDraggingStrategy: function () {\n                var that = this;\n                that._draggingStrategy = HandleDraggingStrategy.create({ name: that.options.direction });\n            }\n        });\n        var StrategyFactory = Class.extend({\n            init: function () {\n                this._items = [];\n            },\n            register: function (name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n            create: function (options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : '';\n                var match;\n                var item;\n                var i;\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n        var HandlePositioningStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n            getPosition: function () {\n                var that = this;\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n                return scrollOffsetPosition;\n            },\n            calculatePosition: noop,\n            applyHandleOffset: function (position) {\n                var options = this.options;\n                var handle = $(options.handle);\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - outerHeight(handle) / 2,\n                        left: position.left - outerWidth(handle) / 2\n                    };\n                }\n                return position;\n            },\n            applyScrollOffset: function (position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                if (!rootElement.is(BODY)) {\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + (rootElement.scrollLeft() || 0) - scrollBarWidth\n                    };\n                }\n                return position;\n            }\n        });\n        HandlePositioningStrategy.create = function (options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n        var HandleDraggingStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n            adjustDragDelta: function (deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n        HandleDraggingStrategy.create = function (options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n        extend(Editor, { TableResizeHandle: TableResizeHandle });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resizing', [\n        'editor/main',\n        'editor/resizing/table-resize-handle',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var TableResizeHandle = Editor.TableResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizing';\n        var RESIZE_HANDLE_WRAPPER_CLASS = 'k-table-resize-handle-wrapper';\n        var TABLE_CLASS = 'k-table';\n        var TABLE_RESIZING_CLASS = 'k-table-resizing';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var COLUMN = 'td';\n        var ROW = 'tr';\n        var TBODY = 'tbody';\n        var THEAD = 'thead';\n        var TABLE = 'table';\n        var COMMA = ',';\n        var WIDTH = 'width';\n        var HEIGHT = 'height';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        var TableResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                }\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS);\n                that.element = null;\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n                that._destroyResizeHandles();\n            },\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [\n                    { direction: NORTHWEST },\n                    { direction: NORTH },\n                    { direction: NORTHEAST },\n                    { direction: EAST },\n                    { direction: SOUTHEAST },\n                    { direction: SOUTH },\n                    { direction: SOUTHWEST },\n                    { direction: WEST }\n                ]\n            },\n            resize: function (args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                that.showResizeHandles();\n            },\n            _resizeWidth: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n                if (inPercentages(styleWidth)) {\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    } else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n                that._setColumnsWidth();\n                element[0].style[WIDTH] = newWidth;\n            },\n            _resizeHeight: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPercentages();\n                }\n                if (inPercentages(styleHeight)) {\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    } else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n                element[0].style[HEIGHT] = newHeight;\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPixels();\n                }\n            },\n            _getMaxDimensionValue: function (dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? -1 : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? parent.scrollLeft() : parent.scrollTop());\n                if (parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === '' && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    } else {\n                        return parentDimension + parentScrollOffset;\n                    }\n                } else {\n                    return parentDimension + parentScrollOffset;\n                }\n            },\n            _setColumnsWidth: function () {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n                    if (styleWidth !== '') {\n                        return inPercentages(styleWidth) ? true : false;\n                    } else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === '') {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n            _hasRowsInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === '' || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            showResizeHandles: function () {\n                var that = this;\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n            _initResizeHandles: function () {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n                if (handles && handles.length > 0) {\n                    return;\n                }\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new TableResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n                that._bindToResizeHandlesEvents();\n            },\n            _destroyResizeHandles: function () {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n            },\n            _showResizeHandles: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n            _bindToResizeHandlesEvents: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n                    handle.bind(DRAG, proxy(that._onResizeHandleDrag, that));\n                    handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                    handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                    handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n                }\n            },\n            _onResizeHandleDragStart: function () {\n                var that = this;\n                var element = $(that.element);\n                element.addClass(TABLE_RESIZING_CLASS);\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n            _onResizeHandleDrag: function (e) {\n                this.resize(e);\n            },\n            _onResizeHandleDragEnd: function () {\n                var that = this;\n                $(that.element).removeClass(TABLE_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n            _disableKeyboard: function () {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function (e) {\n                    e.preventDefault();\n                });\n            }\n        });\n        var TableResizingFactory = Class.extend({\n            create: function (editor) {\n                var factory = this;\n                $(editor.body).on(MOUSE_DOWN + NS, TABLE, function (e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    if (tableResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                return;\n                            } else {\n                                if (element !== eventTarget) {\n                                    editor._destroyTableResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    } else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n                    editor._showTableResizeHandles();\n                }).on(MOUSE_DOWN + NS, function (e) {\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n                    if (tableResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyTableResizing();\n                    }\n                });\n            },\n            dispose: function (editor) {\n                $(editor.body).off(NS);\n            },\n            _initResizing: function (editor, table) {\n                if (!browser.msie && !browser.mozilla) {\n                    editor.tableResizing = new TableResizing(table, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n            }\n        });\n        TableResizingFactory.current = new TableResizingFactory();\n        TableResizing.create = function (editor) {\n            TableResizingFactory.current.create(editor);\n        };\n        TableResizing.dispose = function (editor) {\n            TableResizingFactory.current.dispose(editor);\n        };\n        extend(Editor, { TableResizing: TableResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-command', ['editor/plugins/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, Command = Editor.Command;\n        var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: ['table'] }]);\n        var cellsFormatFinder = new Editor.BlockFormatFinder([{\n                tags: [\n                    'td',\n                    'th'\n                ]\n            }]);\n        var reUnit = /([a-z]+|%)$/i;\n        var COL = 'col';\n        var ROW = 'row';\n        var COLGROUP = 'colgroup';\n        var SCOPE = 'scope';\n        var COL_INDEX = 'col-index';\n        var TH = 'th';\n        var TD = 'td';\n        var THEAD = 'thead';\n        var HEADERS = 'headers';\n        var TABLE = 'table';\n        var TableWizardCommand = Command.extend({\n            exec: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var range = cmd.range = cmd.lockRange();\n                var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined;\n                var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined;\n                var options = {\n                    visible: false,\n                    messages: editor.options.messages,\n                    closeCallback: $.proxy(cmd.onDialogClose, cmd),\n                    table: cmd.parseTable(selectedTable, selectedCells),\n                    dialogOptions: editor.options.dialogOptions,\n                    isRtl: kendo.support.isRtl(editor.wrapper)\n                };\n                var dialog = new Editor.TableWizardDialog(options);\n                dialog.open();\n            },\n            onDialogClose: function (data) {\n                var cmd = this;\n                cmd.releaseRange(cmd.range);\n                if (data) {\n                    if (cmd.options.insertNewTable) {\n                        cmd.insertTable(cmd.createNewTable(data));\n                    } else {\n                        cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                    }\n                }\n            },\n            releaseRange: function (range) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                dom.windowFromDocument(doc).focus();\n                Command.fn.releaseRange.call(cmd, range);\n            },\n            insertTable: function (table) {\n                var range = this.range;\n                range.insertNode(table);\n                range.collapse(true);\n                this.editor.selectRange(range);\n                this._ensureFocusableAfterTable(table);\n            },\n            _ensureFocusableAfterTable: function (table) {\n                var siblingNodes = $(table).parent().contents();\n                var lastSiblingIndex = siblingNodes.length - 1;\n                var lastSibling = siblingNodes.get(lastSiblingIndex);\n                while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                    lastSiblingIndex -= 1;\n                    lastSibling = siblingNodes.get(lastSiblingIndex);\n                }\n                if (lastSibling === table) {\n                    dom.insertAfter(dom.createEmptyNode(this.editor.document, 'p'), table);\n                }\n            },\n            updateTable: function (data, table, selectedCells) {\n                var cmd = this;\n                var tableRows = $(table.rows).toArray();\n                var tableProp = data.tableProperties;\n                var rows = tableProp.rows;\n                var columns = tableProp.columns;\n                var tHead = table.tHead;\n                var last = function (collection) {\n                    return collection[collection.length - 1];\n                };\n                while (selectedCells.length > 1) {\n                    selectedCells.pop();\n                }\n                var lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n                var row, parent;\n                cmd._deleteTableRows(tableRows, tableRows.length - rows);\n                if (tableRows.length < rows) {\n                    var rowIndex = $(lastSelectedRow).index();\n                    var cellsLength = lastSelectedRow.cells.length;\n                    var newRowsCount = rows - tableRows.length;\n                    parent = lastSelectedRow.parentNode;\n                    while (newRowsCount) {\n                        row = parent.insertRow(rowIndex + 1);\n                        cmd._insertCells(cellsLength - row.cells.length, row);\n                        newRowsCount--;\n                    }\n                }\n                if (tableRows[0].cells.length > columns) {\n                    $(tableRows).each(function (i, row) {\n                        while (row.cells.length > columns) {\n                            row.deleteCell(-1);\n                        }\n                    });\n                }\n                if (tableRows[0].cells.length < columns) {\n                    var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                    $(tableRows).each(function (i, row) {\n                        cmd._insertCells(columns - row.cells.length, row, cellIndex + 1);\n                    });\n                }\n                cmd._updateTableProperties(table, tableProp);\n                var cellProp = data.cellProperties;\n                if (selectedCells[0]) {\n                    dom.attr(selectedCells[0], { id: cellProp.id || null });\n                }\n                (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function (i, cell) {\n                    cmd._updateCellProperties(cell, cellProp);\n                });\n                cmd._updateCaption(table, tableProp);\n                dom.reMapTableColumns(table, COL_INDEX);\n                if (tHead) {\n                    cmd._updateHeadersWithThead(table, data);\n                } else {\n                    cmd._updateHeadersNoThead(table, data);\n                }\n                cmd._updateHeaderAssociates(table, tableProp);\n                dom.clearTableMappings(table, COL_INDEX);\n            },\n            _isHeadingRow: function (row) {\n                return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n            },\n            _isHeadingCell: function (cell) {\n                return dom.is(cell, TH);\n            },\n            cellsWithHeadersAssociated: function (table) {\n                var cells = $(table.rows).children();\n                var headingIds = [];\n                var checkHeader = function (header) {\n                    return headingIds.indexOf(header) > -1;\n                };\n                cells.each(function (c, cell) {\n                    if (cell.id && dom.is(cell, TH)) {\n                        headingIds.push(cell.id);\n                    }\n                });\n                var associatedCells = cells.filter(function (c, cell) {\n                    var headersAttr = cell.getAttribute(HEADERS);\n                    var headersArray;\n                    if (headersAttr && !dom.is(cell, TH)) {\n                        headersArray = headersAttr.split(' ');\n                        if (headersArray && headersArray.length > 0) {\n                            return headersArray.some(checkHeader);\n                        }\n                    }\n                    return false;\n                });\n                return !!associatedCells.length;\n            },\n            _insertCells: function (count, row, index) {\n                index = isNaN(index) ? -1 : index;\n                for (var i = 0, cell; i < count; i++) {\n                    cell = row.insertCell(index);\n                    cell.innerHTML = '&nbsp;';\n                }\n            },\n            _deleteTableRows: function (rows, count) {\n                for (var i = 0, row, rowParent; i < count; i++) {\n                    row = rows.pop();\n                    rowParent = row.parentNode;\n                    rowParent.removeChild(row);\n                    if (!rowParent.rows.length) {\n                        dom.remove(rowParent);\n                    }\n                }\n            },\n            createNewTable: function (data) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                var tableProp = data.tableProperties;\n                var table = dom.create(doc, TABLE);\n                var rowIndex = 0;\n                var thead;\n                cmd._updateTableProperties(table, tableProp);\n                cmd._updateCaption(table, tableProp);\n                if (tableProp.headerRows && tableProp.headerRows > 0) {\n                    thead = table.createTHead();\n                    cmd._createTableRows(data, thead, rowIndex, true);\n                    rowIndex += tableProp.headerRows;\n                }\n                var tbody = table.createTBody();\n                cmd._createTableRows(data, tbody, rowIndex, false);\n                dom.reMapTableColumns(table, COL_INDEX);\n                if (tableProp.cellsWithHeaders === 'ids') {\n                    dom.associateWithIds(table);\n                } else if (tableProp.cellsWithHeaders === 'scope') {\n                    cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n                }\n                dom.clearTableMappings(table, COL_INDEX);\n                return table;\n            },\n            _createTableRows: function (data, container, initialIndex, headerRows) {\n                var cmd = this;\n                var tableProp = data.tableProperties;\n                var cellProp = data.cellProperties;\n                var columns = tableProp.columns;\n                var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n                var cellPropToAll = cellProp.selectAllCells;\n                var headerColumns = tableProp.headerColumns;\n                for (var r = initialIndex, row; r < rows; r++) {\n                    row = container.insertRow();\n                    for (var c = 0, cell; c < columns; c++) {\n                        if (headerRows || headerColumns > c) {\n                            cell = document.createElement(TH);\n                        } else {\n                            cell = document.createElement(TD);\n                        }\n                        row.appendChild(cell);\n                        cell.innerHTML = '&nbsp;';\n                        if (r === 0 && c === 0 && cellProp.id) {\n                            cell.id = cellProp.id;\n                        }\n                        cmd._updateCellProperties(cell, cellPropToAll || r === 0 && c === 0 ? cellProp : {});\n                    }\n                }\n            },\n            _updateTableProperties: function (table, data) {\n                var style = this._getStylesData(data);\n                dom.attr(table, {\n                    cellSpacing: data.cellSpacing || null,\n                    cellPadding: data.cellPadding || null,\n                    className: data.className || null,\n                    id: data.id || null,\n                    summary: data.summary || null,\n                    style: style || null\n                });\n                $(table).addClass('k-table');\n            },\n            _updateCellProperties: function (cell, data) {\n                var style = this._getStylesData(data);\n                style.padding = data.cellPadding || null;\n                style.margin = data.cellMargin || null;\n                dom.attr(cell, {\n                    style: style || null,\n                    className: data.className || null\n                });\n            },\n            _updateCaption: function (table, data) {\n                if (table.caption && !data.captionContent) {\n                    table.deleteCaption();\n                } else if (data.captionContent) {\n                    var caption = table.createCaption();\n                    caption.innerHTML = data.captionContent;\n                    var alignment = this._getAlignmentData(data.captionAlignment);\n                    dom.attr(caption, {\n                        style: {\n                            textAlign: alignment.textAlign,\n                            verticalAlign: alignment.verticalAlign\n                        }\n                    });\n                }\n            },\n            _updateHeadersNoThead: function (table, data) {\n                var cmd = this;\n                var tableProp = data.tableProperties;\n                var rows = table.rows;\n                var row, cells, cell, i, j;\n                for (i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    cells = row.cells;\n                    for (j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                            dom.changeTag(cell, TH, false);\n                        } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                            dom.changeTag(cell, TD, false);\n                        }\n                    }\n                }\n            },\n            _updateHeadersWithThead: function (table, data) {\n                var cmd = this;\n                var tableProp = data.tableProperties;\n                var thead = table.tHead;\n                var rowIndex = 0;\n                var tbody = table.tBodies[0];\n                var row, cell, i;\n                if (!tbody) {\n                    tbody = table.createTBody();\n                }\n                if (tableProp.headerRows && tableProp.headerRows > 0) {\n                    if (!thead) {\n                        thead = table.createTHead();\n                    }\n                    while (thead.rows.length < tableProp.headerRows) {\n                        thead.appendChild(tbody.rows[0]);\n                    }\n                    while (thead.rows.length > tableProp.headerRows) {\n                        tbody.appendChild(thead.rows[0]);\n                    }\n                    cmd._swapToHeaderCells(thead);\n                } else if (thead) {\n                    while (thead.rows.length > 0) {\n                        tbody.appendChild(thead.rows[thead.rows.length - 1]);\n                    }\n                    table.deleteTHead();\n                }\n                while (tbody.rows.length > rowIndex) {\n                    row = tbody.rows[rowIndex];\n                    for (i = 0; i < row.cells.length; i++) {\n                        cell = row.cells[i];\n                        if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                            dom.changeTag(cell, TD, false);\n                        } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                            dom.changeTag(cell, TH, false);\n                        }\n                    }\n                    rowIndex += 1;\n                }\n            },\n            _updateHeaderAssociates: function (table, tableProp) {\n                var cmd = this;\n                if (tableProp.cellsWithHeaders === 'ids') {\n                    if (!cmd.cellsWithHeadersAssociated(table)) {\n                        cmd._removeScopes(table);\n                    }\n                    dom.associateWithIds(table);\n                } else if (tableProp.cellsWithHeaders === 'scope') {\n                    if (cmd.cellsWithHeadersAssociated(table)) {\n                        cmd._removeAssociates(table);\n                    }\n                    cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n                } else {\n                    if (cmd.cellsWithHeadersAssociated(table)) {\n                        cmd._removeAssociates(table);\n                    } else {\n                        cmd._removeScopes(table);\n                    }\n                }\n            },\n            _addScopes: function (table, headerRows, headerCols) {\n                var rows = table.rows;\n                var i, j, row, cell;\n                for (i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    for (j = 0; j < row.cells.length; j++) {\n                        cell = row.cells[j];\n                        if (i < headerRows) {\n                            cell.setAttribute(SCOPE, COL);\n                        } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                            cell.setAttribute(SCOPE, ROW);\n                        }\n                    }\n                }\n            },\n            _removeScopes: function (table) {\n                $(table).find(TH).removeAttr(SCOPE);\n                $(table).find(COL).remove();\n                $(table).find(COLGROUP).remove();\n            },\n            _removeAssociates: function (table) {\n                $(table).find('th, td').removeAttr('id headers');\n            },\n            _swapToHeaderCells: function (thead) {\n                var tds = $(thead).find('td');\n                var swapCell = function (index, cell) {\n                    dom.changeTag(cell, TH, false);\n                };\n                tds.each(swapCell);\n            },\n            _getStylesData: function (data) {\n                var alignment = this._getAlignmentData(data.alignment);\n                var whiteSpace = 'wrapText' in data ? data.wrapText ? '' : 'nowrap' : null;\n                return {\n                    width: data.width ? data.width + data.widthUnit : null,\n                    height: data.height ? data.height + data.heightUnit : null,\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign,\n                    backgroundColor: data.bgColor || '',\n                    borderWidth: data.borderWidth,\n                    borderStyle: data.borderStyle,\n                    borderColor: data.borderColor || '',\n                    borderCollapse: data.collapseBorders ? 'collapse' : null,\n                    whiteSpace: whiteSpace\n                };\n            },\n            _getAlignmentData: function (alignment) {\n                var textAlign = '';\n                var verticalAlign = textAlign;\n                if (alignment) {\n                    if (alignment.indexOf(' ') != -1) {\n                        var align = alignment.split(' ');\n                        textAlign = align[0];\n                        verticalAlign = align[1];\n                    } else {\n                        textAlign = alignment;\n                    }\n                }\n                return {\n                    textAlign: textAlign,\n                    verticalAlign: verticalAlign\n                };\n            },\n            parseTable: function (table, selectedCells) {\n                if (!table) {\n                    return {\n                        tableProperties: {},\n                        selectedCells: []\n                    };\n                }\n                var cmd = this;\n                var tStyle = table.style;\n                var rows = table.rows;\n                var caption = table.caption;\n                var captionClone = $(caption ? caption.cloneNode(true) : undefined);\n                captionClone.find('.k-marker').remove();\n                var cssClass = table.className;\n                cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, '');\n                cssClass = cssClass.replace(/\\sk-table\\s/, ' ');\n                cssClass = cssClass.replace(/^k-table$/, '');\n                var tableAlignment = cmd._getAlignment(table, true);\n                var captionAlignment = caption ? cmd._getAlignment(caption) : undefined;\n                var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n                var cellsWithHeaders;\n                if (cmd.cellsWithHeadersAssociated(table)) {\n                    cellsWithHeaders = 'ids';\n                } else if ($(table).find('th[scope]').length > 0) {\n                    cellsWithHeaders = 'scope';\n                } else {\n                    cellsWithHeaders = 'none';\n                }\n                dom.reMapTableColumns(table, COL_INDEX);\n                var numberOfColumns = dom._getNumberOfColumns(table);\n                var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n                dom.clearTableMappings(table, COL_INDEX);\n                var tableJson = {\n                    tableProperties: {\n                        width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                        height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                        columns: numberOfColumns,\n                        rows: rows.length,\n                        widthUnit: cmd._getUnit(tStyle.width),\n                        heightUnit: cmd._getUnit(tStyle.height),\n                        cellSpacing: table.cellSpacing,\n                        cellPadding: table.cellPadding,\n                        alignment: tableAlignment.textAlign,\n                        bgColor: tStyle.backgroundColor || table.bgColor,\n                        className: cssClass,\n                        id: table.id,\n                        borderWidth: tStyle.borderWidth || table.border,\n                        borderColor: tStyle.borderColor,\n                        borderStyle: tStyle.borderStyle || '',\n                        collapseBorders: !!tStyle.borderCollapse,\n                        summary: table.summary,\n                        captionContent: caption ? captionClone.html() : '',\n                        captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + ' ' + captionAlignment.verticalAlign : '',\n                        headerRows: numberOfHeaderRows,\n                        headerColumns: numberOfHeaderColumns,\n                        cellsWithHeaders: cellsWithHeaders\n                    },\n                    selectedCells: []\n                };\n                tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n                return tableJson;\n            },\n            parseTableRows: function (rows, selectedCells, tableJson) {\n                var cmd = this;\n                var data = [], row, rowData, cells, cell, cellData;\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    rowData = { cells: [] };\n                    cells = row.cells;\n                    data.push(rowData);\n                    for (var j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        cellData = cmd.parseCell(cell);\n                        if ($.inArray(cell, selectedCells) != -1) {\n                            tableJson.selectedCells.push(cellData);\n                        }\n                        rowData.cells.push(cellData);\n                    }\n                }\n                return data;\n            },\n            parseCell: function (cell) {\n                var cmd = this;\n                var cStyle = cell.style;\n                var alignment = cmd._getAlignment(cell);\n                alignment = alignment.textAlign ? alignment.textAlign + ' ' + alignment.verticalAlign : '';\n                var data = {\n                    width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                    height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                    widthUnit: cmd._getUnit(cStyle.width),\n                    heightUnit: cmd._getUnit(cStyle.height),\n                    cellMargin: cStyle.margin,\n                    cellPadding: cStyle.padding,\n                    alignment: alignment,\n                    bgColor: cStyle.backgroundColor || cell.bgColor,\n                    className: cell.className,\n                    id: cell.id,\n                    borderWidth: cStyle.borderWidth || cell.border,\n                    borderColor: cStyle.borderColor,\n                    borderStyle: cStyle.borderStyle,\n                    wrapText: cStyle.whiteSpace != 'nowrap'\n                };\n                return data;\n            },\n            _getAlignment: function (element, horizontalOnly) {\n                var style = element.style;\n                var hAlign = style.textAlign || element.align || '';\n                if (horizontalOnly) {\n                    return { textAlign: hAlign };\n                }\n                var vAlign = style.verticalAlign || element.vAlign || '';\n                if (hAlign && vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: vAlign\n                    };\n                }\n                if (!hAlign && vAlign) {\n                    return {\n                        textAlign: 'left',\n                        verticalAlign: vAlign\n                    };\n                }\n                if (hAlign && !vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: 'top'\n                    };\n                }\n                return {\n                    textAlign: '',\n                    verticalAlign: ''\n                };\n            },\n            _getUnit: function (value) {\n                var unit = (value || '').match(reUnit);\n                return unit ? unit[0] : 'px';\n            },\n            _selectedTable: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return tableFormatFinder.findSuitable(nodes)[0];\n            },\n            _selectedCells: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return cellsFormatFinder.findSuitable(nodes);\n            }\n        });\n        var TableWizardTool = Editor.Tool.extend({\n            command: function (options) {\n                options.insertNewTable = this.options.insertNewTable;\n                return new TableWizardCommand(options);\n            }\n        });\n        var TableWizardEditTool = TableWizardTool.extend({\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                if (isFormatted === true) {\n                    ui.parent().addClass('k-hidden k-state-disabled');\n                    ui.attr('disabled', 'disabled');\n                    ui.addClass('k-state-disabled');\n                } else {\n                    ui.parent().removeClass('k-hidden k-state-disabled');\n                    ui.removeAttr('disabled');\n                    ui.removeClass('k-state-disabled');\n                }\n            }\n        });\n        kendo.ui.editor.TableWizardTool = TableWizardTool;\n        kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n        registerTool('tableWizard', new TableWizardEditTool({\n            command: TableWizardCommand,\n            insertNewTable: false,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Wizard'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-dialog', [\n        'editor/table-wizard/table-wizard-command',\n        'kendo.tabstrip'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, numericTextBoxSettings = {\n                format: '0',\n                min: 0\n            }, units = [\n                'px',\n                'em'\n            ], borderStyles = [\n                'solid',\n                'dotted',\n                'dashed',\n                'double',\n                'groove',\n                'ridge',\n                'inset',\n                'outset',\n                'initial',\n                'inherit',\n                'none',\n                'hidden'\n            ];\n        var DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n        var tableAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var cellAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var accessibilityAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var dialogTemplate = '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' + '<ul>' + '<li class=\"k-state-active\">#= messages.tableTab #</li>' + '<li>#= messages.cellTab #</li>' + '<li>#= messages.accessibilityTab #</li>' + '</ul>' + '<div id=\"k-table-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-width\" />' + '<input id=\"k-editor-table-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-height\" />' + '<input id=\"k-editor-table-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-columns\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-rows\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-css-class\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-id\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-border-width\" />' + '<input id=\"k-editor-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' + '</div>' + '</div>' + '<div id=\"k-cell-properties\">' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-width\" />' + '<input id=\"k-editor-cell-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-height\" />' + '<input id=\"k-editor-cell-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-css-class\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-id\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' + '<input id=\"k-editor-cell-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' + '</div>' + '</div>' + '<div id=\"k-accessibility-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-header-rows\">#= messages.headerRows #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-header-rows\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-header-columns\">#= messages.headerColumns #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-header-columns\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-caption\" class=\"k-textbox\" type=\"text\"/>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<textarea id=\"k-editor-accessibility-summary\" rows=\"5\" class=\"k-textbox k-editor-accessibility-summary\" placeholder=\"#= messages.tableSummaryPlaceholder #\"></textarea>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cells-headers\">#= messages.associateCellsWithHeaders #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<select id=\"k-editor-cells-headers\">' + '<option value=\"none\">#= messages.associateNone #</option>' + '<option value=\"scope\">#= messages.associateScope #</option>' + '<option value=\"ids\">#= messages.associateIds #</option>' + '</select>' + '</div>' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-button k-primary k-dialog-ok\">#= messages.dialogOk #</button>' + '<button class=\"k-button k-dialog-close\">#= messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>';\n        var TableWizardDialog = kendo.Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            open: function () {\n                var that = this, options = that.options, dialogOptions = options.dialogOptions, tableData = options.table, dialog, messages = options.messages, isIE = kendo.support.browser.msie;\n                function close(e) {\n                    e.preventDefault();\n                    that.destroy();\n                    dialog.destroy();\n                }\n                function okHandler(e) {\n                    that.collectDialogValues(tableData);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    options.closeCallback(tableData);\n                }\n                function closeHandler(e) {\n                    close(e);\n                    options.closeCallback();\n                }\n                dialogOptions.close = closeHandler;\n                dialogOptions.title = messages.tableWizard;\n                dialogOptions.visible = options.visible;\n                dialog = $(that._dialogTemplate(messages)).appendTo(document.body).kendoWindow(dialogOptions).closest('.k-window').toggleClass('k-rtl', options.isRtl).end().find('.k-dialog-ok').click(okHandler).end().find('.k-dialog-close').click(closeHandler).end().data('kendoWindow');\n                var element = dialog.element;\n                that._initTabStripComponent(element);\n                that._initTableViewComponents(element, tableData);\n                that._initCellViewComponents(element, tableData);\n                that._initAccessibilityViewComponents(element, tableData);\n                dialog.center();\n                dialog.open();\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n            },\n            _initTabStripComponent: function (element) {\n                var components = this.components = {};\n                components.tabStrip = element.find('#k-table-wizard-tabs').kendoTabStrip({ animation: false }).data('kendoTabStrip');\n            },\n            collectDialogValues: function () {\n                var that = this;\n                var data = that.options.table;\n                that._collectTableViewValues(data);\n                that._collectCellViewValues(data);\n                that._collectAccessibilityViewValues(data);\n            },\n            _collectTableViewValues: function (tableData) {\n                var tableView = this.components.tableView;\n                var tableProperties = tableData.tableProperties;\n                tableProperties.width = tableView.width.value();\n                tableProperties.widthUnit = tableView.widthUnit.value();\n                tableProperties.height = tableView.height.value();\n                tableProperties.columns = tableView.columns.value();\n                tableProperties.rows = tableView.rows.value();\n                tableProperties.heightUnit = tableView.heightUnit.value();\n                tableProperties.cellSpacing = tableView.cellSpacing.value();\n                tableProperties.cellPadding = tableView.cellPadding.value();\n                tableProperties.alignment = tableView.alignment.value();\n                tableProperties.bgColor = tableView.bgColor.value();\n                tableProperties.className = tableView.className.value;\n                tableProperties.id = tableView.id.value;\n                tableProperties.borderWidth = tableView.borderWidth.value();\n                tableProperties.borderColor = tableView.borderColor.value();\n                tableProperties.borderStyle = tableView.borderStyle.value();\n                tableProperties.collapseBorders = tableView.collapseBorders.checked;\n            },\n            _collectCellViewValues: function (table) {\n                var cellData = table.cellProperties = {};\n                var cellView = this.components.cellView;\n                cellData.selectAllCells = cellView.selectAllCells.checked;\n                cellData.width = cellView.width.value();\n                cellData.widthUnit = cellView.widthUnit.value();\n                cellData.height = cellView.height.value();\n                cellData.heightUnit = cellView.heightUnit.value();\n                cellData.cellMargin = cellView.cellMargin.value();\n                cellData.cellPadding = cellView.cellPadding.value();\n                cellData.alignment = cellView.alignment.value();\n                cellData.bgColor = cellView.bgColor.value();\n                cellData.className = cellView.className.value;\n                cellData.id = cellView.id.value;\n                cellData.borderWidth = cellView.borderWidth.value();\n                cellData.borderColor = cellView.borderColor.value();\n                cellData.borderStyle = cellView.borderStyle.value();\n                cellData.wrapText = cellView.wrapText.checked;\n                if (!cellData.width) {\n                    cellData.selectAllCells = true;\n                    cellData.width = 100 / table.tableProperties.columns;\n                    cellData.widthUnit = '%';\n                }\n            },\n            _collectAccessibilityViewValues: function (table) {\n                var tableProperties = table.tableProperties;\n                var accessibilityView = this.components.accessibilityView;\n                tableProperties.captionContent = accessibilityView.captionContent.value;\n                tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n                tableProperties.summary = accessibilityView.summary.value;\n                tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n                tableProperties.headerRows = accessibilityView.headerRows.value();\n                tableProperties.headerColumns = accessibilityView.headerColumns.value();\n            },\n            _addUnit: function (units, value) {\n                if (value && $.inArray(value, units) == -1) {\n                    units.push(value);\n                }\n            },\n            _initTableViewComponents: function (element, table) {\n                var that = this;\n                var components = that.components;\n                var tableView = components.tableView = {};\n                var tableProperties = table.tableProperties = table.tableProperties || {};\n                tableProperties.borderStyle = tableProperties.borderStyle || '';\n                var onColumnsNumberChange = function (args) {\n                    var accessibilityView = that.components.accessibilityView;\n                    var headerColumnsNumeric = accessibilityView.headerColumns;\n                    var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n                    var numberOfColumns = args.sender.value();\n                    if (numberOfColumns < currentNumberOfColumnsHeaders) {\n                        headerColumnsNumeric.value(numberOfColumns);\n                    }\n                    headerColumnsNumeric.max(numberOfColumns);\n                };\n                var onRowsNumberChange = function (args) {\n                    var accessibilityView = that.components.accessibilityView;\n                    var headerRowsNumeric = accessibilityView.headerRows;\n                    var currentNumberOfRowHeaders = headerRowsNumeric.value();\n                    var numberOfRows = args.sender.value();\n                    if (numberOfRows < currentNumberOfRowHeaders) {\n                        headerRowsNumeric.value(numberOfRows);\n                    }\n                    headerRowsNumeric.max(numberOfRows);\n                };\n                that._addUnit(units, tableProperties.widthUnit);\n                that._addUnit(units, tableProperties.heightUnit);\n                that._initNumericTextbox(element.find('#k-editor-table-width'), 'width', tableProperties, tableView);\n                that._initNumericTextbox(element.find('#k-editor-table-height'), 'height', tableProperties, tableView);\n                that._initNumericTextbox(element.find('#k-editor-table-columns'), 'columns', tableProperties, tableView, {\n                    min: 1,\n                    value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                    change: onColumnsNumberChange\n                });\n                that._initNumericTextbox(element.find('#k-editor-table-rows'), 'rows', tableProperties, tableView, {\n                    min: 1,\n                    value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                    change: onRowsNumberChange\n                });\n                that._initDropDownList(element.find('#k-editor-table-width-type'), 'widthUnit', tableProperties, tableView, units);\n                that._initDropDownList(element.find('#k-editor-table-height-type'), 'heightUnit', tableProperties, tableView, units);\n                that._initNumericTextbox(element.find('#k-editor-table-cell-spacing'), 'cellSpacing', tableProperties, tableView);\n                that._initNumericTextbox(element.find('#k-editor-table-cell-padding'), 'cellPadding', tableProperties, tableView);\n                that._initTableAlignmentDropDown(element.find('#k-editor-table-alignment'), tableProperties);\n                that._initColorPicker(element.find('#k-editor-table-bg'), 'bgColor', tableProperties, tableView);\n                that._initInput(element.find('#k-editor-css-class'), 'className', tableProperties, tableView);\n                that._initInput(element.find('#k-editor-id'), 'id', tableProperties, tableView);\n                that._initNumericTextbox(element.find('#k-editor-border-width'), 'borderWidth', tableProperties, tableView);\n                that._initColorPicker(element.find('#k-editor-border-color'), 'borderColor', tableProperties, tableView);\n                that._initDropDownList(element.find('#k-editor-border-style'), 'borderStyle', tableProperties, tableView, borderStyles);\n                that._initCheckbox(element.find('#k-editor-collapse-borders'), 'collapseBorders', tableProperties, tableView);\n            },\n            _initCellViewComponents: function (element, table) {\n                var components = this.components;\n                var cellView = components.cellView = {};\n                table.selectedCells = table.selectedCells = table.selectedCells || [];\n                var cellProperties = table.selectedCells[0] || {\n                    borderStyle: '',\n                    wrapText: true\n                };\n                this._addUnit(units, cellProperties.widthUnit);\n                this._addUnit(units, cellProperties.heightUnit);\n                this._initCheckbox(element.find('#k-editor-selectAllCells'), 'selectAllCells', table.tableProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-width'), 'width', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-height'), 'height', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-width-type'), 'widthUnit', cellProperties, cellView, units);\n                this._initDropDownList(element.find('#k-editor-cell-height-type'), 'heightUnit', cellProperties, cellView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-margin'), 'cellMargin', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-table-cells-padding'), 'cellPadding', cellProperties, cellView);\n                this._initCellAlignmentDropDown(element.find('#k-editor-cell-alignment'), cellProperties);\n                this._initColorPicker(element.find('#k-editor-cell-bg'), 'bgColor', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-css-class'), 'className', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-id'), 'id', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-border-width'), 'borderWidth', cellProperties, cellView);\n                this._initColorPicker(element.find('#k-editor-cell-border-color'), 'borderColor', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-border-style'), 'borderStyle', cellProperties, cellView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-wrap-text'), 'wrapText', cellProperties, cellView);\n            },\n            _initAccessibilityViewComponents: function (element, table) {\n                var components = this.components;\n                var accessibilityView = components.accessibilityView = {};\n                var tableProperties = table.tableProperties;\n                this._initInput(element.find('#k-editor-table-caption'), 'captionContent', tableProperties, accessibilityView);\n                this._initAccessibilityAlignmentDropDown(element.find('#k-editor-accessibility-alignment'), tableProperties);\n                this._initInput(element.find('#k-editor-accessibility-summary'), 'summary', tableProperties, accessibilityView);\n                this._initAssociationDropDown(element.find('#k-editor-cells-headers'), 'cellsWithHeaders', { valuePrimitive: true }, tableProperties, accessibilityView);\n                this._initNumericTextbox(element.find('#k-editor-table-header-rows'), 'headerRows', tableProperties, accessibilityView, { max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n                this._initNumericTextbox(element.find('#k-editor-table-header-columns'), 'headerColumns', tableProperties, accessibilityView, { max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n            },\n            _initNumericTextbox: function (element, property, data, storage, settings) {\n                var component = storage[property] = element.kendoNumericTextBox(settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings).data('kendoNumericTextBox');\n                if (property in data) {\n                    component.value(parseInt(data[property], 10));\n                }\n            },\n            _initDropDownList: function (element, property, data, storage, dataSource) {\n                var component = storage[property] = element.kendoDropDownList({ dataSource: dataSource }).data('kendoDropDownList');\n                this._setComponentValue(component, data, property);\n            },\n            _initTableAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var tableView = this.components.tableView;\n                var dataSource = tableAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeft;\n                dataSource[1].tooltip = messages.alignCenter;\n                dataSource[2].tooltip = messages.alignRight;\n                dataSource[3].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, 'alignment', data, tableView);\n            },\n            _initCellAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var cellView = this.components.cellView;\n                var dataSource = cellAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftMiddle;\n                dataSource[4].tooltip = messages.alignCenterMiddle;\n                dataSource[5].tooltip = messages.alignRightMiddle;\n                dataSource[6].tooltip = messages.alignLeftBottom;\n                dataSource[7].tooltip = messages.alignCenterBottom;\n                dataSource[8].tooltip = messages.alignRightBottom;\n                dataSource[9].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, 'alignment', data, cellView);\n            },\n            _initAccessibilityAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var accessibilityView = this.components.accessibilityView;\n                var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftBottom;\n                dataSource[4].tooltip = messages.alignCenterBottom;\n                dataSource[5].tooltip = messages.alignRightBottom;\n                dataSource[6].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, 'captionAlignment', data, accessibilityView);\n            },\n            _initAlignmentDropDown: function (element, settings, name, data, storage) {\n                var component = storage[name] = element.kendoDropDownList(settings).data('kendoDropDownList');\n                component.list.addClass('k-align').css('width', '110px');\n                this._setComponentValue(component, data, name);\n            },\n            _initAssociationDropDown: function (element, name, settings, data, storage) {\n                var component = storage[name] = element.kendoDropDownList(settings).data('kendoDropDownList');\n                this._setComponentValue(component, data, name);\n            },\n            _setComponentValue: function (component, data, property) {\n                if (property in data) {\n                    component.value(data[property]);\n                }\n            },\n            _initColorPicker: function (element, property, data, storage) {\n                var component = storage[property] = element.kendoColorPicker({\n                    buttons: false,\n                    clearButton: true\n                }).data('kendoColorPicker');\n                if (data[property]) {\n                    component.value(data[property]);\n                }\n            },\n            _initInput: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.value = data[property];\n                }\n            },\n            _initCheckbox: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.checked = data[property];\n                }\n            },\n            destroy: function () {\n                this._destroyComponents(this.components.tableView);\n                this._destroyComponents(this.components.cellView);\n                this._destroyComponents(this.components.accessibilityView);\n                this._destroyComponents(this.components);\n                delete this.components;\n            },\n            _destroyComponents: function (components) {\n                for (var widget in components) {\n                    if (components[widget].destroy) {\n                        components[widget].destroy();\n                    }\n                    delete components[widget];\n                }\n            },\n            _dialogTemplate: function (messages) {\n                return kendo.template(dialogTemplate)({ messages: messages });\n            }\n        });\n        kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.editor', [\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.resizable',\n        'kendo.window',\n        'kendo.colorpicker',\n        'kendo.imagebrowser',\n        'kendo.numerictextbox',\n        'util/undoredostack',\n        'editor/main',\n        'editor/dom',\n        'editor/serializer',\n        'editor/range',\n        'editor/command',\n        'editor/components',\n        'editor/toolbar',\n        'editor/immutables',\n        'editor/plugins/viewhtml',\n        'editor/plugins/link',\n        'editor/plugins/lists',\n        'editor/plugins/formatting',\n        'editor/plugins/image',\n        'editor/plugins/import',\n        'editor/plugins/insert',\n        'editor/plugins/export',\n        'editor/plugins/indent',\n        'editor/plugins/linebreak',\n        'editor/plugins/format',\n        'editor/plugins/inlineformat',\n        'editor/plugins/formatblock',\n        'editor/plugins/file',\n        'editor/plugins/tables',\n        'editor/plugins/clipboard',\n        'editor/plugins/keyboard',\n        'editor/plugins/exportpdf',\n        'editor/plugins/print',\n        'editor/plugins/formatpainter',\n        'editor/resizing/column-resizing',\n        'editor/resizing/row-resizing',\n        'editor/resizing/table-resizing',\n        'editor/resizing/table-resize-handle',\n        'editor/table-wizard/table-wizard-command',\n        'editor/table-wizard/table-wizard-dialog'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'editor',\n        name: 'Editor',\n        category: 'web',\n        description: 'Rich text editor component',\n        depends: [\n            'combobox',\n            'dropdownlist',\n            'window',\n            'colorpicker'\n        ],\n        features: [\n            {\n                id: 'editor-imagebrowser',\n                name: 'Image Browser',\n                description: 'Support for uploading and inserting images',\n                depends: ['imagebrowser']\n            },\n            {\n                id: 'editor-resizable',\n                name: 'Resize handle',\n                description: 'Support for resizing the content area via a resize handle',\n                depends: ['resizable']\n            },\n            {\n                id: 'editor-tablewizard',\n                name: 'Table wizard dialog',\n                description: 'Support for table properties configuration',\n                depends: [\n                    'tabstrip',\n                    'button',\n                    'numerictextbox'\n                ]\n            },\n            {\n                id: 'editor-pdf-export',\n                name: 'PDF export',\n                description: 'Export Editor content as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            }\n        ]\n    };\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}